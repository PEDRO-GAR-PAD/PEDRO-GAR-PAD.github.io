import{a as V,b as xe,c as lf,d as M,e as Ww,f as du,g as Kw,h as Qw,i as Yw,j as df,k as Zw,l as ra,m as hf,n as hu,o as Jw,p as Xw,q as ff,r as Oe,s as si,t as In,u as fu,v as ia,w as eI,x as tI,y as yr,z as Bt}from"./chunk-4ZHOUZTK.js";var gf=null;var pf=1,nI=Symbol("SIGNAL");function Ce(n){let e=gf;return gf=n,e}function rI(){return gf}var mf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Gx(n){if(!(If(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===pf)){if(!n.producerMustRecompute(n)&&!vf(n)){n.dirty=!1,n.lastCleanEpoch=pf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=pf}}function yf(n){return n&&(n.nextProducerIndex=0),Ce(n)}function iI(n,e){if(Ce(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(If(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)wf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function vf(n){Ef(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Gx(t),r!==t.version))return!0}return!1}function _f(n){if(Ef(n),If(n))for(let e=0;e<n.producerNode.length;e++)wf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function wf(n,e){if(Wx(n),n.liveConsumerNode.length===1&&Kx(n))for(let r=0;r<n.producerNode.length;r++)wf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ef(i),i.producerIndexOfThis[r]=e}}function If(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ef(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Wx(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Kx(n){return n.producerNode!==void 0}function Qx(){throw new Error}var Yx=Qx;function oI(n){Yx=n}function re(n){return typeof n=="function"}function so(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var pu=so(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ai(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ue=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof pu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{sI(o)}catch(s){e=e??[],s instanceof pu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new pu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)sI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ai(t,e)}remove(e){let{_finalizers:t}=this;t&&ai(t,e),e instanceof n&&e._removeParent(this)}};Ue.EMPTY=(()=>{let n=new Ue;return n.closed=!0,n})();var Df=Ue.EMPTY;function gu(n){return n instanceof Ue||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function sI(n){re(n)?n():n.unsubscribe()}var an={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ao={setTimeout(n,e,...t){let{delegate:r}=ao;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ao;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function mu(n){ao.setTimeout(()=>{let{onUnhandledError:e}=an;if(e)e(n);else throw n})}function oa(){}var aI=Cf("C",void 0,void 0);function cI(n){return Cf("E",void 0,n)}function uI(n){return Cf("N",n,void 0)}function Cf(n,e,t){return{kind:n,value:e,error:t}}var ci=null;function co(n){if(an.useDeprecatedSynchronousErrorHandling){let e=!ci;if(e&&(ci={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ci;if(ci=null,t)throw r}}else n()}function lI(n){an.useDeprecatedSynchronousErrorHandling&&ci&&(ci.errorThrown=!0,ci.error=n)}var ui=class extends Ue{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gu(e)&&e.add(this)):this.destination=Xx}static create(e,t,r){return new qn(e,t,r)}next(e){this.isStopped?bf(uI(e),this):this._next(e)}error(e){this.isStopped?bf(cI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?bf(aI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Zx=Function.prototype.bind;function Tf(n,e){return Zx.call(n,e)}var Sf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){yu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){yu(r)}else yu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){yu(t)}}},qn=class extends ui{constructor(e,t,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&an.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Tf(e.next,o),error:e.error&&Tf(e.error,o),complete:e.complete&&Tf(e.complete,o)}):i=e}this.destination=new Sf(i)}};function yu(n){an.useDeprecatedSynchronousErrorHandling?lI(n):mu(n)}function Jx(n){throw n}function bf(n,e){let{onStoppedNotification:t}=an;t&&ao.setTimeout(()=>t(n,e))}var Xx={closed:!0,next:oa,error:Jx,complete:oa};var uo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wt(n){return n}function Af(...n){return xf(n)}function xf(n){return n.length===0?wt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var pe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=tM(t)?t:new qn(t,r,i);return co(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=dI(r),new r((i,o)=>{let s=new qn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[uo](){return this}pipe(...t){return xf(t)(this)}toPromise(t){return t=dI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function dI(n){var e;return(e=n??an.Promise)!==null&&e!==void 0?e:Promise}function eM(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function tM(n){return n&&n instanceof ui||eM(n)&&gu(n)}function Mf(n){return re(n?.lift)}function ce(n){return e=>{if(Mf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(n,e,t,r,i){return new Rf(n,e,t,r,i)}var Rf=class extends ui{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function lo(){return ce((n,e)=>{let t=null;n._refCount++;let r=le(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ho=class extends pe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Mf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ue;let t=this.getSubject();e.add(this.source.subscribe(le(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ue.EMPTY)}return e}refCount(){return lo()(this)}};var hI=so(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class n extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new vu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new hI}next(t){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Df:(this.currentObservers=null,o.push(t),new Ue(()=>{this.currentObservers=null,ai(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new pe;return t.source=this,t}}return n.create=(e,t)=>new vu(e,t),n})(),vu=class extends ze{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Df}};var ct=class extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var sa={now(){return(sa.delegate||Date).now()},delegate:void 0};var _u=class extends ze{constructor(e=1/0,t=1/0,r=sa){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var wu=class extends Ue{constructor(e,t){super()}schedule(e,t=0){return this}};var aa={setInterval(n,e,...t){let{delegate:r}=aa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=aa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var fo=class extends wu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return aa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&aa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ai(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var po=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};po.now=sa.now;var go=class extends po{constructor(e,t=po.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ca=new go(fo);var Iu=class extends fo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Eu=class extends go{};var Nf=new Eu(Iu);var It=new pe(n=>n.complete());function fI(n){return n&&re(n.schedule)}function Pf(n){return n[n.length-1]}function pI(n){return re(Pf(n))?n.pop():void 0}function En(n){return fI(Pf(n))?n.pop():void 0}function gI(n,e){return typeof Pf(n)=="number"?n.pop():e}var Du=n=>n&&typeof n.length=="number"&&typeof n!="function";function Cu(n){return re(n?.then)}function Tu(n){return re(n[uo])}function bu(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function Su(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function nM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Au=nM();function xu(n){return re(n?.[Au])}function Mu(n){return Kw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield du(t.read());if(i)return yield du(void 0);yield yield du(r)}}finally{t.releaseLock()}})}function Ru(n){return re(n?.getReader)}function Fe(n){if(n instanceof pe)return n;if(n!=null){if(Tu(n))return rM(n);if(Du(n))return iM(n);if(Cu(n))return oM(n);if(bu(n))return mI(n);if(xu(n))return sM(n);if(Ru(n))return aM(n)}throw Su(n)}function rM(n){return new pe(e=>{let t=n[uo]();if(re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function iM(n){return new pe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function oM(n){return new pe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,mu)})}function sM(n){return new pe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function mI(n){return new pe(e=>{cM(n,e).catch(t=>e.error(t))})}function aM(n){return mI(Mu(n))}function cM(n,e){var t,r,i,o;return Ww(this,void 0,void 0,function*(){try{for(t=Qw(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Nt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Wt(n,e=0){return ce((t,r)=>{t.subscribe(le(r,i=>Nt(r,n,()=>r.next(i),e),()=>Nt(r,n,()=>r.complete(),e),i=>Nt(r,n,()=>r.error(i),e)))})}function cn(n,e=0){return ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function yI(n,e){return Fe(n).pipe(cn(e),Wt(e))}function vI(n,e){return Fe(n).pipe(cn(e),Wt(e))}function _I(n,e){return new pe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function wI(n,e){return new pe(t=>{let r;return Nt(t,e,()=>{r=n[Au](),Nt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function Nu(n,e){if(!n)throw new Error("Iterable cannot be null");return new pe(t=>{Nt(t,e,()=>{let r=n[Symbol.asyncIterator]();Nt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function II(n,e){return Nu(Mu(n),e)}function EI(n,e){if(n!=null){if(Tu(n))return yI(n,e);if(Du(n))return _I(n,e);if(Cu(n))return vI(n,e);if(bu(n))return Nu(n,e);if(xu(n))return wI(n,e);if(Ru(n))return II(n,e)}throw Su(n)}function Ee(n,e){return e?EI(n,e):Fe(n)}function ee(...n){let e=En(n);return Ee(n,e)}function mo(n,e){let t=re(n)?n:()=>n,r=i=>i.error(t());return new pe(e?i=>e.schedule(r,0,i):r)}function kf(n){return!!n&&(n instanceof pe||re(n.lift)&&re(n.subscribe))}var zn=so(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function G(n,e){return ce((t,r)=>{let i=0;t.subscribe(le(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:uM}=Array;function lM(n,e){return uM(e)?n(...e):n(e)}function DI(n){return G(e=>lM(n,e))}var{isArray:dM}=Array,{getPrototypeOf:hM,prototype:fM,keys:pM}=Object;function CI(n){if(n.length===1){let e=n[0];if(dM(e))return{args:e,keys:null};if(gM(e)){let t=pM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function gM(n){return n&&typeof n=="object"&&hM(n)===fM}function TI(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ua(...n){let e=En(n),t=pI(n),{args:r,keys:i}=CI(n);if(r.length===0)return Ee([],e);let o=new pe(mM(r,e,i?s=>TI(i,s):wt));return t?o.pipe(DI(t)):o}function mM(n,e,t=wt){return r=>{bI(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)bI(e,()=>{let l=Ee(n[u],e),h=!1;l.subscribe(le(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function bI(n,e,t){n?Nt(t,n,e):e()}function SI(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},v=R=>l<r?b(R):u.push(R),b=R=>{o&&e.next(R),l++;let N=!1;Fe(t(R,h++)).subscribe(le(e,B=>{i?.(B),o?v(B):e.next(B)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let B=u.shift();s?Nt(e,s,()=>b(B)):b(B)}m()}catch(B){e.error(B)}}))};return n.subscribe(le(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Ye(n,e,t=1/0){return re(e)?Ye((r,i)=>G((o,s)=>e(r,o,i,s))(Fe(n(r,i))),t):(typeof e=="number"&&(t=e),ce((r,i)=>SI(r,i,n,t)))}function vr(n=1/0){return Ye(wt,n)}function AI(){return vr(1)}function yo(...n){return AI()(Ee(n,En(n)))}function Pu(n){return new pe(e=>{Fe(n()).subscribe(e)})}function Of(...n){let e=En(n),t=gI(n,1/0),r=n;return r.length?r.length===1?Fe(r[0]):vr(t)(Ee(r,e)):It}function ut(n,e){return ce((t,r)=>{let i=0;t.subscribe(le(r,o=>n.call(e,o,i++)&&r.next(o)))})}function _r(n){return ce((e,t)=>{let r=null,i=!1,o;r=e.subscribe(le(t,void 0,void 0,s=>{o=Fe(n(s,_r(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function xI(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(le(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function li(n,e){return re(e)?Ye(n,e,1):Ye(n,1)}function wr(n){return ce((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Gn(n){return n<=0?()=>It:ce((e,t)=>{let r=0;e.subscribe(le(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ff(n){return G(()=>n)}function Lf(n,e=wt){return n=n??yM,ce((t,r)=>{let i,o=!0;t.subscribe(le(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function yM(n,e){return n===e}function ku(n=vM){return ce((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function vM(){return new zn}function la(n){return ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Kt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ut((i,o)=>n(i,o,r)):wt,Gn(1),t?wr(e):ku(()=>new zn))}function vo(n){return n<=0?()=>It:ce((e,t)=>{let r=[];e.subscribe(le(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Vf(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ut((i,o)=>n(i,o,r)):wt,vo(1),t?wr(e):ku(()=>new zn))}function da(){return ce((n,e)=>{let t,r=!1;n.subscribe(le(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function di(n,e){return ce(xI(n,e,arguments.length>=2,!0))}function MI(n={}){let{connector:e=()=>new ze,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=u=void 0,h=p=!1},b=()=>{let R=s;v(),R?.unsubscribe()};return ce((R,N)=>{l++,!p&&!h&&m();let B=u=u??e();N.add(()=>{l--,l===0&&!p&&!h&&(a=jf(b,i))}),B.subscribe(N),!s&&l>0&&(s=new qn({next:q=>B.next(q),error:q=>{p=!0,m(),a=jf(v,t,q),B.error(q)},complete:()=>{h=!0,m(),a=jf(v,r),B.complete()}}),Fe(R).subscribe(s))})(o)}}function jf(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new qn({next:()=>{r.unsubscribe(),n()}});return Fe(e(...t)).subscribe(r)}function Ou(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,MI({connector:()=>new _u(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function hi(...n){let e=En(n);return ce((t,r)=>{(e?yo(n,t,e):yo(n,t)).subscribe(r)})}function $e(n,e){return ce((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(le(r,u=>{i?.unsubscribe();let l=0,h=o++;Fe(n(u,h)).subscribe(i=le(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Fu(n,e){return re(e)?$e(()=>n,e):$e(()=>n)}function Bf(n){return ce((e,t)=>{Fe(n).subscribe(le(t,()=>t.complete(),oa)),!t.closed&&e.subscribe(t)})}function nt(n,e,t){let r=re(n)||e||t?{next:n,error:e,complete:t}:n;return r?ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(le(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):wt}var pE="https://g.co/ng/security#xss",Y=class extends Error{constructor(e,t){super(Op(e,t)),this.code=e}};function Op(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ca(n){return{toString:n}.toString()}var Lu="__parameters__";function _M(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function gE(n,e,t){return Ca(()=>{let r=_M(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Lu)?u[Lu]:Object.defineProperty(u,Lu,{value:[]})[Lu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Qn=globalThis;function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function Ut(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Ut).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function RI(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var wM=Se({__forward_ref__:Se});function mE(n){return n.__forward_ref__=mE,n.toString=function(){return Ut(this())},n}function Yt(n){return yE(n)?n():n}function yE(n){return typeof n=="function"&&n.hasOwnProperty(wM)&&n.__forward_ref__===mE}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function gl(n){return NI(n,_E)||NI(n,wE)}function vE(n){return gl(n)!==null}function NI(n,e){return n.hasOwnProperty(e)?n[e]:null}function IM(n){let e=n&&(n[_E]||n[wE]);return e||null}function PI(n){return n&&(n.hasOwnProperty(kI)||n.hasOwnProperty(EM))?n[kI]:null}var _E=Se({\u0275prov:Se}),kI=Se({\u0275inj:Se}),wE=Se({ngInjectableDef:Se}),EM=Se({ngInjectorDef:Se}),W=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function IE(n){return n&&!!n.\u0275providers}var DM=Se({\u0275cmp:Se}),CM=Se({\u0275dir:Se}),TM=Se({\u0275pipe:Se}),bM=Se({\u0275mod:Se}),qu=Se({\u0275fac:Se}),fa=Se({__NG_ELEMENT_ID__:Se}),OI=Se({__NG_ENV_ID__:Se});function ga(n){return typeof n=="string"?n:n==null?"":String(n)}function SM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ga(n)}function AM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Y(-200,n)}function Fp(n,e){throw new Y(-201,!1)}var ue=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ue||{}),Qf;function EE(){return Qf}function Qt(n){let e=Qf;return Qf=n,e}function DE(n,e,t){let r=gl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ue.Optional)return null;if(e!==void 0)return e;Fp(n,"Injector")}var xM={},ma=xM,Yf="__NG_DI_FLAG__",zu="ngTempTokenPath",MM="ngTokenPath",RM=/\n/gm,NM="\u0275",FI="__source",Do;function PM(){return Do}function Ir(n){let e=Do;return Do=n,e}function kM(n,e=ue.Default){if(Do===void 0)throw new Y(-203,!1);return Do===null?DE(n,void 0,e):Do.get(n,e&ue.Optional?null:void 0,e)}function O(n,e=ue.Default){return(EE()||kM)(Yt(n),e)}function j(n,e=ue.Default){return O(n,ml(e))}function ml(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Zf(n){let e=[];for(let t=0;t<n.length;t++){let r=Yt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Y(900,!1);let i,o=ue.Default;for(let s=0;s<r.length;s++){let a=r[s],u=OM(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(O(i,o))}else e.push(O(r))}return e}function CE(n,e){return n[Yf]=e,n.prototype[Yf]=e,n}function OM(n){return n[Yf]}function FM(n,e,t,r){let i=n[zu];throw e[FI]&&i.unshift(e[FI]),n.message=LM(`
`+n.message,i,t,r),n[MM]=i,n[zu]=null,n}function LM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==NM?n.slice(2):n;let i=Ut(e);if(Array.isArray(e))i=e.map(Ut).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ut(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(RM,`
  `)}`}var _i=CE(gE("Optional"),8);var yl=CE(gE("SkipSelf"),4);function To(n,e){let t=n.hasOwnProperty(qu);return t?n[qu]:null}function Lp(n,e){n.forEach(t=>Array.isArray(t)?Lp(t,e):e(t))}function TE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Gu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var ya={},Dn=[],bo=new W(""),bE=new W("",-1),SE=new W(""),Wu=class{get(e,t=ma){if(t===ma){let r=new Error(`NullInjectorError: No provider for ${Ut(e)}!`);throw r.name="NullInjectorError",r}return t}},AE=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(AE||{}),Tn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Tn||{}),Tr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Tr||{});function VM(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Jf(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];BM(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function jM(n){return n===3||n===4||n===6}function BM(n){return n.charCodeAt(0)===64}function Vp(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?LI(n,t,i,null,e[++r]):LI(n,t,i,null,null))}}return n}function LI(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var xE="ng-template";function UM(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&VM(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(jp(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function jp(n){return n.type===4&&n.value!==xE}function $M(n,e,t){let r=n.type===4&&!t?xE:n.value;return e===r}function HM(n,e,t){let r=4,i=n.attrs,o=i!==null?GM(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!un(r)&&!un(u))return!1;if(s&&un(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!$M(n,u,t)||u===""&&e.length===1){if(un(r))return!1;s=!0}}else if(r&8){if(i===null||!UM(n,i,u,t)){if(un(r))return!1;s=!0}}else{let l=e[++a],h=qM(u,i,jp(n),t);if(h===-1){if(un(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(un(r))return!1;s=!0}}}}return un(r)||s}function un(n){return(n&1)===0}function qM(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return WM(e,n)}function zM(n,e,t=!1){for(let r=0;r<e.length;r++)if(HM(n,e[r],t))return!0;return!1}function GM(n){for(let e=0;e<n.length;e++){let t=n[e];if(jM(t))return e}return n.length}function WM(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function VI(n,e){return n?":not("+e.trim()+")":e}function KM(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!un(s)&&(e+=VI(o,i),i=""),r=s,o=o||!un(r);t++}return i!==""&&(e+=VI(o,i)),e}function QM(n){return n.map(KM).join(",")}function YM(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!un(i))break;i=o}r++}return{attrs:e,classes:t}}function ot(n){return Ca(()=>{let e=kE(n),t=xe(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===AE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Tn.Emulated,styles:n.styles||Dn,_:null,schemas:n.schemas||null,tView:null,id:""});OE(t);let r=n.dependencies;return t.directiveDefs=BI(r,!1),t.pipeDefs=BI(r,!0),t.id=XM(t),t})}function ZM(n){return br(n)||ME(n)}function JM(n){return n!==null}function bt(n){return Ca(()=>({type:n.type,bootstrap:n.bootstrap||Dn,declarations:n.declarations||Dn,imports:n.imports||Dn,exports:n.exports||Dn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function jI(n,e){if(n==null)return ya;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Tr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Tr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Ta(n){return Ca(()=>{let e=kE(n);return OE(e),e})}function br(n){return n[DM]||null}function ME(n){return n[CM]||null}function RE(n){return n[TM]||null}function NE(n){let e=br(n)||ME(n)||RE(n);return e!==null?e.standalone:!1}function PE(n,e){let t=n[bM]||null;if(!t&&e===!0)throw new Error(`Type ${Ut(n)} does not have '\u0275mod' property.`);return t}function kE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ya,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Dn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jI(n.inputs,e),outputs:jI(n.outputs),debugInfo:null}}function OE(n){n.features?.forEach(e=>e(n))}function BI(n,e){if(!n)return null;let t=e?RE:ZM;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(JM)}function XM(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function eR(...n){return{\u0275providers:FE(!0,n),\u0275fromNgModule:!0}}function FE(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Lp(e,s=>{let a=s;Xf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&LE(i,o),t}function LE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Bp(i,o=>{e(o,r)})}}function Xf(n,e,t,r){if(n=Yt(n),!n)return!1;let i=null,o=PI(n),s=!o&&br(n);if(!o&&!s){let u=n.ngModule;if(o=PI(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Xf(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Lp(o.imports,h=>{Xf(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&LE(l,e)}if(!a){let l=To(i)||(()=>new i);e({provide:i,useFactory:l,deps:Dn},i),e({provide:SE,useValue:i,multi:!0},i),e({provide:bo,useValue:()=>O(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Bp(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Bp(n,e){for(let t of n)IE(t)&&(t=t.\u0275providers),Array.isArray(t)?Bp(t,e):e(t)}var tR=Se({provide:String,useValue:Se});function VE(n){return n!==null&&typeof n=="object"&&tR in n}function nR(n){return!!(n&&n.useExisting)}function rR(n){return!!(n&&n.useFactory)}function ep(n){return typeof n=="function"}var vl=new W(""),Bu={},iR={},Uf;function Up(){return Uf===void 0&&(Uf=new Wu),Uf}var $t=class{},va=class extends $t{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,np(e,s=>this.processProvider(s)),this.records.set(bE,_o(void 0,this)),i.has("environment")&&this.records.set($t,_o(void 0,this));let o=this.records.get(vl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(SE,Dn,ue.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ce(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Ir(this),r=Qt(void 0),i;try{return e()}finally{Ir(t),Qt(r)}}get(e,t=ma,r=ue.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(OI))return e[OI](this);r=ml(r);let i,o=Ir(this),s=Qt(void 0);try{if(!(r&ue.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=lR(e)&&gl(e);l&&this.injectableDefInScope(l)?u=_o(tp(e),Bu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ue.Self?Up():this.parent;return t=r&ue.Optional&&t===ma?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[zu]=a[zu]||[]).unshift(Ut(e)),o)throw a;return FM(a,e,"R3InjectorError",this.source)}else throw a}finally{Qt(s),Ir(o)}}resolveInjectorInitializers(){let e=Ce(null),t=Ir(this),r=Qt(void 0),i;try{let o=this.get(bo,Dn,ue.Self);for(let s of o)s()}finally{Ir(t),Qt(r),Ce(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ut(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Y(205,!1)}processProvider(e){e=Yt(e);let t=ep(e)?e:Yt(e&&e.provide),r=sR(e);if(!ep(e)&&e.multi===!0){let i=this.records.get(t);i||(i=_o(void 0,Bu,!0),i.factory=()=>Zf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ce(null);try{return t.value===Bu&&(t.value=iR,t.value=t.factory()),typeof t.value=="object"&&t.value&&uR(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ce(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Yt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function tp(n){let e=gl(n),t=e!==null?e.factory:To(n);if(t!==null)return t;if(n instanceof W)throw new Y(204,!1);if(n instanceof Function)return oR(n);throw new Y(204,!1)}function oR(n){if(n.length>0)throw new Y(204,!1);let t=IM(n);return t!==null?()=>t.factory(n):()=>new n}function sR(n){if(VE(n))return _o(void 0,n.useValue);{let e=aR(n);return _o(e,Bu)}}function aR(n,e,t){let r;if(ep(n)){let i=Yt(n);return To(i)||tp(i)}else if(VE(n))r=()=>Yt(n.useValue);else if(rR(n))r=()=>n.useFactory(...Zf(n.deps||[]));else if(nR(n))r=()=>O(Yt(n.useExisting));else{let i=Yt(n&&(n.useClass||n.provide));if(cR(n))r=()=>new i(...Zf(n.deps));else return To(i)||tp(i)}return r}function _o(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function cR(n){return!!n.deps}function uR(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function lR(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function np(n,e){for(let t of n)Array.isArray(t)?np(t,e):t&&IE(t)?np(t.\u0275providers,e):e(t)}function An(n,e){n instanceof va&&n.assertNotDestroyed();let t,r=Ir(n),i=Qt(void 0);try{return e()}finally{Ir(r),Qt(i)}}function jE(){return EE()!==void 0||PM()!=null}function dR(n){if(!jE())throw new Y(-203,!1)}function hR(n){let e=Qn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function fR(n){return typeof n=="function"}var Yn=0,ge=1,ie=2,Dt=3,ln=4,dn=5,Ku=6,UI=7,Sr=8,So=9,bn=10,Ct=11,_a=12,$I=13,ba=14,Sn=15,Ao=16,wo=17,xo=18,_l=19,BE=20,Dr=21,$f=22,Zt=23,Ar=25,UE=1;var pi=7,Qu=8,Yu=9,Jt=10,Zu=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Zu||{});function Cr(n){return Array.isArray(n)&&typeof n[UE]=="object"}function Zn(n){return Array.isArray(n)&&n[UE]===!0}function $E(n){return(n.flags&4)!==0}function wl(n){return n.componentOffset>-1}function HE(n){return(n.flags&1)===1}function Sa(n){return!!n.template}function rp(n){return(n[ie]&512)!==0}var ip=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function qE(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Il(){return zE}function zE(n){return n.type.prototype.ngOnChanges&&(n.setInput=gR),pR}Il.ngInherit=!0;function pR(){let n=WE(this),e=n?.current;if(e){let t=n.previous;if(t===ya)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function gR(n,e,t,r,i){let o=this.declaredInputs[r],s=WE(n)||mR(n,{previous:ya,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new ip(l&&l.currentValue,t,u===ya),qE(n,e,i,t)}var GE="__ngSimpleChanges__";function WE(n){return n[GE]||null}function mR(n,e){return n[GE]=e}var HI=null;var Er=function(n,e,t){HI?.(n,e,t)},yR="svg",vR="math";function Wn(n){for(;Array.isArray(n);)n=n[Yn];return n}function _R(n,e){return Wn(e[n])}function xn(n,e){return Wn(e[n.index])}function KE(n,e){return n.data[e]}function wi(n,e){let t=e[n];return Cr(t)?t:t[Yn]}function $p(n){return(n[ie]&128)===128}function wR(n){return Zn(n[Dt])}function Ju(n,e){return e==null?null:n[e]}function QE(n){n[wo]=0}function YE(n){n[ie]&1024||(n[ie]|=1024,$p(n)&&Dl(n))}function El(n){return!!(n[ie]&9216||n[Zt]?.dirty)}function op(n){n[bn].changeDetectionScheduler?.notify(8),n[ie]&64&&(n[ie]|=1024),El(n)&&Dl(n)}function Dl(n){n[bn].changeDetectionScheduler?.notify(0);let e=gi(n);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!$p(e)));)e=gi(e)}function ZE(n,e){if((n[ie]&256)===256)throw new Y(911,!1);n[Dr]===null&&(n[Dr]=[]),n[Dr].push(e)}function IR(n,e){if(n[Dr]===null)return;let t=n[Dr].indexOf(e);t!==-1&&n[Dr].splice(t,1)}function gi(n){let e=n[Dt];return Zn(e)?e[Dt]:e}var _e={lFrame:cD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var JE=!1;function ER(){return _e.lFrame.elementDepthCount}function DR(){_e.lFrame.elementDepthCount++}function CR(){_e.lFrame.elementDepthCount--}function XE(){return _e.bindingsEnabled}function TR(){return _e.skipHydrationRootTNode!==null}function bR(n){return _e.skipHydrationRootTNode===n}function SR(){_e.skipHydrationRootTNode=null}function He(){return _e.lFrame.lView}function Ii(){return _e.lFrame.tView}function hn(){let n=eD();for(;n!==null&&n.type===64;)n=n.parent;return n}function eD(){return _e.lFrame.currentTNode}function AR(){let n=_e.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Aa(n,e){let t=_e.lFrame;t.currentTNode=n,t.isParent=e}function tD(){return _e.lFrame.isParent}function xR(){_e.lFrame.isParent=!1}function nD(){return JE}function qI(n){JE=n}function rD(){let n=_e.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function MR(){return _e.lFrame.bindingIndex}function RR(n){return _e.lFrame.bindingIndex=n}function iD(){return _e.lFrame.bindingIndex++}function NR(n){let e=_e.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function PR(){return _e.lFrame.inI18n}function kR(n,e){let t=_e.lFrame;t.bindingIndex=t.bindingRootIndex=n,sp(e)}function OR(){return _e.lFrame.currentDirectiveIndex}function sp(n){_e.lFrame.currentDirectiveIndex=n}function oD(n){_e.lFrame.currentQueryIndex=n}function FR(n){let e=n[ge];return e.type===2?e.declTNode:e.type===1?n[dn]:null}function sD(n,e,t){if(t&ue.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ue.Host);)if(i=FR(o),i===null||(o=o[ba],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=_e.lFrame=aD();return r.currentTNode=e,r.lView=n,!0}function Hp(n){let e=aD(),t=n[ge];_e.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function aD(){let n=_e.lFrame,e=n===null?null:n.child;return e===null?cD(n):e}function cD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function uD(){let n=_e.lFrame;return _e.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var lD=uD;function qp(){let n=uD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Cl(){return _e.lFrame.selectedIndex}function mi(n){_e.lFrame.selectedIndex=n}function dD(){let n=_e.lFrame;return KE(n.tView,n.selectedIndex)}function LR(){return _e.lFrame.currentNamespace}var hD=!0;function zp(){return hD}function Gp(n){hD=n}function VR(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=zE(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Wp(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Uu(n,e,t){fD(n,e,3,t)}function $u(n,e,t,r){(n[ie]&3)===t&&fD(n,e,t,r)}function Hf(n,e){let t=n[ie];(t&3)===e&&(t&=16383,t+=1,n[ie]=t)}function fD(n,e,t,r){let i=r!==void 0?n[wo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[wo]+=65536),(a<o||o==-1)&&(jR(n,t,e,u),n[wo]=(n[wo]&4294901760)+u+2),u++}function zI(n,e){Er(4,n,e);let t=Ce(null);try{e.call(n)}finally{Ce(t),Er(5,n,e)}}function jR(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ie]>>14<n[wo]>>16&&(n[ie]&3)===e&&(n[ie]+=16384,zI(a,o)):zI(a,o)}var Co=-1,wa=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function BR(n){return n instanceof wa}function UR(n){return(n.flags&8)!==0}function $R(n){return(n.flags&16)!==0}var qf={},ap=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=ml(r);let i=this.injector.get(e,qf,r);return i!==qf||t===qf?i:this.parentInjector.get(e,t,r)}};function pD(n){return n!==Co}function Xu(n){return n&32767}function HR(n){return n>>16}function el(n,e){let t=HR(n),r=e;for(;t>0;)r=r[ba],t--;return r}var cp=!0;function GI(n){let e=cp;return cp=n,e}var qR=256,gD=qR-1,mD=5,zR=0,Cn={};function GR(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(fa)&&(r=t[fa]),r==null&&(r=t[fa]=zR++);let i=r&gD,o=1<<i;e.data[n+(i>>mD)]|=o}function yD(n,e){let t=vD(n,e);if(t!==-1)return t;let r=e[ge];r.firstCreatePass&&(n.injectorIndex=e.length,zf(r.data,n),zf(e,null),zf(r.blueprint,null));let i=Kp(n,e),o=n.injectorIndex;if(pD(i)){let s=Xu(i),a=el(i,e),u=a[ge].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function zf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function vD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Kp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=DD(i),r===null)return Co;if(t++,i=i[ba],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Co}function WR(n,e,t){GR(n,e,t)}function _D(n,e,t){if(t&ue.Optional||n!==void 0)return n;Fp(e,"NodeInjector")}function wD(n,e,t,r){if(t&ue.Optional&&r===void 0&&(r=null),!(t&(ue.Self|ue.Host))){let i=n[So],o=Qt(void 0);try{return i?i.get(e,r,t&ue.Optional):DE(e,r,t&ue.Optional)}finally{Qt(o)}}return _D(r,e,t)}function ID(n,e,t,r=ue.Default,i){if(n!==null){if(e[ie]&2048&&!(r&ue.Self)){let s=JR(n,e,t,r,Cn);if(s!==Cn)return s}let o=ED(n,e,t,r,Cn);if(o!==Cn)return o}return wD(e,t,r,i)}function ED(n,e,t,r,i){let o=YR(t);if(typeof o=="function"){if(!sD(e,n,r))return r&ue.Host?_D(i,t,r):wD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ue.Optional))Fp(t);else return s}finally{lD()}}else if(typeof o=="number"){let s=null,a=vD(n,e),u=Co,l=r&ue.Host?e[Sn][dn]:null;for((a===-1||r&ue.SkipSelf)&&(u=a===-1?Kp(n,e):e[a+8],u===Co||!KI(r,!1)?a=-1:(s=e[ge],a=Xu(u),e=el(u,e)));a!==-1;){let h=e[ge];if(WI(o,a,h.data)){let p=KR(a,e,t,s,r,l);if(p!==Cn)return p}u=e[a+8],u!==Co&&KI(r,e[ge].data[a+8]===l)&&WI(o,a,e)?(s=h,a=Xu(u),e=el(u,e)):a=-1}}return i}function KR(n,e,t,r,i,o){let s=e[ge],a=s.data[n+8],u=r==null?wl(a)&&cp:r!=s&&(a.type&3)!==0,l=i&ue.Host&&o===a,h=QR(a,s,t,u,l);return h!==null?Ia(e,s,h,a):Cn}function QR(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let b=s[v];if(v<u&&t===b||v>=u&&b.type===t)return v}if(i){let v=s[u];if(v&&Sa(v)&&v.type===t)return u}return null}function Ia(n,e,t,r){let i=n[t],o=e.data;if(BR(i)){let s=i;s.resolving&&AM(SM(o[t]));let a=GI(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Qt(s.injectImpl):null,h=sD(n,r,ue.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&VR(t,o[t],e)}finally{l!==null&&Qt(l),GI(a),s.resolving=!1,lD()}}return i}function YR(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(fa)?n[fa]:void 0;return typeof e=="number"?e>=0?e&gD:ZR:e}function WI(n,e,t){let r=1<<n;return!!(t[e+(n>>mD)]&r)}function KI(n,e){return!(n&ue.Self)&&!(n&ue.Host&&e)}var fi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ID(this._tNode,this._lView,e,ml(r),t)}};function ZR(){return new fi(hn(),He())}function Qp(n){return Ca(()=>{let e=n.prototype.constructor,t=e[qu]||up(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[qu]||up(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function up(n){return yE(n)?()=>{let e=up(Yt(n));return e&&e()}:To(n)}function JR(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ie]&2048&&!(s[ie]&512);){let a=ED(o,s,t,r|ue.Self,Cn);if(a!==Cn)return a;let u=o.parent;if(!u){let l=s[BE];if(l){let h=l.get(t,Cn,r);if(h!==Cn)return h}u=DD(s),s=s[ba]}o=u}return i}function DD(n){let e=n[ge],t=e.type;return t===2?e.declTNode:t===1?n[dn]:null}function QI(n,e=null,t=null,r){let i=CD(n,e,t,r);return i.resolveInjectorInitializers(),i}function CD(n,e=null,t=null,r,i=new Set){let o=[t||Dn,eR(n)];return r=r||(typeof n=="object"?void 0:Ut(n)),new va(o,e||Up(),r||null,i)}var Xt=class n{static{this.THROW_IF_NOT_FOUND=ma}static{this.NULL=new Wu}static create(e,t){if(Array.isArray(e))return QI({name:""},t,e,"");{let r=e.name??"";return QI({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:n,providedIn:"any",factory:()=>O(bE)})}static{this.__NG_ELEMENT_ID__=-1}};var XR=new W("");XR.__NG_ELEMENT_ID__=n=>{let e=hn();if(e===null)throw new Y(204,!1);if(e.type&2)return e.value;if(n&ue.Optional)return null;throw new Y(204,!1)};var eN="ngOriginalError";function Gf(n){return n[eN]}var TD=!0,Yp=(()=>{class n{static{this.__NG_ELEMENT_ID__=tN}static{this.__NG_ENV_ID__=t=>t}}return n})(),lp=class extends Yp{constructor(e){super(),this._lView=e}onDestroy(e){return ZE(this._lView,e),()=>IR(this._lView,e)}};function tN(){return new lp(He())}var ko=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ct(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})();var dp=class extends ze{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,jE()&&(this.destroyRef=j(Yp,{optional:!0})??void 0,this.pendingTasks=j(ko,{optional:!0})??void 0)}emit(e){let t=Ce(null);try{super.next(e)}finally{Ce(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ue&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Et=dp;function tl(...n){}function bD(n){let e,t;function r(){n=tl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function YI(n){return queueMicrotask(()=>n()),()=>{n=tl}}var Zp="isAngularZone",nl=Zp+"_ID",nN=0,me=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Et(!1),this.onMicrotaskEmpty=new Et(!1),this.onStable=new Et(!1),this.onError=new Et(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=TD}=e;if(typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,oN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Zp)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Y(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,rN,tl,tl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},rN={};function Jp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function iN(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){bD(()=>{n.callbackScheduled=!1,hp(n),n.isCheckStableRunning=!0,Jp(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),hp(n)}function oN(n){let e=()=>{iN(n)},t=nN++;n._inner=n._inner.fork({name:"angular",properties:{[Zp]:!0,[nl]:t,[nl+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(sN(u))return r.invokeTask(o,s,a,u);try{return ZI(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),JI(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return ZI(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!aN(u)&&e(),JI(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,hp(n),Jp(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function hp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function ZI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function JI(n){n._nesting--,Jp(n)}var rl=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Et,this.onMicrotaskEmpty=new Et,this.onStable=new Et,this.onError=new Et}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function sN(n){return SD(n,"__ignore_ng_zone__")}function aN(n){return SD(n,"__scheduler_tick__")}function SD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function cN(n="zone.js",e){return n==="noop"?new rl:n==="zone.js"?new me(e):n}var Kn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Gf(e);for(;t&&Gf(t);)t=Gf(t);return t||null}},uN=new W("",{providedIn:"root",factory:()=>{let n=j(me),e=j(Kn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function lN(){return Tl(hn(),He())}function Tl(n,e){return new xa(xn(n,e))}var xa=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=lN}}return n})();function AD(n){return(n.flags&128)===128}var xD=new Map,dN=0;function hN(){return dN++}function fN(n){xD.set(n[_l],n)}function fp(n){xD.delete(n[_l])}var XI="__ngContext__";function yi(n,e){Cr(e)?(n[XI]=e[_l],fN(e)):n[XI]=e}function MD(n){return ND(n[_a])}function RD(n){return ND(n[ln])}function ND(n){for(;n!==null&&!Zn(n);)n=n[ln];return n}var pp;function PD(n){pp=n}function pN(){if(pp!==void 0)return pp;if(typeof document<"u")return document;throw new Y(210,!1)}var bl=new W("",{providedIn:"root",factory:()=>gN}),gN="ng",Xp=new W(""),Pt=new W("",{providedIn:"platform",factory:()=>"unknown"});var eg=new W("",{providedIn:"root",factory:()=>pN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var mN="h",yN="b";var vN=()=>null;function tg(n,e,t=!1){return vN(n,e,t)}var kD=!1,_N=new W("",{providedIn:"root",factory:()=>kD});var il=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pE})`}};function ng(n){return n instanceof il?n.changingThisBreaksApplicationSecurity:n}function OD(n,e){let t=wN(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${pE})`)}return t===e}function wN(n){return n instanceof il&&n.getTypeName()||null}var IN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function FD(n){return n=String(n),n.match(IN)?n:"unsafe:"+n}var rg=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(rg||{});function LD(n){let e=EN();return e?e.sanitize(rg.URL,n)||"":OD(n,"URL")?ng(n):FD(ga(n))}function EN(){let n=He();return n&&n[bn].sanitizer}function VD(n){return n instanceof Function?n():n}function DN(n){return(n??j(Xt)).get(Pt)==="browser"}var Rr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Rr||{}),CN;function ig(n,e){return CN(n,e)}function Io(n,e,t,r,i){if(r!=null){let o,s=!1;Zn(r)?o=r:Cr(r)&&(s=!0,r=r[Yn]);let a=Wn(r);n===0&&t!==null?i==null?HD(e,t,a):ol(e,t,a,i||null,!0):n===1&&t!==null?ol(e,t,a,i||null,!0):n===2?jN(e,a,s):n===3&&e.destroyNode(a),o!=null&&UN(e,n,o,t,i)}}function TN(n,e){return n.createText(e)}function bN(n,e,t){n.setValue(e,t)}function jD(n,e,t){return n.createElement(e,t)}function SN(n,e){BD(n,e),e[Yn]=null,e[dn]=null}function AN(n,e,t,r,i,o){r[Yn]=i,r[dn]=e,Sl(n,r,t,1,i,o)}function BD(n,e){e[bn].changeDetectionScheduler?.notify(9),Sl(n,e,e[Ct],2,null,null)}function xN(n){let e=n[_a];if(!e)return Wf(n[ge],n);for(;e;){let t=null;if(Cr(e))t=e[_a];else{let r=e[Jt];r&&(t=r)}if(!t){for(;e&&!e[ln]&&e!==n;)Cr(e)&&Wf(e[ge],e),e=e[Dt];e===null&&(e=n),Cr(e)&&Wf(e[ge],e),t=e&&e[ln]}e=t}}function MN(n,e,t,r){let i=Jt+r,o=t.length;r>0&&(t[i-1][ln]=e),r<o-Jt?(e[ln]=t[i],TE(t,Jt+r,e)):(t.push(e),e[ln]=null),e[Dt]=t;let s=e[Ao];s!==null&&t!==s&&UD(s,e);let a=e[xo];a!==null&&a.insertView(n),op(e),e[ie]|=128}function UD(n,e){let t=n[Yu],r=e[Dt];if(Cr(r))n[ie]|=Zu.HasTransplantedViews;else{let i=r[Dt][Sn];e[Sn]!==i&&(n[ie]|=Zu.HasTransplantedViews)}t===null?n[Yu]=[e]:t.push(e)}function og(n,e){let t=n[Yu],r=t.indexOf(e);t.splice(r,1)}function gp(n,e){if(n.length<=Jt)return;let t=Jt+e,r=n[t];if(r){let i=r[Ao];i!==null&&i!==n&&og(i,r),e>0&&(n[t-1][ln]=r[ln]);let o=Gu(n,Jt+e);SN(r[ge],r);let s=o[xo];s!==null&&s.detachView(o[ge]),r[Dt]=null,r[ln]=null,r[ie]&=-129}return r}function $D(n,e){if(!(e[ie]&256)){let t=e[Ct];t.destroyNode&&Sl(n,e,t,3,null,null),xN(e)}}function Wf(n,e){if(e[ie]&256)return;let t=Ce(null);try{e[ie]&=-129,e[ie]|=256,e[Zt]&&_f(e[Zt]),NN(n,e),RN(n,e),e[ge].type===1&&e[Ct].destroy();let r=e[Ao];if(r!==null&&Zn(e[Dt])){r!==e[Dt]&&og(r,e);let i=e[xo];i!==null&&i.detachView(n)}fp(e)}finally{Ce(t)}}function RN(n,e){let t=n.cleanup,r=e[UI];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[UI]=null);let i=e[Dr];if(i!==null){e[Dr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function NN(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof wa)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Er(4,a,u);try{u.call(a)}finally{Er(5,a,u)}}else{Er(4,i,o);try{o.call(i)}finally{Er(5,i,o)}}}}}function PN(n,e,t){return kN(n,e.parent,t)}function kN(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Yn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Tn.None||o===Tn.Emulated)return null}return xn(r,t)}}function ol(n,e,t,r,i){n.insertBefore(e,t,r,i)}function HD(n,e,t){n.appendChild(e,t)}function eE(n,e,t,r,i){r!==null?ol(n,e,t,r,i):HD(n,e,t)}function qD(n,e){return n.parentNode(e)}function ON(n,e){return n.nextSibling(e)}function FN(n,e,t){return VN(n,e,t)}function LN(n,e,t){return n.type&40?xn(n,t):null}var VN=LN,tE;function sg(n,e,t,r){let i=PN(n,r,e),o=e[Ct],s=r.parent||e[dn],a=FN(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)eE(o,i,t[u],a,!1);else eE(o,i,t,a,!1);tE!==void 0&&tE(o,r,e,t,i)}function ha(n,e){if(e!==null){let t=e.type;if(t&3)return xn(e,n);if(t&4)return mp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ha(n,r);{let i=n[e.index];return Zn(i)?mp(-1,i):Wn(i)}}else{if(t&128)return ha(n,e.next);if(t&32)return ig(e,n)()||Wn(n[e.index]);{let r=zD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=gi(n[Sn]);return ha(i,r)}else return ha(n,e.next)}}}return null}function zD(n,e){if(e!==null){let r=n[Sn][dn],i=e.projection;return r.projection[i]}return null}function mp(n,e){let t=Jt+n+1;if(t<e.length){let r=e[t],i=r[ge].firstChild;if(i!==null)return ha(r,i)}return e[pi]}function jN(n,e,t){n.removeChild(null,e,t)}function ag(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&yi(Wn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)ag(n,e,t.child,r,i,o,!1),Io(e,n,i,a,o);else if(u&32){let l=ig(t,r),h;for(;h=l();)Io(e,n,i,h,o);Io(e,n,i,a,o)}else u&16?BN(n,e,r,t,i,o):Io(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Sl(n,e,t,r,i,o){ag(t,r,n.firstChild,e,i,o,!1)}function BN(n,e,t,r,i,o){let s=t[Sn],u=s[dn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Io(e,n,i,h,o)}else{let l=u,h=s[Dt];AD(r)&&(l.flags|=128),ag(n,e,l,h,i,o,!0)}}function UN(n,e,t,r,i){let o=t[pi],s=Wn(t);o!==s&&Io(e,n,r,o,i);for(let a=Jt;a<t.length;a++){let u=t[a];Sl(u[ge],u,n,e,r,o)}}function $N(n,e,t){n.setAttribute(e,"style",t)}function GD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function WD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Jf(n,e,r),i!==null&&GD(n,e,i),o!==null&&$N(n,e,o)}var Jn={};function he(n=1){KD(Ii(),He(),Cl()+n,!1)}function KD(n,e,t,r){if(!r)if((e[ie]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Uu(e,o,t)}else{let o=n.preOrderHooks;o!==null&&$u(e,o,0,t)}mi(t)}function Le(n,e=ue.Default){let t=He();if(t===null)return O(n,e);let r=hn();return ID(r,t,Yt(n),e)}function QD(){let n="invalid";throw new Error(n)}function YD(n,e,t,r,i,o){let s=Ce(null);try{let a=null;i&Tr.SignalBased&&(a=e[r][nI]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Tr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):qE(e,a,r,o)}finally{Ce(s)}}function HN(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)mi(~i);else{let o=i,s=t[++r],a=t[++r];kR(s,o);let u=e[o];a(2,u)}}}finally{mi(-1)}}function Al(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Yn]=i,p[ie]=r|4|128|8|64,(l!==null||n&&n[ie]&2048)&&(p[ie]|=2048),QE(p),p[Dt]=p[ba]=n,p[Sr]=t,p[bn]=s||n&&n[bn],p[Ct]=a||n&&n[Ct],p[So]=u||n&&n[So]||null,p[dn]=o,p[_l]=hN(),p[Ku]=h,p[BE]=l,p[Sn]=e.type==2?n[Sn]:p,p}function xl(n,e,t,r,i){let o=n.data[e];if(o===null)o=qN(n,e,t,r,i),PR()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=AR();o.injectorIndex=s===null?-1:s.injectorIndex}return Aa(o,!0),o}function qN(n,e,t,r,i){let o=eD(),s=tD(),a=s?o:o&&o.parent,u=n.data[e]=QN(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function ZD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function JD(n,e,t,r,i){let o=Cl(),s=r&2;try{mi(-1),s&&e.length>Ar&&KD(n,e,Ar,!1),Er(s?2:0,i),t(r,i)}finally{mi(o),Er(s?3:1,i)}}function XD(n,e,t){if($E(e)){let r=Ce(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{Ce(r)}}}function e0(n,e,t){XE()&&(tP(n,e,t,xn(t,e)),(t.flags&64)===64&&s0(n,e,t))}function t0(n,e,t=xn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function n0(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=cg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function cg(n,e,t,r,i,o,s,a,u,l,h){let p=Ar+r,m=p+i,v=zN(p,m),b=typeof l=="function"?l():l;return v[ge]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function zN(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Jn);return t}function GN(n,e,t,r){let o=r.get(_N,kD)||t===Tn.ShadowDom,s=n.selectRootElement(e,o);return WN(s),s}function WN(n){KN(n)}var KN=()=>null;function QN(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return TR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function nE(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Tr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?rE(r,t,l,a,u):rE(r,t,l,a)}return r}function rE(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function YN(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,v=m?m.inputs:null,b=m?m.outputs:null;u=nE(0,p.inputs,h,u,v),l=nE(1,p.outputs,h,l,b);let R=u!==null&&s!==null&&!jp(e)?lP(u,h,s):null;a.push(R)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function ZN(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function r0(n,e,t,r,i,o,s,a){let u=xn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(ug(n,t,h,r,i),wl(e)&&JN(t,e.index)):e.type&3?(r=ZN(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function JN(n,e){let t=wi(e,n);t[ie]&16||(t[ie]|=64)}function i0(n,e,t,r){if(XE()){let i=r===null?null:{"":-1},o=rP(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&o0(n,e,t,s,i,a),i&&iP(t,r,i)}t.mergedAttrs=Vp(t.mergedAttrs,t.attrs)}function o0(n,e,t,r,i,o){for(let l=0;l<r.length;l++)WR(yD(t,e),n,r[l].type);sP(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=ZD(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Vp(t.mergedAttrs,h.hostAttrs),aP(n,t,e,u,h),oP(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}YN(n,t,o)}function XN(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;eP(s)!=a&&s.push(a),s.push(t,r,o)}}function eP(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function tP(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;wl(t)&&cP(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||yD(t,e),yi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Ia(e,n,a,t);if(yi(l,e),s!==null&&uP(e,a-i,l,u,t,s),Sa(u)){let h=wi(t.index,e);h[Sr]=Ia(e,n,a,t)}}}function s0(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=OR();try{mi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];sp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&nP(u,l)}}finally{mi(-1),sp(s)}}function nP(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function rP(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(zM(e,s.selectors,!1))if(r||(r=[]),Sa(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;yp(n,e,u)}else r.unshift(s),yp(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function yp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function iP(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Y(-301,!1);r.push(e[i],o)}}}function oP(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Sa(e)&&(t[""]=n)}}function sP(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function aP(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=To(i.type,!0)),s=new wa(o,Sa(i),Le);n.blueprint[r]=s,t[r]=s,XN(n,e,r,ZD(n,t,i.hostVars,Jn),i)}function cP(n,e,t){let r=xn(e,n),i=n0(t),o=n[bn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Ml(n,Al(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function uP(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];YD(r,t,u,l,h,p)}}function lP(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function a0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function c0(n,e){let t=n.contentQueries;if(t!==null){let r=Ce(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];oD(o),a.contentQueries(2,e[s],s)}}}finally{Ce(r)}}}function Ml(n,e){return n[_a]?n[$I][ln]=e:n[_a]=e,n[$I]=e,e}function vp(n,e,t){oD(0);let r=Ce(null);try{e(n,t)}finally{Ce(r)}}function dP(n,e){let t=n[So],r=t?t.get(Kn,null):null;r&&r.handleError(e)}function ug(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];YD(h,l,r,a,u,i)}}function u0(n,e,t){let r=_R(e,n);bN(n[Ct],r,t)}function hP(n,e){let t=wi(e,n),r=t[ge];fP(r,t);let i=t[Yn];i!==null&&t[Ku]===null&&(t[Ku]=tg(i,t[So])),lg(r,t,t[Sr])}function fP(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function lg(n,e,t){Hp(e);try{let r=n.viewQuery;r!==null&&vp(1,r,t);let i=n.template;i!==null&&JD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[xo]?.finishViewCreation(n),n.staticContentQueries&&c0(n,e),n.staticViewQueries&&vp(2,n.viewQuery,t);let o=n.components;o!==null&&pP(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ie]&=-5,qp()}}function pP(n,e){for(let t=0;t<e.length;t++)hP(n,e[t])}function gP(n,e,t,r){let i=Ce(null);try{let o=e.tView,a=n[ie]&4096?4096:16,u=Al(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Ao]=l;let h=n[xo];return h!==null&&(u[xo]=h.createEmbeddedView(o)),lg(o,u,t),u}finally{Ce(i)}}function iE(n,e){return!e||e.firstChild===null||AD(n)}function mP(n,e,t,r=!0){let i=e[ge];if(MN(i,e,n,t),r){let s=mp(t,n),a=e[Ct],u=qD(a,n[pi]);u!==null&&AN(i,n[dn],a,e,u,s)}let o=e[Ku];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function sl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Wn(o)),Zn(o)&&yP(o,r);let s=t.type;if(s&8)sl(n,e,t.child,r);else if(s&32){let a=ig(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=zD(e,t);if(Array.isArray(a))r.push(...a);else{let u=gi(e[Sn]);sl(u[ge],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function yP(n,e){for(let t=Jt;t<n.length;t++){let r=n[t],i=r[ge].firstChild;i!==null&&sl(r[ge],r,i,e)}n[pi]!==n[Yn]&&e.push(n[pi])}var l0=[];function vP(n){return n[Zt]??_P(n)}function _P(n){let e=l0.pop()??Object.create(IP);return e.lView=n,e}function wP(n){n.lView[Zt]!==n&&(n.lView=null,l0.push(n))}var IP=xe(V({},mf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Dl(n.lView)},consumerOnSignalRead(){this.lView[Zt]=this}});function EP(n){let e=n[Zt]??Object.create(DP);return e.lView=n,e}var DP=xe(V({},mf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=gi(n.lView);for(;e&&!d0(e[ge]);)e=gi(e);e&&YE(e)},consumerOnSignalRead(){this.lView[Zt]=this}});function d0(n){return n.type!==2}var CP=100;function h0(n,e=!0,t=0){let r=n[bn],i=r.rendererFactory,o=!1;o||i.begin?.();try{TP(n,t)}catch(s){throw e&&dP(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function TP(n,e){let t=nD();try{qI(!0),_p(n,e);let r=0;for(;El(n);){if(r===CP)throw new Y(103,!1);r++,_p(n,1)}}finally{qI(t)}}function bP(n,e,t,r){let i=e[ie];if((i&256)===256)return;let o=!1,s=!1;!o&&e[bn].inlineEffectRunner?.flush(),Hp(e);let a=!0,u=null,l=null;o||(d0(n)?(l=vP(e),u=yf(l)):rI()===null?(a=!1,l=EP(e),u=yf(l)):e[Zt]&&(_f(e[Zt]),e[Zt]=null));try{QE(e),RR(n.bindingStartIndex),t!==null&&JD(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&Uu(e,v,null)}else{let v=n.preOrderHooks;v!==null&&$u(e,v,0,null),Hf(e,0)}if(s||SP(e),f0(e,0),n.contentQueries!==null&&c0(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&Uu(e,v)}else{let v=n.contentHooks;v!==null&&$u(e,v,1),Hf(e,1)}HN(n,e);let p=n.components;p!==null&&g0(e,p,0);let m=n.viewQuery;if(m!==null&&vp(2,m,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&Uu(e,v)}else{let v=n.viewHooks;v!==null&&$u(e,v,2),Hf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[$f]){for(let v of e[$f])v();e[$f]=null}o||(e[ie]&=-73)}catch(h){throw o||Dl(e),h}finally{l!==null&&(iI(l,u),a&&wP(l)),qp()}}function f0(n,e){for(let t=MD(n);t!==null;t=RD(t))for(let r=Jt;r<t.length;r++){let i=t[r];p0(i,e)}}function SP(n){for(let e=MD(n);e!==null;e=RD(e)){if(!(e[ie]&Zu.HasTransplantedViews))continue;let t=e[Yu];for(let r=0;r<t.length;r++){let i=t[r];YE(i)}}}function AP(n,e,t){let r=wi(e,n);p0(r,t)}function p0(n,e){$p(n)&&_p(n,e)}function _p(n,e){let r=n[ge],i=n[ie],o=n[Zt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&vf(o)),s||=!1,o&&(o.dirty=!1),n[ie]&=-9217,s)bP(r,n,r.template,n[Sr]);else if(i&8192){f0(n,1);let a=r.components;a!==null&&g0(n,a,1)}}function g0(n,e,t){for(let r=0;r<e.length;r++)AP(n,e[r],t)}function m0(n,e){let t=nD()?64:1088;for(n[bn].changeDetectionScheduler?.notify(e);n;){n[ie]|=t;let r=gi(n);if(rp(n)&&!r)return n;n=r}return null}var vi=class{get rootNodes(){let e=this._lView,t=e[ge];return sl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Sr]}set context(e){this._lView[Sr]=e}get destroyed(){return(this._lView[ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Dt];if(Zn(e)){let t=e[Qu],r=t?t.indexOf(this):-1;r>-1&&(gp(e,r),Gu(t,r))}this._attachedToViewContainer=!1}$D(this._lView[ge],this._lView)}onDestroy(e){ZE(this._lView,e)}markForCheck(){m0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ie]&=-129}reattach(){op(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,h0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=rp(this._lView),t=this._lView[Ao];t!==null&&!e&&og(t,this._lView),BD(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=e;let t=rp(this._lView),r=this._lView[Ao];r!==null&&!t&&UD(r,this._lView),op(this._lView)}},dg=(()=>{class n{static{this.__NG_ELEMENT_ID__=RP}}return n})(),xP=dg,MP=class extends xP{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=gP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new vi(i)}};function RP(){return NP(hn(),He())}function NP(n,e){return n.type&4?new MP(e,n,Tl(n,e)):null}var Bq=new RegExp(`^(\\d+)*(${yN}|${mN})*(.*)`);var PP=()=>null;function oE(n,e){return PP(n,e)}var Mo=class{},hg=new W("",{providedIn:"root",factory:()=>!1});var y0=new W(""),v0=new W(""),wp=class{},al=class{};function kP(n){let e=Error(`No component factory found for ${Ut(n)}.`);return e[OP]=n,e}var OP="ngComponent";var Ip=class{resolveComponentFactory(e){throw kP(e)}},Ro=class{static{this.NULL=new Ip}},No=class{},Rl=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>FP()}}return n})();function FP(){let n=He(),e=hn(),t=wi(e.index,n);return(Cr(t)?t:n)[Ct]}var LP=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>null})}}return n})();function Ep(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=RI(i,a);else if(o==2){let u=a,l=e[++s];r=RI(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var cl=class extends Ro{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=br(e);return new Po(t,this.ngModule)}};function sE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Tr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Tr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function VP(n){let e=n.toLowerCase();return e==="svg"?yR:e==="math"?vR:null}var Po=class extends al{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=sE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return sE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=QM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ce(null);try{i=i||this.ngModule;let s=i instanceof $t?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new ap(e,s):e,u=a.get(No,null);if(u===null)throw new Y(407,!1);let l=a.get(LP,null),h=a.get(Mo,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=r?GN(m,r,this.componentDef.encapsulation,a):jD(m,v,VP(v)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let N=null;b!==null&&(N=tg(b,a,!0));let B=cg(0,null,null,1,0,null,null,null,null,null,null),q=Al(null,B,null,R,null,null,p,m,a,null,N);Hp(q);let F,J,te=null;try{let X=this.componentDef,I,y=null;X.findHostDirectiveDefs?(I=[],y=new Map,X.findHostDirectiveDefs(X,I,y),I.push(X)):I=[X];let w=jP(q,b);te=BP(w,b,X,I,q,p,m),J=KE(B,Ar),b&&HP(m,X,b,r),t!==void 0&&qP(J,this.ngContentSelectors,t),F=$P(te,X,I,y,q,[zP]),lg(B,q,null)}catch(X){throw te!==null&&fp(te),fp(q),X}finally{qp()}return new Dp(this.componentType,F,Tl(J,q),q,J)}finally{Ce(o)}}},Dp=class extends wp{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new vi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;ug(o[ge],o,i,e,t),this.previousInputValues.set(e,t);let s=wi(this._tNode.index,o);m0(s,1)}}get injector(){return new fi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function jP(n,e){let t=n[ge],r=Ar;return n[r]=e,xl(t,r,2,"#host",null)}function BP(n,e,t,r,i,o,s){let a=i[ge];UP(r,n,e,s);let u=null;e!==null&&(u=tg(e,i[So]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Al(i,n0(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&yp(a,n,r.length-1),Ml(i,p),i[n.index]=p}function UP(n,e,t,r){for(let i of n)e.mergedAttrs=Vp(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Ep(e,e.mergedAttrs,!0),t!==null&&WD(r,t,e))}function $P(n,e,t,r,i,o){let s=hn(),a=i[ge],u=xn(s,i);o0(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=Ia(i,a,p,s);yi(m,i)}s0(a,i,s),u&&yi(u,i);let l=Ia(i,a,s.directiveStart+s.componentOffset,s);if(n[Sr]=i[Sr]=l,o!==null)for(let h of o)h(l,e);return XD(a,s,i),l}function HP(n,e,t,r){if(r)Jf(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=YM(e.selectors[0]);i&&Jf(n,t,i),o&&o.length>0&&GD(n,t,o.join(" "))}}function qP(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function zP(){let n=hn();Wp(He()[ge],n)}var Ma=(()=>{class n{static{this.__NG_ELEMENT_ID__=GP}}return n})();function GP(){let n=hn();return KP(n,He())}var WP=Ma,_0=class extends WP{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Tl(this._hostTNode,this._hostLView)}get injector(){return new fi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Kp(this._hostTNode,this._hostLView);if(pD(e)){let t=el(e,this._hostLView),r=Xu(e),i=t[ge].data[r+8];return new fi(i,t)}else return new fi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=aE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Jt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=oE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,iE(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!fR(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let u=s?e:new Po(br(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let R=(s?l:this.parentInjector).get($t,null);R&&(o=R)}let h=br(u.componentType??{}),p=oE(this._lContainer,h?.id??null),m=p?.firstChild??null,v=u.create(l,i,m,o);return this.insertImpl(v.hostView,a,iE(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(wR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Dt],l=new _0(u,u[dn],u[Dt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return mP(s,i,o,r),e.attachToViewContainerRef(),TE(Kf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=aE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=gp(this._lContainer,t);r&&(Gu(Kf(this._lContainer),t),$D(r[ge],r))}detach(e){let t=this._adjustIndex(e,-1),r=gp(this._lContainer,t);return r&&Gu(Kf(this._lContainer),t)!=null?new vi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function aE(n){return n[Qu]}function Kf(n){return n[Qu]||(n[Qu]=[])}function KP(n,e){let t,r=e[n.index];return Zn(r)?t=r:(t=a0(r,e,null,n),e[n.index]=t,Ml(e,t)),YP(t,e,n,r),new _0(t,n,e)}function QP(n,e){let t=n[Ct],r=t.createComment(""),i=xn(e,n),o=qD(t,i);return ol(t,o,r,ON(t,i),!1),r}var YP=XP,ZP=()=>!1;function JP(n,e,t){return ZP(n,e,t)}function XP(n,e,t,r){if(n[pi])return;let i;t.type&8?i=Wn(r):i=QP(e,t),n[pi]=i}var cE=new Set;function fg(n){cE.has(n)||(cE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function e1(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(i1))}return o}return ul.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(v=>{a[l+m]=v,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>o1(o));e.push(u)}),n1(),Promise.all(e).then(()=>{})}var ul=new Map,t1=new Set;function n1(){let n=ul;return ul=new Map,n}function r1(){return ul.size===0}function i1(n){return typeof n=="string"?n:n.text()}function o1(n){t1.delete(n)}var xr=class{},Ea=class{};var ll=class extends xr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cl(this);let o=PE(e);this._bootstrapComponents=VD(o.bootstrap),this._r3Injector=CD(e,t,[{provide:xr,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver},...r],Ut(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},dl=class extends Ea{constructor(e){super(),this.moduleType=e}create(e){return new ll(this.moduleType,e,[])}};function s1(n,e,t){return new ll(n,e,t,!1)}var Cp=class extends xr{constructor(e){super(),this.componentFactoryResolver=new cl(this),this.instance=null;let t=new va([...e.providers,{provide:xr,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver}],e.parent||Up(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Nl(n,e,t=null){return new Cp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function w0(n){return pg(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function a1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function pg(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function I0(n,e,t){return n[e]=t}function c1(n,e){return n[e]}function Da(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function u1(n,e,t,r){let i=Da(n,e,t);return Da(n,e+1,r)||i}function l1(n){return(n.flags&32)===32}function d1(n,e,t,r,i,o,s,a,u){let l=e.consts,h=xl(e,n,4,s||null,a||null);i0(e,t,h,Ju(l,u)),Wp(e,h);let p=h.tView=cg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function h1(n,e,t,r,i,o,s,a,u,l){let h=t+Ar,p=e.firstCreatePass?d1(h,e,n,r,i,o,s,a,u):e.data[h];Aa(p,!1);let m=f1(e,n,p,t);zp()&&sg(e,n,m,p),yi(m,n);let v=a0(m,n,m,p);return n[h]=v,Ml(n,v),JP(v,p,n),HE(p)&&e0(e,n,p),u!=null&&t0(n,p,l),p}function kt(n,e,t,r,i,o,s,a){let u=He(),l=Ii(),h=Ju(l.consts,o);return h1(u,l,n,e,t,r,i,h,s,a),kt}var f1=p1;function p1(n,e,t,r){return Gp(!0),e[Ct].createComment("")}var Eo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Eo||{}),E0=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Tp=class n{constructor(){this.ngZone=j(me),this.scheduler=j(Mo),this.errorHandler=j(Kn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Eo.EarlyRead,Eo.Write,Eo.MixedReadWrite,Eo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}},bp=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function gg(n,e){!e?.injector&&dR(gg);let t=e?.injector??j(Xt);return DN(t)?(fg("NgAfterNextRender"),m1(n,t,e,!0)):y1}function g1(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function m1(n,e,t,r){let i=e.get(E0);i.impl??=e.get(Tp);let o=t?.phase??Eo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Yp):null,a=new bp(i.impl,g1(n,o),r,s);return i.impl.register(a),a}var y1={destroy(){}};function D0(n,e,t,r){return Da(n,iD(),t)?e+ga(t)+r:Jn}function v1(n,e,t,r,i,o){let s=MR(),a=u1(n,s,t,i);return NR(2),a?e+ga(t)+r+ga(i)+o:Jn}function St(n,e,t){let r=He(),i=iD();if(Da(r,i,e)){let o=Ii(),s=dD();r0(o,s,r,n,e,r[Ct],t,!1)}return St}function uE(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";ug(n,t,o[s],s,r)}function _1(n,e,t,r,i,o){let s=e.consts,a=Ju(s,i),u=xl(e,n,2,r,a);return i0(e,t,u,Ju(s,o)),u.attrs!==null&&Ep(u,u.attrs,!1),u.mergedAttrs!==null&&Ep(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function ne(n,e,t,r){let i=He(),o=Ii(),s=Ar+n,a=i[Ct],u=o.firstCreatePass?_1(s,o,i,e,t,r):o.data[s],l=w1(o,i,u,a,e,n);i[s]=l;let h=HE(u);return Aa(u,!0),WD(a,l,u),!l1(u)&&zp()&&sg(o,i,l,u),ER()===0&&yi(l,i),DR(),h&&(e0(o,i,u),XD(o,u,i)),r!==null&&t0(i,u),ne}function Z(){let n=hn();tD()?xR():(n=n.parent,Aa(n,!1));let e=n;bR(e)&&SR(),CR();let t=Ii();return t.firstCreatePass&&(Wp(t,n),$E(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&UR(e)&&uE(t,e,He(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&$R(e)&&uE(t,e,He(),e.stylesWithoutHost,!1),Z}function At(n,e,t,r){return ne(n,e,t,r),Z(),At}var w1=(n,e,t,r,i,o)=>(Gp(!0),jD(r,i,LR()));var hl="en-US";var I1=hl;function E1(n){typeof n=="string"&&(I1=n.toLowerCase().replace(/_/g,"-"))}function mg(n,e,t){return C0(n,"",e,"",t),mg}function C0(n,e,t,r,i){let o=He(),s=D0(o,e,t,r);if(s!==Jn){let a=Ii(),u=dD();r0(a,u,o,n,s,o[Ct],i,!1)}return C0}function de(n,e=""){let t=He(),r=Ii(),i=n+Ar,o=r.firstCreatePass?xl(r,i,1,e,null):r.data[i],s=D1(r,t,o,e,n);t[i]=s,zp()&&sg(r,t,s,o),Aa(o,!1)}var D1=(n,e,t,r,i)=>(Gp(!0),TN(e[Ct],r));function Ze(n){return fn("",n,""),Ze}function fn(n,e,t){let r=He(),i=D0(r,n,e,t);return i!==Jn&&u0(r,Cl(),i),fn}function yg(n,e,t,r,i){let o=He(),s=v1(o,n,e,t,r,i);return s!==Jn&&u0(o,Cl(),s),yg}var C1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=FE(!1,t.type),i=r.length>0?Nl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(O($t))})}}return n})();function T0(n){fg("NgStandalone"),n.getStandaloneInjector=e=>e.get(C1).getOrCreateStandaloneInjector(n)}function b0(n,e,t){let r=rD()+n,i=He();return i[r]===Jn?I0(i,r,t?e.call(t):e()):c1(i,r)}function S0(n,e,t,r){return b1(He(),rD(),n,e,t,r)}function T1(n,e){let t=n[e];return t===Jn?void 0:t}function b1(n,e,t,r,i,o){let s=e+t;return Da(n,s,i)?I0(n,s+1,o?r.call(o,i):r(i)):T1(n,s+1)}var Vu=null;function S1(n){Vu!==null&&(n.defaultEncapsulation!==Vu.defaultEncapsulation||n.preserveWhitespaces!==Vu.preserveWhitespaces)||(Vu=n)}var Mr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},A0=new Mr("18.2.13");var Pl=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var vg=new W(""),Ra=new W(""),kl=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,_g||(A1(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(O(me),O(Ol),O(Ra))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Ol=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return _g?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function A1(n){_g=n}var _g;function Na(n){return!!n&&typeof n.then=="function"}function x0(n){return!!n&&typeof n.subscribe=="function"}var Fl=new W(""),M0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=j(Fl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Na(o))t.push(o);else if(x0(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wg=new W("");function x1(){oI(()=>{throw new Y(600,!1)})}function M1(n){return n.isBoundToModule}var R1=10;function N1(n,e,t){try{let r=t();return Na(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function R0(n,e){return Array.isArray(e)?e.reduce(R0,n):V(V({},n),e)}var Nr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(uN),this.afterRenderManager=j(E0),this.zonelessEnabled=j(hg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ze,this.afterTick=new ze,this.componentTypes=[],this.components=[],this.isStable=j(ko).hasPendingTasks.pipe(G(t=>!t)),this._injector=j($t)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof al;if(!this._injector.get(M0).done){let m=!i&&NE(t),v=!1;throw new Y(405,v)}let s;i?s=t:s=this._injector.get(Ro).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=M1(s)?void 0:this._injector.get(xr),u=r||s.selector,l=s.create(Xt.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(vg,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Hu(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Y(101,!1);let t=Ce(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ce(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(No,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<R1;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)P1(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>El(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Hu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(wg,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Hu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Y(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Hu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function P1(n,e,t,r){if(!t&&!El(n))return;h0(n,e,t&&!r?0:1)}var Sp=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Ll=(()=>{class n{compileModuleSync(t){return new dl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=PE(t),o=VD(i.declarations).reduce((s,a)=>{let u=br(a);return u&&s.push(new Po(u)),s},[]);return new Sp(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),k1=new W("");function O1(n,e,t){let r=new dl(t);return Promise.resolve(r)}function lE(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var F1=(()=>{class n{constructor(){this.zone=j(me),this.changeDetectionScheduler=j(Mo),this.applicationRef=j(Nr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function L1({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new me(xe(V({},N0()),{scheduleInRootZone:t})),[{provide:me,useFactory:n},{provide:bo,multi:!0,useFactory:()=>{let r=j(F1,{optional:!0});return()=>r.initialize()}},{provide:bo,multi:!0,useFactory:()=>{let r=j(V1);return()=>{r.initialize()}}},e===!0?{provide:y0,useValue:!0}:[],{provide:v0,useValue:t??TD}]}function N0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var V1=(()=>{class n{constructor(){this.subscription=new Ue,this.initialized=!1,this.zone=j(me),this.pendingTasks=j(ko)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{me.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var j1=(()=>{class n{constructor(){this.appRef=j(Nr),this.taskService=j(ko),this.ngZone=j(me),this.zonelessEnabled=j(hg),this.disableScheduling=j(y0,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ue,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(nl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(v0,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof rl||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?YI:bD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(nl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,YI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function B1(){return typeof $localize<"u"&&$localize.locale||hl}var Ig=new W("",{providedIn:"root",factory:()=>j(Ig,ue.Optional|ue.SkipSelf)||B1()});var fl=new W("");function ju(n){return!n.moduleRef}function U1(n){let e=ju(n)?n.r3Injector:n.moduleRef.injector,t=e.get(me);return t.run(()=>{ju(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Kn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),ju(n)){let o=()=>e.destroy(),s=n.platformInjector.get(fl);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(fl);s.add(o),n.moduleRef.onDestroy(()=>{Hu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return N1(r,t,()=>{let o=e.get(M0);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Ig,hl);if(E1(s||hl),ju(n)){let a=e.get(Nr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return $1(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function $1(n,e){let t=n.injector.get(Nr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Y(-403,!1);e.push(n)}var P0=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>cN(r?.ngZone,xe(V({},N0({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[L1({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Mo,useExisting:j1}],u=s1(t.moduleType,this.injector,a);return U1({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=R0({},r);return O1(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Y(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(fl,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(O(Xt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),pa=null,k0=new W("");function H1(n){if(pa&&!pa.get(k0,!1))throw new Y(400,!1);x1(),pa=n;let e=n.get(P0);return G1(n),e}function Eg(n,e,t=[]){let r=`Platform: ${e}`,i=new W(r);return(o=[])=>{let s=O0();if(!s||s.injector.get(k0,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):H1(q1(a,r))}return z1(i)}}function q1(n=[],e){return Xt.create({name:e,providers:[{provide:vl,useValue:"platform"},{provide:fl,useValue:new Set([()=>pa=null])},...n]})}function z1(n){let e=O0();if(!e)throw new Y(401,!1);return e}function O0(){return pa?.get(P0)??null}function G1(n){n.get(Xp,null)?.forEach(t=>t())}function Dg(){return!1}var Pa=(()=>{class n{static{this.__NG_ELEMENT_ID__=W1}}return n})();function W1(n){return K1(hn(),He(),(n&16)===16)}function K1(n,e,t){if(wl(n)&&!t){let r=wi(n.index,e);return new vi(r,r)}else if(n.type&175){let r=e[Sn];return new vi(r,e)}return null}var Ap=class{constructor(){}supports(e){return w0(e)}create(e){return new xp(e)}},Q1=(n,e)=>e,xp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Q1}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<dE(r,i,o)?t:r,a=dE(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let v=m<o.length?o[m]:o[m]=0,b=v+m;h<=b&&b<l&&(o[m]=v+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!w0(e))throw new Y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,a1(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Mp(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new pl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new pl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Mp=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Rp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},pl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Rp,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function dE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var Np=class{constructor(){}supports(e){return e instanceof Map||pg(e)}create(){return new Pp}},Pp=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||pg(e)))throw new Y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new kp(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},kp=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function hE(){return new Cg([new Ap])}var Cg=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:hE})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||hE()),deps:[[n,new yl,new _i]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Y(901,!1)}}return n})();function fE(){return new Tg([new Np])}var Tg=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:fE})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||fE()),deps:[[n,new yl,new _i]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Y(901,!1)}}return n})();var F0=Eg(null,"core",[]),L0=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(O(Nr))}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({})}}return n})();function V0(n){let e=br(n);if(!e)return null;let t=new Po(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var $0=null;function Ei(){return $0}function H0(n){$0??=n}var Vl=class{};var Ot=new W(""),xg=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(X1),providedIn:"platform"})}}return n})(),q0=new W(""),X1=(()=>{class n extends xg{constructor(){super(),this._doc=j(Ot),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ei().getBaseHref(this._doc)}onPopState(t){let r=Ei().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ei().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Mg(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function j0(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Xn(n){return n&&n[0]!=="?"?"?"+n:n}var Di=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(Rg),providedIn:"root"})}}return n})(),z0=new W(""),Rg=(()=>{class n extends Di{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(Ot).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Mg(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Xn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(xg),O(z0,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),G0=(()=>{class n extends Di{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Mg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(xg),O(z0,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Oo=(()=>{class n{constructor(t){this._subject=new Et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=nk(j0(B0(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Xn(r))}normalize(t){return n.stripTrailingSlash(tk(this._basePath,B0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Xn}static{this.joinWithSlash=Mg}static{this.stripTrailingSlash=j0}static{this.\u0275fac=function(r){return new(r||n)(O(Di))}}static{this.\u0275prov=H({token:n,factory:()=>ek(),providedIn:"root"})}}return n})();function ek(){return new Oo(O(Di))}function tk(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function B0(n){return n.replace(/\/index.html$/,"")}function nk(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function W0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var bg=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},en=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new bg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),U0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);U0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Le(Ma),Le(dg),Le(Cg))}}static{this.\u0275dir=Ta({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function U0(n,e){n.context.$implicit=e.item}var K0=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),s=i.indexOf("-")===-1?void 0:Rr.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(Le(xa),Le(Tg),Le(Rl))}}static{this.\u0275dir=Ta({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();var Q0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({})}}return n})(),Ng="browser",rk="server";function ik(n){return n===Ng}function Ci(n){return n===rk}var Y0=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>ik(j(Pt))?new Sg(j(Ot),window):new Ag})}}return n})(),Sg=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=ok(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function ok(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Ag=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},jl=class{};var Og=class extends Vl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Fg=class n extends Og{static makeCurrent(){H0(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=ak();return t==null?null:ck(t)}resetBaseElement(){ka=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return W0(document.cookie,e)}},ka=null;function ak(){return ka=ka||document.querySelector("base"),ka?ka.getAttribute("href"):null}function ck(n){return new URL(n,document.baseURI).pathname}var Lg=class{addToWindow(e){Qn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Y(5103,!1);return o},Qn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Qn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Qn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Qn.frameworkStabilizers||(Qn.frameworkStabilizers=[]),Qn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Ei().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},uk=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Vg=new W(""),eC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Y(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(O(Vg),O(me))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Bl=class{constructor(e){this._doc=e}},Pg="ng-app-id",tC=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ci(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Pg}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Pg),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Pg,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(O(Ot),O(bl),O(eg,8),O(Pt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),kg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Bg=/%COMP%/g,nC="%COMP%",lk=`_nghost-${nC}`,dk=`_ngcontent-${nC}`,hk=!0,fk=new W("",{providedIn:"root",factory:()=>hk});function pk(n){return dk.replace(Bg,n)}function gk(n){return lk.replace(Bg,n)}function rC(n,e){return e.map(t=>t.replace(Bg,n))}var Z0=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ci(a),this.defaultRenderer=new Oa(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Tn.ShadowDom&&(r=xe(V({},r),{encapsulation:Tn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Ul?i.applyToHost(t):i instanceof Fa&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Tn.Emulated:o=new Ul(u,l,r,this.appId,h,s,a,p);break;case Tn.ShadowDom:return new jg(u,l,t,r,s,a,this.nonce,p);default:o=new Fa(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(O(eC),O(tC),O(bl),O(fk),O(Ot),O(Pt),O(me),O(eg))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Oa=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(kg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(J0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(J0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Y(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=kg[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=kg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Rr.DashCase|Rr.Important)?e.style.setProperty(t,r,i&Rr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Rr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Ei().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function J0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var jg=class extends Oa{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=rC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Fa=class extends Oa{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?rC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ul=class extends Fa{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=pk(l),this.hostAttr=gk(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},mk=(()=>{class n extends Bl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(O(Ot))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),X0=["alt","control","meta","shift"],yk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},_k=(()=>{class n extends Bl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ei().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),X0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=yk[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),X0.forEach(s=>{if(s!==i){let a=vk[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(O(Ot))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function wk(){Fg.makeCurrent()}function Ik(){return new Kn}function Ek(){return PD(document),document}var Dk=[{provide:Pt,useValue:Ng},{provide:Xp,useValue:wk,multi:!0},{provide:Ot,useFactory:Ek,deps:[]}],iC=Eg(F0,"browser",Dk),Ck=new W(""),Tk=[{provide:Ra,useClass:Lg,deps:[]},{provide:vg,useClass:kl,deps:[me,Ol,Ra]},{provide:kl,useClass:kl,deps:[me,Ol,Ra]}],bk=[{provide:vl,useValue:"root"},{provide:Kn,useFactory:Ik,deps:[]},{provide:Vg,useClass:mk,multi:!0,deps:[Ot,me,Pt]},{provide:Vg,useClass:_k,multi:!0,deps:[Ot]},Z0,tC,eC,{provide:No,useExisting:Z0},{provide:jl,useClass:uk,deps:[]},[]],oC=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:bl,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(O(Ck,12))}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({providers:[...bk,...Tk],imports:[Q0,L0]})}}return n})();var sC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(O(Ot))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ae="primary",Za=Symbol("RouteTitle"),zg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function $o(n){return new zg(n)}function Sk(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ak(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mn(n[t],e[t]))return!1;return!0}function Mn(n,e){let t=n?Gg(n):void 0,r=e?Gg(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!vC(n[i],e[i]))return!1;return!0}function Gg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function vC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function _C(n){return n.length>0?n[n.length-1]:null}function kr(n){return kf(n)?n:Na(n)?Ee(Promise.resolve(n)):ee(n)}var xk={exact:IC,subset:EC},wC={exact:Mk,subset:Rk,ignored:()=>!0};function cC(n,e,t){return xk[t.paths](n.root,e.root,t.matrixParams)&&wC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Mk(n,e){return Mn(n,e)}function IC(n,e,t){if(!bi(n.segments,e.segments)||!ql(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!IC(n.children[r],e.children[r],t))return!1;return!0}function Rk(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>vC(n[t],e[t]))}function EC(n,e,t){return DC(n,e,e.segments,t)}function DC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!bi(i,t)||e.hasChildren()||!ql(i,t,r))}else if(n.segments.length===t.length){if(!bi(n.segments,t)||!ql(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!EC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!bi(n.segments,i)||!ql(n.segments,i,r)||!n.children[ae]?!1:DC(n.children[ae],e,o,r)}}function ql(n,e,t){return e.every((r,i)=>wC[t](n[i].parameters,r.parameters))}var tr=class{constructor(e=new De([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=$o(this.queryParams),this._queryParamMap}toString(){return kk.serialize(this)}},De=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zl(this)}},Ti=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=$o(this.parameters),this._parameterMap}toString(){return TC(this)}};function Nk(n,e){return bi(n,e)&&n.every((t,r)=>Mn(t.parameters,e[r].parameters))}function bi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Pk(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ae&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ae&&(t=t.concat(e(i,r)))}),t}var Ja=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new Ho,providedIn:"root"})}}return n})(),Ho=class{parse(e){let t=new Kg(e);return new tr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${La(e.root,!0)}`,r=Lk(e.queryParams),i=typeof e.fragment=="string"?`#${Ok(e.fragment)}`:"";return`${t}${r}${i}`}},kk=new Ho;function zl(n){return n.segments.map(e=>TC(e)).join("/")}function La(n,e){if(!n.hasChildren())return zl(n);if(e){let t=n.children[ae]?La(n.children[ae],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ae&&r.push(`${i}:${La(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Pk(n,(r,i)=>i===ae?[La(n.children[ae],!1)]:[`${i}:${La(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ae]!=null?`${zl(n)}/${t[0]}`:`${zl(n)}/(${t.join("//")})`}}function CC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $l(n){return CC(n).replace(/%3B/gi,";")}function Ok(n){return encodeURI(n)}function Wg(n){return CC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gl(n){return decodeURIComponent(n)}function uC(n){return Gl(n.replace(/\+/g,"%20"))}function TC(n){return`${Wg(n.path)}${Fk(n.parameters)}`}function Fk(n){return Object.entries(n).map(([e,t])=>`;${Wg(e)}=${Wg(t)}`).join("")}function Lk(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${$l(t)}=${$l(i)}`).join("&"):`${$l(t)}=${$l(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Vk=/^[^\/()?;#]+/;function Ug(n){let e=n.match(Vk);return e?e[0]:""}var jk=/^[^\/()?;=#]+/;function Bk(n){let e=n.match(jk);return e?e[0]:""}var Uk=/^[^=?&#]+/;function $k(n){let e=n.match(Uk);return e?e[0]:""}var Hk=/^[^&#]+/;function qk(n){let e=n.match(Hk);return e?e[0]:""}var Kg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ae]=new De(e,t)),r}parseSegment(){let e=Ug(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Y(4009,!1);return this.capture(e),new Ti(Gl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Bk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ug(this.remaining);i&&(r=i,this.capture(r))}e[Gl(t)]=Gl(r)}parseQueryParam(e){let t=$k(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=qk(this.remaining);s&&(r=s,this.capture(r))}let i=uC(t),o=uC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ug(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Y(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ae);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ae]:new De([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Y(4011,!1)}};function bC(n){return n.segments.length>0?new De([],{[ae]:n}):n}function SC(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=SC(i);if(r===ae&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new De(n.segments,e);return zk(t)}function zk(n){if(n.numberOfChildren===1&&n.children[ae]){let e=n.children[ae];return new De(n.segments.concat(e.segments),e.children)}return n}function Ha(n){return n instanceof tr}function Gk(n,e,t=null,r=null){let i=AC(n);return xC(i,e,t,r)}function AC(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new De(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=bC(r);return e??i}function xC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return $g(i,i,i,t,r);let o=Wk(e);if(o.toRoot())return $g(i,i,new De([],{}),t,r);let s=Kk(o,i,n),a=s.processChildren?Ba(s.segmentGroup,s.index,o.commands):RC(s.segmentGroup,s.index,o.commands);return $g(i,s.segmentGroup,a,t,r)}function Wl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function qa(n){return typeof n=="object"&&n!=null&&n.outlets}function $g(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=MC(n,e,t);let a=bC(SC(s));return new tr(a,o,i)}function MC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=MC(o,e,t)}),new De(n.segments,r)}var Kl=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Wl(r[0]))throw new Y(4003,!1);let i=r.find(qa);if(i&&i!==_C(r))throw new Y(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Wk(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Kl(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Kl(t,e,r)}var jo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Kk(n,e,t){if(n.isAbsolute)return new jo(e,!0,0);if(!t)return new jo(e,!1,NaN);if(t.parent===null)return new jo(t,!0,0);let r=Wl(n.commands[0])?0:1,i=t.segments.length-1+r;return Qk(t,i,n.numberOfDoubleDots)}function Qk(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Y(4005,!1);i=r.segments.length}return new jo(r,!1,i-o)}function Yk(n){return qa(n[0])?n[0].outlets:{[ae]:n}}function RC(n,e,t){if(n??=new De([],{}),n.segments.length===0&&n.hasChildren())return Ba(n,e,t);let r=Zk(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new De(n.segments.slice(0,r.pathIndex),{});return o.children[ae]=new De(n.segments.slice(r.pathIndex),n.children),Ba(o,0,i)}else return r.match&&i.length===0?new De(n.segments,{}):r.match&&!n.hasChildren()?Qg(n,e,t):r.match?Ba(n,0,i):Qg(n,e,t)}function Ba(n,e,t){if(t.length===0)return new De(n.segments,{});{let r=Yk(t),i={};if(Object.keys(r).some(o=>o!==ae)&&n.children[ae]&&n.numberOfChildren===1&&n.children[ae].segments.length===0){let o=Ba(n.children[ae],e,t);return new De(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=RC(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new De(n.segments,i)}}function Zk(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(qa(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!dC(u,l,s))return o;r+=2}else{if(!dC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Qg(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(qa(o)){let u=Jk(o.outlets);return new De(r,u)}if(i===0&&Wl(t[0])){let u=n.segments[e];r.push(new Ti(u.path,lC(t[0]))),i++;continue}let s=qa(o)?o.outlets[ae]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Wl(a)?(r.push(new Ti(s,lC(a))),i+=2):(r.push(new Ti(s,{})),i++)}return new De(r,{})}function Jk(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Qg(new De([],{}),0,r))}),e}function lC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function dC(n,e,t){return n==t.path&&Mn(e,t.parameters)}var Ua="imperative",st=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(st||{}),tn=class{constructor(e,t){this.id=e,this.url=t}},qo=class extends tn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=st.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},nr=class extends tn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=st.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},qt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(qt||{}),Ql=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ql||{}),er=class extends tn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=st.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Pr=class extends tn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=st.NavigationSkipped}},za=class extends tn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=st.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Yl=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yg=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zg=class extends tn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=st.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Jg=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xg=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},em=class{constructor(e){this.route=e,this.type=st.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},tm=class{constructor(e){this.route=e,this.type=st.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},nm=class{constructor(e){this.snapshot=e,this.type=st.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rm=class{constructor(e){this.snapshot=e,this.type=st.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},im=class{constructor(e){this.snapshot=e,this.type=st.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},om=class{constructor(e){this.snapshot=e,this.type=st.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zl=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=st.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ga=class{},zo=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Xk(n,e){return n.providers&&!n._injector&&(n._injector=Nl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function pn(n){return n.outlet||ae}function eO(n,e){let t=n.filter(r=>pn(r)===e);return t.push(...n.filter(r=>pn(r)!==e)),t}function Xa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var sm=class{get injector(){return Xa(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ec(this.rootInjector),this.attachRef=null}},ec=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new sm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(O($t))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Jl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=am(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=am(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=cm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cm(e,this._root).map(t=>t.value)}};function am(n,e){if(n===e.value)return e;for(let t of e.children){let r=am(n,t);if(r)return r}return null}function cm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=cm(n,t);if(r.length)return r.unshift(e),r}return[]}var Ht=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Vo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Xl=class extends Jl{constructor(e,t){super(e),this.snapshot=t,ym(this,e)}toString(){return this.snapshot.toString()}};function NC(n){let e=tO(n),t=new ct([new Ti("",{})]),r=new ct({}),i=new ct({}),o=new ct({}),s=new ct(""),a=new Go(t,r,o,s,i,ae,n,e.root);return a.snapshot=e.root,new Xl(new Ht(a,[]),e)}function tO(n){let e={},t={},r={},i="",o=new Bo([],e,r,i,t,ae,n,null,{});return new td("",new Ht(o,[]))}var Go=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(G(l=>l[Za]))??ee(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(G(e=>$o(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(G(e=>$o(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ed(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&kC(i)&&(r.resolve[Za]=i.title),r}var Bo=class{get title(){return this.data?.[Za]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=$o(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=$o(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},td=class extends Jl{constructor(e,t){super(t),this.url=e,ym(this,t)}toString(){return PC(this._root)}};function ym(n,e){e.value._routerState=n,e.children.forEach(t=>ym(n,t))}function PC(n){let e=n.children.length>0?` { ${n.children.map(PC).join(", ")} } `:"";return`${n.value}${e}`}function Hg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Mn(e.params,t.params)||n.paramsSubject.next(t.params),Ak(e.url,t.url)||n.urlSubject.next(t.url),Mn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function um(n,e){let t=Mn(n.params,e.params)&&Nk(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||um(n.parent,e.parent))}function kC(n){return typeof n.title=="string"||n.title===null}var nO=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ae,this.activateEvents=new Et,this.deactivateEvents=new Et,this.attachEvents=new Et,this.detachEvents=new Et,this.parentContexts=j(ec),this.location=j(Ma),this.changeDetector=j(Pa),this.inputBinder=j(sd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Y(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new lm(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ta({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Il]})}}return n})(),lm=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Go?this.route:e===ec?this.childContexts:this.parent.get(e,t)}},sd=new W(""),hC=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ua([r.queryParams,r.params,r.data]).pipe($e(([o,s,a],u)=>(a=V(V(V({},o),s),a),u===0?ee(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=V0(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function rO(n,e,t){let r=Wa(n,e._root,t?t._root:void 0);return new Xl(r,e)}function Wa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=iO(n,e,t);return new Ht(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Wa(n,a)),s}}let r=oO(e.value),i=e.children.map(o=>Wa(n,o));return new Ht(r,i)}}function iO(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Wa(n,r,i);return Wa(n,r)})}function oO(n){return new Go(new ct(n.url),new ct(n.params),new ct(n.queryParams),new ct(n.fragment),new ct(n.data),n.outlet,n.component,n)}var Ka=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},OC="ngNavigationCancelingError";function nd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ha(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=FC(!1,qt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function FC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[OC]=!0,t.cancellationCode=e,t}function sO(n){return LC(n)&&Ha(n.url)}function LC(n){return!!n&&n[OC]}var aO=(n,e,t,r)=>G(i=>(new dm(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),dm=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Hg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Vo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Vo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Vo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Vo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new om(o.value.snapshot))}),e.children.length&&this.forwardEvent(new rm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Hg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Hg(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},rd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Uo=class{constructor(e,t){this.component=e,this.route=t}};function cO(n,e,t){let r=n._root,i=e?e._root:null;return Va(r,i,t,[r.value])}function uO(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ko(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!vE(n)?n:e.get(n):r}function Va(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Vo(e);return n.children.forEach(s=>{lO(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>$a(a,t.getContext(s),i)),i}function lO(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=dO(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new rd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Va(n,e,a?a.children:null,r,i):Va(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Uo(a.outlet.component,s))}else s&&$a(e,a,i),i.canActivateChecks.push(new rd(r)),o.component?Va(n,null,a?a.children:null,r,i):Va(n,null,t,r,i);return i}function dO(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!bi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!bi(n.url,e.url)||!Mn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!um(n,e)||!Mn(n.queryParams,e.queryParams);case"paramsChange":default:return!um(n,e)}}function $a(n,e,t){let r=Vo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?$a(s,e.children.getContext(o),t):$a(s,null,t):$a(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Uo(e.outlet.component,i)):t.canDeactivateChecks.push(new Uo(null,i)):t.canDeactivateChecks.push(new Uo(null,i))}function tc(n){return typeof n=="function"}function hO(n){return typeof n=="boolean"}function fO(n){return n&&tc(n.canLoad)}function pO(n){return n&&tc(n.canActivate)}function gO(n){return n&&tc(n.canActivateChild)}function mO(n){return n&&tc(n.canDeactivate)}function yO(n){return n&&tc(n.canMatch)}function VC(n){return n instanceof zn||n?.name==="EmptyError"}var Hl=Symbol("INITIAL_VALUE");function Wo(){return $e(n=>ua(n.map(e=>e.pipe(Gn(1),hi(Hl)))).pipe(G(e=>{for(let t of e)if(t!==!0){if(t===Hl)return Hl;if(t===!1||vO(t))return t}return!0}),ut(e=>e!==Hl),Gn(1)))}function vO(n){return Ha(n)||n instanceof Ka}function _O(n,e){return Ye(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ee(xe(V({},t),{guardsResult:!0})):wO(s,r,i,n).pipe(Ye(a=>a&&hO(a)?IO(r,o,n,e):ee(a)),G(a=>xe(V({},t),{guardsResult:a})))})}function wO(n,e,t,r){return Ee(n).pipe(Ye(i=>bO(i.component,i.route,t,e,r)),Kt(i=>i!==!0,!0))}function IO(n,e,t,r){return Ee(e).pipe(li(i=>yo(DO(i.route.parent,r),EO(i.route,r),TO(n,i.path,t),CO(n,i.route,t))),Kt(i=>i!==!0,!0))}function EO(n,e){return n!==null&&e&&e(new im(n)),ee(!0)}function DO(n,e){return n!==null&&e&&e(new nm(n)),ee(!0)}function CO(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(o=>Pu(()=>{let s=Xa(e)??t,a=Ko(o,s),u=pO(a)?a.canActivate(e,n):An(s,()=>a(e,n));return kr(u).pipe(Kt())}));return ee(i).pipe(Wo())}function TO(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>uO(s)).filter(s=>s!==null).map(s=>Pu(()=>{let a=s.guards.map(u=>{let l=Xa(s.node)??t,h=Ko(u,l),p=gO(h)?h.canActivateChild(r,n):An(l,()=>h(r,n));return kr(p).pipe(Kt())});return ee(a).pipe(Wo())}));return ee(o).pipe(Wo())}function bO(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ee(!0);let s=o.map(a=>{let u=Xa(e)??i,l=Ko(a,u),h=mO(l)?l.canDeactivate(n,e,t,r):An(u,()=>l(n,e,t,r));return kr(h).pipe(Kt())});return ee(s).pipe(Wo())}function SO(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ee(!0);let o=i.map(s=>{let a=Ko(s,n),u=fO(a)?a.canLoad(e,t):An(n,()=>a(e,t));return kr(u)});return ee(o).pipe(Wo(),jC(r))}function jC(n){return Af(nt(e=>{if(typeof e!="boolean")throw nd(n,e)}),G(e=>e===!0))}function AO(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ee(!0);let o=i.map(s=>{let a=Ko(s,n),u=yO(a)?a.canMatch(e,t):An(n,()=>a(e,t));return kr(u)});return ee(o).pipe(Wo(),jC(r))}var Qa=class{constructor(e){this.segmentGroup=e||null}},Ya=class extends Error{constructor(e){super(),this.urlTree=e}};function Lo(n){return mo(new Qa(n))}function xO(n){return mo(new Y(4e3,!1))}function MO(n){return mo(FC(!1,qt.GuardRejected))}var hm=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[ae])return xO(`${e.redirectTo}`);i=i.children[ae]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:b,title:R}=i,N=An(o,()=>a({params:v,data:b,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:R}));if(N instanceof tr)throw new Ya(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Ya(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new tr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new De(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Y(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},fm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function RO(n,e,t,r,i){let o=BC(n,e,t);return o.matched?(r=Xk(e,r),AO(r,e,t,i).pipe(G(s=>s===!0?o:V({},fm)))):ee(o)}function BC(n,e,t){if(e.path==="**")return NO(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},fm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Sk)(t,n,e);if(!i)return V({},fm);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function NO(n){return{matched:!0,parameters:n.length>0?_C(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function fC(n,e,t,r){return t.length>0&&OO(n,t,r)?{segmentGroup:new De(e,kO(r,new De(t,n.children))),slicedSegments:[]}:t.length===0&&FO(n,t,r)?{segmentGroup:new De(n.segments,PO(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new De(n.segments,n.children),slicedSegments:t}}function PO(n,e,t,r){let i={};for(let o of t)if(ad(n,e,o)&&!r[pn(o)]){let s=new De([],{});i[pn(o)]=s}return V(V({},r),i)}function kO(n,e){let t={};t[ae]=e;for(let r of n)if(r.path===""&&pn(r)!==ae){let i=new De([],{});t[pn(r)]=i}return t}function OO(n,e,t){return t.some(r=>ad(n,e,r)&&pn(r)!==ae)}function FO(n,e,t){return t.some(r=>ad(n,e,r))}function ad(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function LO(n,e,t){return e.length===0&&!n.children[t]}var pm=class{};function VO(n,e,t,r,i,o,s="emptyOnly"){return new gm(n,e,t,r,i,s,o).recognize()}var jO=31,gm=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new hm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Y(4002,`'${e.segmentGroup}'`)}recognize(){let e=fC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(G(({children:t,rootSnapshot:r})=>{let i=new Ht(r,t),o=new td("",i),s=Gk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Bo([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ae,t).pipe(G(r=>({children:r,rootSnapshot:t})),_r(r=>{if(r instanceof Ya)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Qa?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(G(s=>s instanceof Ht?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ee(o).pipe(li(s=>{let a=r.children[s],u=eO(t,s);return this.processSegmentGroup(e,u,a,s,i)}),di((s,a)=>(s.push(...a),s)),wr(null),Vf(),Ye(s=>{if(s===null)return Lo(r);let a=UC(s);return BO(a),ee(a)}))}processSegment(e,t,r,i,o,s,a){return Ee(t).pipe(li(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(_r(l=>{if(l instanceof Qa)return ee(null);throw l}))),Kt(u=>!!u),_r(u=>{if(VC(u))return LO(r,i,o)?ee(new pm):Lo(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return pn(r)!==s&&(s===ae||!ad(i,o,r))?Lo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Lo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=BC(t,i,o);if(!u)return Lo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>jO&&(this.allowRedirects=!1));let v=new Bo(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,pC(i),pn(i),i.component??i._loadedComponent??null,i,gC(i)),b=ed(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data);let R=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(Ye(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=RO(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe($e(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe($e(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=u,b=new Bo(m,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,pC(r),pn(r),r.component??r._loadedComponent??null,r,gC(r)),R=ed(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(R.params),b.data=Object.freeze(R.data);let{segmentGroup:N,slicedSegments:B}=fC(t,m,v,l);if(B.length===0&&N.hasChildren())return this.processChildren(h,l,N,b).pipe(G(F=>new Ht(b,F)));if(l.length===0&&B.length===0)return ee(new Ht(b,[]));let q=pn(r)===o;return this.processSegment(h,l,N,B,q?ae:o,!0,b).pipe(G(F=>new Ht(b,F instanceof Ht?[F]:[])))}))):Lo(t)))}getChildConfig(e,t,r){return t.children?ee({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ee({routes:t._loadedRoutes,injector:t._loadedInjector}):SO(e,t,r,this.urlSerializer).pipe(Ye(i=>i?this.configLoader.loadChildren(e,t).pipe(nt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):MO(t))):ee({routes:[],injector:e})}};function BO(n){n.sort((e,t)=>e.value.outlet===ae?-1:t.value.outlet===ae?1:e.value.outlet.localeCompare(t.value.outlet))}function UO(n){let e=n.value.routeConfig;return e&&e.path===""}function UC(n){let e=[],t=new Set;for(let r of n){if(!UO(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=UC(r.children);e.push(new Ht(r.value,i))}return e.filter(r=>!t.has(r))}function pC(n){return n.data||{}}function gC(n){return n.resolve||{}}function $O(n,e,t,r,i,o){return Ye(s=>VO(n,e,t,r,s.extractedUrl,i,o).pipe(G(({state:a,tree:u})=>xe(V({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function HO(n,e){return Ye(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ee(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of $C(u))s.add(l);let a=0;return Ee(s).pipe(li(u=>o.has(u)?qO(u,r,n,e):(u.data=ed(u,u.parent,n).resolve,ee(void 0))),nt(()=>a++),vo(1),Ye(u=>a===s.size?ee(t):It))})}function $C(n){let e=n.children.map(t=>$C(t)).flat();return[n,...e]}function qO(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!kC(i)&&(o[Za]=i.title),zO(o,n,e,r).pipe(G(s=>(n._resolvedData=s,n.data=ed(n,n.parent,t).resolve,null)))}function zO(n,e,t,r){let i=Gg(n);if(i.length===0)return ee({});let o={};return Ee(i).pipe(Ye(s=>GO(n[s],e,t,r).pipe(Kt(),nt(a=>{if(a instanceof Ka)throw nd(new Ho,a);o[s]=a}))),vo(1),Ff(o),_r(s=>VC(s)?It:mo(s)))}function GO(n,e,t,r){let i=Xa(e)??r,o=Ko(n,i),s=o.resolve?o.resolve(e,t):An(i,()=>o(e,t));return kr(s)}function qg(n){return $e(e=>{let t=n(e);return t?Ee(t).pipe(G(()=>e)):ee(e)})}var HC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ae);return r}getResolvedTitleForRoute(t){return t.data[Za]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(WO),providedIn:"root"})}}return n})(),WO=(()=>{class n extends HC{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(O(sC))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),nc=new W("",{providedIn:"root",factory:()=>({})}),KO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ot({type:n,selectors:[["ng-component"]],standalone:!0,features:[T0],decls:1,vars:0,template:function(r,i){r&1&&At(0,"router-outlet")},dependencies:[nO],encapsulation:2})}}return n})();function vm(n){let e=n.children&&n.children.map(vm),t=e?xe(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ae&&(t.component=KO),t}var id=new W(""),_m=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(Ll)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ee(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=kr(t.loadComponent()).pipe(G(qC),nt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),la(()=>{this.componentLoaders.delete(t)})),i=new ho(r,()=>new ze).pipe(lo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=QO(r,this.compiler,t,this.onLoadEndListener).pipe(la(()=>{this.childrenLoaders.delete(r)})),s=new ho(o,()=>new ze).pipe(lo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function QO(n,e,t,r){return kr(n.loadChildren()).pipe(G(qC),Ye(i=>i instanceof Ea||Array.isArray(i)?ee(i):Ee(e.compileModuleAsync(i))),G(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(id,[],{optional:!0,self:!0}).flat()),{routes:s.map(vm),injector:o}}))}function YO(n){return n&&typeof n=="object"&&"default"in n}function qC(n){return YO(n)?n.default:n}var wm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(ZO),providedIn:"root"})}}return n})(),ZO=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zC=new W(""),GC=new W("");function JO(n,e,t){let r=n.get(GC),i=n.get(Ot);return n.get(me).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),XO(n))),{onViewTransitionCreated:u}=r;return u&&An(n,()=>u({transition:a,from:e,to:t})),s})}function XO(n){return new Promise(e=>{gg({read:()=>setTimeout(e)},{injector:n})})}var eF=new W(""),Im=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ze,this.transitionAbortSubject=new ze,this.configLoader=j(_m),this.environmentInjector=j($t),this.urlSerializer=j(Ja),this.rootContexts=j(ec),this.location=j(Oo),this.inputBindingEnabled=j(sd,{optional:!0})!==null,this.titleStrategy=j(HC),this.options=j(nc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(wm),this.createViewTransition=j(zC,{optional:!0}),this.navigationErrorHandler=j(eF,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ee(void 0),this.rootComponentType=null;let t=i=>this.events.next(new em(i)),r=i=>this.events.next(new tm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(xe(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ct({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ua,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ut(o=>o.id!==0),G(o=>xe(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),$e(o=>{let s=!1,a=!1;return ee(o).pipe($e(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",qt.SupersededByNewNavigation),It;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?xe(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Pr(u.id,this.urlSerializer.serialize(u.rawUrl),p,Ql.IgnoredSameUrlNavigation)),u.resolve(!1),It}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ee(u).pipe($e(p=>{let m=this.transitions?.getValue();return this.events.next(new qo(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?It:Promise.resolve(p)}),$O(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=xe(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Yl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:b,extras:R}=u,N=new qo(p,this.urlSerializer.serialize(m),v,b);this.events.next(N);let B=NC(this.rootComponentType).snapshot;return this.currentTransition=o=xe(V({},u),{targetSnapshot:B,urlAfterRedirects:m,extras:xe(V({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ee(o)}else{let p="";return this.events.next(new Pr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Ql.IgnoredByUrlHandlingStrategy)),u.resolve(!1),It}}),nt(u=>{let l=new Yg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),G(u=>(this.currentTransition=o=xe(V({},u),{guards:cO(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),_O(this.environmentInjector,u=>this.events.next(u)),nt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw nd(this.urlSerializer,u.guardsResult);let l=new Zg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),ut(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",qt.GuardRejected),!1)),qg(u=>{if(u.guards.canActivateChecks.length)return ee(u).pipe(nt(l=>{let h=new Jg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),$e(l=>{let h=!1;return ee(l).pipe(HO(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",qt.NoDataFromResolver)}}))}),nt(l=>{let h=new Xg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),qg(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(nt(m=>{h.component=m}),G(()=>{})));for(let m of h.children)p.push(...l(m));return p};return ua(l(u.targetSnapshot.root)).pipe(wr(null),Gn(1))}),qg(()=>this.afterPreactivation()),$e(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Ee(h).pipe(G(()=>o)):ee(o)}),G(u=>{let l=rO(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=xe(V({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),nt(()=>{this.events.next(new Ga)}),aO(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Gn(1),nt({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new nr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),Bf(this.transitionAbortSubject.pipe(nt(u=>{throw u}))),la(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",qt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),_r(u=>{if(a=!0,LC(u))this.events.next(new er(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),sO(u)?this.events.next(new zo(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new za(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=An(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Ka){let{message:p,cancellationCode:m}=nd(this.urlSerializer,h);this.events.next(new er(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new zo(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return It}))}))}cancelNavigationTransition(t,r,i){let o=new er(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tF(n){return n!==Ua}var nF=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(rF),providedIn:"root"})}}return n})(),mm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},rF=(()=>{class n extends mm{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Qp(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),WC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(iF),providedIn:"root"})}}return n})(),iF=(()=>{class n extends WC{constructor(){super(...arguments),this.location=j(Oo),this.urlSerializer=j(Ja),this.options=j(nc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(wm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new tr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=NC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof qo)this.stateMemento=this.createStateMemento();else if(t instanceof Pr)this.rawUrlTree=r.initialUrl;else if(t instanceof Yl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Ga?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof er&&(t.code===qt.GuardRejected||t.code===qt.NoDataFromResolver)?this.restoreHistory(r):t instanceof za?this.restoreHistory(r,!0):t instanceof nr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof tr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=V(V({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Qp(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ja=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ja||{});function KC(n,e){n.events.pipe(ut(t=>t instanceof nr||t instanceof er||t instanceof za||t instanceof Pr),G(t=>t instanceof nr||t instanceof Pr?ja.COMPLETE:(t instanceof er?t.code===qt.Redirect||t.code===qt.SupersededByNewNavigation:!1)?ja.REDIRECTING:ja.FAILED),ut(t=>t!==ja.REDIRECTING),Gn(1)).subscribe(()=>{e()})}function oF(n){throw n}var sF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Si=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=j(Pl),this.stateManager=j(WC),this.options=j(nc,{optional:!0})||{},this.pendingTasks=j(ko),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(Im),this.urlSerializer=j(Ja),this.location=j(Oo),this.urlHandlingStrategy=j(wm),this._events=new ze,this.errorHandler=this.options.errorHandler||oF,this.navigated=!1,this.routeReuseStrategy=j(nF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(id,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(sd,{optional:!0}),this.eventsSubscription=new Ue,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof er&&r.code!==qt.Redirect&&r.code!==qt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof nr)this.navigated=!0;else if(r instanceof zo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||tF(i.source)},s);this.scheduleNavigation(a,Ua,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}uF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ua,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(vm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=AC(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return xC(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ha(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ua,null,r)}navigate(t,r={skipLocationChange:!1}){return cF(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},sF):r===!1?i=V({},aF):i=r,Ha(t))return cC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return cC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return KC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cF(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Y(4008,!1)}function uF(n){return!(n instanceof Ga)&&!(n instanceof zo)}var od=class{};var lF=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ut(t=>t instanceof nr),li(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Nl(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ee(i).pipe(vr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ee(null);let o=i.pipe(Ye(s=>s===null?ee(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ee([o,s]).pipe(vr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(O(Si),O(Ll),O($t),O(od),O(_m))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),QC=new W(""),dF=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof qo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof nr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Pr&&t.code===Ql.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Zl&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Zl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){QD()}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function hF(n){return n.routerState.root}function rc(n,e){return{\u0275kind:n,\u0275providers:e}}function fF(){let n=j(Xt);return e=>{let t=n.get(Nr);if(e!==t.components[0])return;let r=n.get(Si),i=n.get(YC);n.get(Em)===1&&r.initialNavigation(),n.get(ZC,null,ue.Optional)?.setUpPreloading(),n.get(QC,null,ue.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var YC=new W("",{factory:()=>new ze}),Em=new W("",{providedIn:"root",factory:()=>1});function pF(){return rc(2,[{provide:Em,useValue:0},{provide:Fl,multi:!0,deps:[Xt],useFactory:e=>{let t=e.get(q0,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Si),o=e.get(YC);KC(i,()=>{r(!0)}),e.get(Im).afterPreactivation=()=>(r(!0),o.closed?ee(void 0):o),i.initialNavigation()}))}}])}function gF(){return rc(3,[{provide:Fl,multi:!0,useFactory:()=>{let e=j(Si);return()=>{e.setUpLocationChangeListener()}}},{provide:Em,useValue:2}])}var ZC=new W("");function mF(n){return rc(0,[{provide:ZC,useExisting:lF},{provide:od,useExisting:n}])}function yF(){return rc(8,[hC,{provide:sd,useExisting:hC}])}function vF(n){let e=[{provide:zC,useValue:JO},{provide:GC,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return rc(9,e)}var mC=new W("ROUTER_FORROOT_GUARD"),_F=[Oo,{provide:Ja,useClass:Ho},Si,ec,{provide:Go,useFactory:hF,deps:[Si]},_m,[]],Dm=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[_F,[],{provide:id,multi:!0,useValue:t},{provide:mC,useFactory:DF,deps:[[Si,new _i,new yl]]},{provide:nc,useValue:r||{}},r?.useHash?IF():EF(),wF(),r?.preloadingStrategy?mF(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?CF(r):[],r?.bindToComponentInputs?yF().\u0275providers:[],r?.enableViewTransitions?vF().\u0275providers:[],TF()]}}static forChild(t){return{ngModule:n,providers:[{provide:id,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(O(mC,8))}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({})}}return n})();function wF(){return{provide:QC,useFactory:()=>{let n=j(Y0),e=j(me),t=j(nc),r=j(Im),i=j(Ja);return t.scrollOffset&&n.setOffset(t.scrollOffset),new dF(i,r,n,e,t)}}}function IF(){return{provide:Di,useClass:G0}}function EF(){return{provide:Di,useClass:Rg}}function DF(n){return"guarded"}function CF(n){return[n.initialNavigation==="disabled"?gF().\u0275providers:[],n.initialNavigation==="enabledBlocking"?pF().\u0275providers:[]]}var yC=new W("");function TF(){return[{provide:yC,useFactory:fF},{provide:wg,multi:!0,useExisting:yC}]}var bF=[],JC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({imports:[Dm.forRoot(bF),Dm]})}}return n})();var cd=class{constructor(){this.name="name",this.goalLife="goal",this.photoUrl="photo",this.email="email@domain.com",this.phoneNumber="999-999-9999",this.location="city, country",this.socialNetwork="@facebook"}};var SF="firebase",AF="10.14.1";yr(SF,AF,"app");var ic=new Mr("ANGULARFIRE2_VERSION");var xF=(n,e)=>{let t=e?[e]:tI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ai=class{constructor(){return xF(MF)}},MF="app-check";function Cm(){}var ud=class{zone;delegate;constructor(e,t=Nf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Tm=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Cm,{},Cm,Cm)),t.pipe(nt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ld=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new ud(Zone.current)),this.insideAngular=t.run(()=>new ud(Zone.current,ca)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(O(me))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function RF(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Ft(n){return NF(RF())(n)}function NF(n){return function(t){return t=t.lift(new Tm(n.ngZone)),t.pipe(cn(n.outsideAngular),Wt(n.insideAngular))}}var OF=new Map,FF={activated:!1,tokenObservers:[]},LF={initialized:!1,enabled:!1};function gn(n){return OF.get(n)||Object.assign({},FF)}function iT(){return LF}var VF="https://content-firebaseappcheck.googleapis.com/v1";var jF="exchangeDebugToken",eT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},D9=24*60*60*1e3;var Sm=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return M(this,null,function*(){this.stop();try{this.pending=new df,this.pending.promise.catch(t=>{}),yield BF(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new df,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function BF(n){return new Promise(e=>{setTimeout(e,n)})}var UF={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Or=new Xw("appCheck","AppCheck",UF);function oT(n){if(!gn(n).activated)throw Or.create("use-before-activation",{appName:n.name})}function sT(r,i){return M(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(v){throw Or.create("fetch-network-error",{originalErrorMessage:v?.message})}if(u.status!==200)throw Or.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(v){throw Or.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Or.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function aT(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${VF}/projects/${t}/apps/${r}:${jF}?key=${i}`,body:{debug_token:e}}}var $F="firebase-app-check-database",HF=1,Am="firebase-app-check-store";var dd=null;function qF(){return dd||(dd=new Promise((n,e)=>{try{let t=indexedDB.open($F,HF);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Or.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Am,{keyPath:"compositeKey"})}}}catch(t){e(Or.create("storage-open",{originalErrorMessage:t?.message}))}}),dd)}function zF(n,e){return GF(WF(n),e)}function GF(n,e){return M(this,null,function*(){let r=(yield qF()).transaction(Am,"readwrite"),o=r.objectStore(Am).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Or.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function WF(n){return`${n.options.appId}-${n.name}`}var xm=new fu("@firebase/app-check");function bm(n,e){return hu()?zF(n,e).catch(t=>{xm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function cT(){return iT().enabled}function uT(){return M(this,null,function*(){let n=iT();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var KF={error:"UNKNOWN_ERROR"};function QF(n){return Yw.encodeString(JSON.stringify(n),!1)}function Mm(n,e=!1){return M(this,null,function*(){let t=n.app;oT(t);let r=gn(t),i=r.token,o;if(i&&!oc(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(oc(u)?i=u:yield bm(t,void 0))}if(!e&&i&&oc(i))return{token:i.token};let s=!1;if(cT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=sT(aT(t,yield uT()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield bm(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield gn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?xm.warn(u.message):xm.error(u),o=u}let a;return i?o?oc(i)?a={token:i.token,internalError:o}:a=nT(o):(a={token:i.token},r.token=i,yield bm(t,i)):a=nT(o),s&&XF(t,a),a})}function YF(n){return M(this,null,function*(){let e=n.app;oT(e);let{provider:t}=gn(e);if(cT()){let r=yield uT(),{token:i}=yield sT(aT(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function ZF(n,e,t,r){let{app:i}=n,o=gn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&oc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),tT(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>tT(n))}function lT(n,e){let t=gn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function tT(n){let{app:e}=n,t=gn(e),r=t.tokenRefresher;r||(r=JF(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function JF(n){let{app:e}=n;return new Sm(()=>M(this,null,function*(){let t=gn(e),r;if(t.token?r=yield Mm(n,!0):r=yield Mm(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=gn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},eT.RETRIAL_MIN_WAIT,eT.RETRIAL_MAX_WAIT)}function XF(n,e){let t=gn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function oc(n){return n.expireTimeMillis-Date.now()>0}function nT(n){return{token:QF(KF),error:n}}var Rm=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=gn(this.app);for(let t of e)lT(this.app,t.next);return Promise.resolve()}};function eL(n,e){return new Rm(n,e)}function tL(n){return{getToken:e=>Mm(n,e),getLimitedUseToken:()=>YF(n),addTokenListener:e=>ZF(n,"INTERNAL",e),removeTokenListener:e=>lT(n.app,e)}}var nL="@firebase/app-check",rL="0.8.8";var iL="app-check",rT="app-check-internal";function oL(){ia(new si(iL,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return eL(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(rT).initialize()})),ia(new si(rT,n=>{let e=n.getProvider("app-check").getImmediate();return tL(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),yr(nL,rL)}oL();var sL=["localhost","0.0.0.0","127.0.0.1"],O9=typeof window<"u"&&sL.includes(window.location.hostname);var aL="firebase",cL="10.14.1";Bt.registerVersion(aL,cL,"app-compat");var uL=["ngOnDestroy"],fT=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(uL.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var hd=class{constructor(e){return e}},Qo=new W("angularfire2.app.options"),Yo=new W("angularfire2.app.name");function sc(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Bt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Bt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;lL("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new hd(s)}var lL=(n,...e)=>{Dg()&&typeof console<"u"&&console[n](...e)},dL={provide:hd,useFactory:sc,deps:[Qo,me,[new _i,Yo]]},pT=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Qo,useValue:t},{provide:Yo,useValue:r}]}}constructor(t){Bt.registerVersion("angularfire",ic.full,"core"),Bt.registerVersion("angularfire",ic.full,"app-compat"),Bt.registerVersion("angular",A0.full,t.toString())}static \u0275fac=function(r){return new(r||n)(O(Pt))};static \u0275mod=bt({type:n});static \u0275inj=Tt({providers:[dL]})}return n})();function fd(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return hL(i,s)||(hT("error",`${e} was already initialized on the ${t} Firebase App with different settings.${fL?" You may need to reload as Firebase is not HMR aware.":""}`),hT("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function hL(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var fL=typeof module<"u"&&!!module.hot,hT=(n,...e)=>{Dg()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Nm=new W("angularfire2.auth.use-emulator"),Pm=new W("angularfire2.auth.settings"),km=new W("angularfire2.auth.tenant-id"),Om=new W("angularfire2.auth.langugage-code"),Fm=new W("angularfire2.auth.use-device-language"),Lm=new W("angularfire.auth.persistence"),Vm=(n,e,t,r,i,o,s,a)=>fd(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),gT=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,p,m,v){let b=new ze,R=ee(void 0).pipe(Wt(s.outsideAngular),$e(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),G(()=>sc(t,o,r)),G(N=>Vm(N,o,a,l,h,p,u,m)),Ou({bufferSize:1,refCount:!1}));if(Ci(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ee(null);else{R.pipe(Kt()).subscribe();let N=R.pipe($e(F=>F.getRedirectResult().then(J=>J,()=>null)),Ft,Ou({bufferSize:1,refCount:!1})),B=R.pipe($e(F=>new pe(J=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(te=>J.next(te),te=>J.error(te),()=>J.complete()))})))),q=R.pipe($e(F=>new pe(J=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(te=>J.next(te),te=>J.error(te),()=>J.complete()))}))));this.authState=N.pipe(Fu(B),cn(s.outsideAngular),Wt(s.insideAngular)),this.user=N.pipe(Fu(q),cn(s.outsideAngular),Wt(s.insideAngular)),this.idToken=this.user.pipe($e(F=>F?Ee(F.getIdToken()):ee(null))),this.idTokenResult=this.user.pipe($e(F=>F?Ee(F.getIdTokenResult()):ee(null))),this.credential=Of(N,b,this.authState.pipe(ut(F=>!F))).pipe(G(F=>F?.user?F:null),cn(s.outsideAngular),Wt(s.insideAngular))}return fT(this,R,o,{spy:{apply:(N,B,q)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&q.then(F=>b.next(F))}}})}static \u0275fac=function(r){return new(r||n)(O(Qo),O(Yo,8),O(Pt),O(me),O(ld),O(Nm,8),O(Pm,8),O(km,8),O(Om,8),O(Fm,8),O(Lm,8),O(Ai,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var mT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yT={};var Fr,jm;(function(){var n;function e(I,y){function w(){}w.prototype=y.prototype,I.D=y.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,D,T){for(var _=Array(arguments.length-2),Un=2;Un<arguments.length;Un++)_[Un-2]=arguments[Un];return y.prototype[D].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(D=0;16>D;++D)E[D]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=I.g[0],w=I.g[1],D=I.g[2];var T=I.g[3],_=y+(T^w&(D^T))+E[0]+3614090360&4294967295;y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[1]+3905402710&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[4]+4118548399&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[5]+1200080426&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[8]+1770035416&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[9]+2336552879&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[12]+1804603682&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[13]+4254626195&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(D^T&(w^D))+E[1]+4129170786&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[6]+3225465664&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[5]+3593408605&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[10]+38016083&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[9]+568446438&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[14]+3275163606&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[13]+2850285829&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[2]+4243563512&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(w^D^T)+E[5]+4294588738&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[8]+2272392833&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[1]+2763975236&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[4]+1272893353&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[13]+681279174&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[0]+3936430074&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[9]+3654602809&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[12]+3873151461&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(D^(w|~T))+E[0]+4096336452&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[7]+1126891415&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[12]+1700485571&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[3]+2399980690&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[8]+1873313359&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[15]+4264355552&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[4]+4149444226&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[11]+3174756917&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var w=y-this.blockSize,E=this.B,D=this.h,T=0;T<y;){if(D==0)for(;T<=w;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<y;)if(E[D++]=I.charCodeAt(T++),D==this.blockSize){i(this,E),D=0;break}}else for(;T<y;)if(E[D++]=I[T++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var w=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=w&255,w/=256;for(this.u(I),I=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)I[w++]=this.g[y]>>>E&255;return I};function o(I,y){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=y(I)}function s(I,y){this.h=y;for(var w=[],E=!0,D=I.length-1;0<=D;D--){var T=I[D]|0;E&&T==y||(w[D]=T,E=!1)}this.g=w}var a={};function u(I){return-128<=I&&128>I?o(I,function(y){return new s([y|0],0>y?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return N(l(-I));for(var y=[],w=1,E=0;I>=w;E++)y[E]=I/w|0,w*=4294967296;return new s(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return N(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var T=Math.min(8,I.length-D),_=parseInt(I.substring(D,D+T),y);8>T?(T=l(Math.pow(y,T)),E=E.j(T).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var p=u(0),m=u(1),v=u(16777216);n=s.prototype,n.m=function(){if(R(this))return-N(this).m();for(var I=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(R(this))return"-"+N(this).toString(I);for(var y=l(Math.pow(I,6)),w=this,E="";;){var D=J(w,y).g;w=B(w,D.j(y));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=D,b(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function R(I){return I.h==-1}n.l=function(I){return I=B(this,I),R(I)?-1:b(I)?0:1};function N(I){for(var y=I.g.length,w=[],E=0;E<y;E++)w[E]=~I.g[E];return new s(w,~I.h).add(m)}n.abs=function(){return R(this)?N(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0,D=0;D<=y;D++){var T=E+(this.i(D)&65535)+(I.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function B(I,y){return I.add(N(y))}n.j=function(I){if(b(this)||b(I))return p;if(R(this))return R(I)?N(this).j(N(I)):N(N(this).j(I));if(R(I))return N(this.j(N(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var T=this.i(E)>>>16,_=this.i(E)&65535,Un=I.i(D)>>>16,Vs=I.i(D)&65535;w[2*E+2*D]+=_*Vs,q(w,2*E+2*D),w[2*E+2*D+1]+=T*Vs,q(w,2*E+2*D+1),w[2*E+2*D+1]+=_*Un,q(w,2*E+2*D+1),w[2*E+2*D+2]+=T*Un,q(w,2*E+2*D+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new s(w,0)};function q(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function F(I,y){this.g=I,this.h=y}function J(I,y){if(b(y))throw Error("division by zero");if(b(I))return new F(p,p);if(R(I))return y=J(N(I),y),new F(N(y.g),N(y.h));if(R(y))return y=J(I,N(y)),new F(N(y.g),y.h);if(30<I.g.length){if(R(I)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=y;0>=E.l(I);)w=te(w),E=te(E);var D=X(w,1),T=X(E,1);for(E=X(E,2),w=X(w,2);!b(E);){var _=T.add(E);0>=_.l(I)&&(D=D.add(w),T=_),E=X(E,1),w=X(w,1)}return y=B(I,D.j(y)),new F(D,y)}for(D=p;0<=I.l(y);){for(w=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),_=T.j(y);R(_)||0<_.l(I);)w-=E,T=l(w),_=T.j(y);b(T)&&(T=m),D=D.add(T),I=B(I,_)}return new F(D,I)}n.A=function(I){return J(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function te(I){for(var y=I.g.length+1,w=[],E=0;E<y;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function X(I,y){var w=y>>5;y%=32;for(var E=I.g.length-w,D=[],T=0;T<E;T++)D[T]=0<y?I.i(T+w)>>>y|I.i(T+w+1)<<32-y:I.i(T+w);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jm=yT.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Fr=yT.Integer=s}).apply(typeof mT<"u"?mT:typeof self<"u"?self:typeof window<"u"?window:{});var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rr={};var Bm,gL,Zo,Um,ac,gd,$m,Hm,qm;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof pd=="object"&&pd];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var L=Array(arguments.length-2),be=2;be<arguments.length;be++)L[be-2]=arguments[be];return d.prototype[C].apply(g,L)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let L=0;L<A;L++)c[C+L]=g[L]}else c.push(g)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var te=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function X(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function I(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Vh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Un{constructor(){this.h=this.g=null}add(d,f){let g=Vs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Vs=new B(()=>new hx,c=>c.reset());class hx{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let js,Bs=!1,Vh=new Un,G_=()=>{let c=a.Promise.resolve(void 0);js=()=>{c.then(fx)}};var fx=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){T(f)}var d=Vs;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Bs=!1};function fr(){this.s=this.s,this.C=this.C}fr.prototype.s=!1,fr.prototype.ma=function(){this.s||(this.s=!0,this.N())},fr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ht(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ht.prototype.h=function(){this.defaultPrevented=!0};var px=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Us(c,d){if(ht.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(te){e:{try{J(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:gx[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Us.aa.h.call(this)}}b(Us,ht);var gx={2:"touch",3:"pen",4:"mouse"};Us.prototype.h=function(){Us.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var $s="closure_listenable_"+(1e6*Math.random()|0),mx=0;function yx(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++mx,this.da=this.fa=!1}function Kc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Qc(c){this.src=c,this.g={},this.h=0}Qc.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var L=Bh(c,d,g,C);return-1<L?(d=c[L],f||(d.fa=!1)):(d=new yx(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function jh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(Kc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Bh(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Uh="closure_lm_"+(1e6*Math.random()|0),$h={};function W_(c,d,f,g,C){if(g&&g.once)return Q_(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)W_(c,d[A],f,g,C);return null}return f=Gh(f),c&&c[$s]?c.K(d,f,l(g)?!!g.capture:!!g,C):K_(c,d,f,!1,g,C)}function K_(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,be=qh(c);if(be||(c[Uh]=be=new Qc(c)),f=be.add(d,f,g,L,A),f.proxy)return f;if(g=vx(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)px||(C=L),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(Z_(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function vx(){function c(f){return d.call(c.src,c.listener,f)}let d=_x;return c}function Q_(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)Q_(c,d[A],f,g,C);return null}return f=Gh(f),c&&c[$s]?c.L(d,f,l(g)?!!g.capture:!!g,C):K_(c,d,f,!0,g,C)}function Y_(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)Y_(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=Gh(f),c&&c[$s]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Bh(A,f,g,C),-1<f&&(Kc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=qh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Bh(d,f,g,C)),(f=-1<c?d[c]:null)&&Hh(f))}function Hh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[$s])jh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(Z_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=qh(d))?(jh(f,c),f.h==0&&(f.src=null,d[Uh]=null)):Kc(c)}}}function Z_(c){return c in $h?$h[c]:$h[c]="on"+c}function _x(c,d){if(c.da)c=!0;else{d=new Us(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Hh(c),c=f.call(g,d)}return c}function qh(c){return c=c[Uh],c instanceof Qc?c:null}var zh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gh(c){return typeof c=="function"?c:(c[zh]||(c[zh]=function(d){return c.handleEvent(d)}),c[zh])}function ft(){fr.call(this),this.i=new Qc(this),this.M=this,this.F=null}b(ft,fr),ft.prototype[$s]=!0,ft.prototype.removeEventListener=function(c,d,f,g){Y_(this,c,d,f,g)};function vt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ht(d,c);else if(d instanceof ht)d.target=d.target||c;else{var C=d;d=new ht(g,c),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var L=d.g=f[A];C=Yc(L,g,!0,d)&&C}if(L=d.g=c,C=Yc(L,g,!0,d)&&C,C=Yc(L,g,!1,d)&&C,f)for(A=0;A<f.length;A++)L=d.g=f[A],C=Yc(L,g,!1,d)&&C}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Kc(f[g]);delete c.g[d],c.h--}}this.F=null},ft.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},ft.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Yc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var L=d[A];if(L&&!L.da&&L.capture==f){var be=L.listener,at=L.ha||L.src;L.fa&&jh(c.i,L),C=be.call(at,g)!==!1&&C}}return C&&!g.defaultPrevented}function J_(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function X_(c){c.g=J_(()=>{c.g=null,c.i&&(c.i=!1,X_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class wx extends fr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:X_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hs(c){fr.call(this),this.h=c,this.g={}}b(Hs,fr);var ew=[];function tw(c){X(c.g,function(d,f){this.g.hasOwnProperty(f)&&Hh(d)},c),c.g={}}Hs.prototype.N=function(){Hs.aa.N.call(this),tw(this)},Hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wh=a.JSON.stringify,Ix=a.JSON.parse,Ex=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Kh(){}Kh.prototype.h=null;function nw(c){return c.h||(c.h=c.i())}function rw(){}var qs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qh(){ht.call(this,"d")}b(Qh,ht);function Yh(){ht.call(this,"c")}b(Yh,ht);var ni={},iw=null;function Zc(){return iw=iw||new ft}ni.La="serverreachability";function ow(c){ht.call(this,ni.La,c)}b(ow,ht);function zs(c){let d=Zc();vt(d,new ow(d))}ni.STAT_EVENT="statevent";function sw(c,d){ht.call(this,ni.STAT_EVENT,c),this.stat=d}b(sw,ht);function _t(c){let d=Zc();vt(d,new sw(d,c))}ni.Ma="timingevent";function aw(c,d){ht.call(this,ni.Ma,c),this.size=d}b(aw,ht);function Gs(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ws(){this.g=!0}Ws.prototype.xa=function(){this.g=!1};function Dx(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var L="",be=A.split("&"),at=0;at<be.length;at++){var Ie=be[at].split("=");if(1<Ie.length){var pt=Ie[0];Ie=Ie[1];var gt=pt.split("_");L=2<=gt.length&&gt[1]=="type"?L+(pt+"="+Ie+"&"):L+(pt+"=redacted&")}}else L=null;else L=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+L})}function Cx(c,d,f,g,C,A,L){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+L})}function no(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+bx(c,f)+(g?" "+g:"")})}function Tx(c,d){c.info(function(){return"TIMEOUT: "+d})}Ws.prototype.info=function(){};function bx(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return Wh(f)}catch{return d}}var Jc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},cw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zh;function Xc(){}b(Xc,Kh),Xc.prototype.g=function(){return new XMLHttpRequest},Xc.prototype.i=function(){return{}},Zh=new Xc;function pr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Hs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new uw}function uw(){this.i=null,this.g="",this.h=!1}var lw={},Jh={};function Xh(c,d,f){c.L=1,c.v=ru($n(d)),c.m=f,c.P=!0,dw(c,null)}function dw(c,d){c.F=Date.now(),eu(c),c.A=$n(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Tw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new uw,c.g=Hw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new wx(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(ew[0]=C.toString()),C=ew);for(var A=0;A<C.length;A++){var L=W_(f,C[A],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),zs(),Dx(c.i,c.u,c.A,c.l,c.R,c.m)}pr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Hn(c)==3?d.j():this.Y(c)},pr.prototype.Y=function(c){try{if(c==this.g)e:{let gt=Hn(this.g);var d=this.g.Ba();let oo=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||Nw(this.g)))){this.J||gt!=4||d==7||(d==8||0>=oo?zs(3):zs(2)),ef(this);var f=this.g.Z();this.X=f;t:if(hw(this)){var g=Nw(this.g);c="";var C=g.length,A=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ri(this),Ks(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,Cx(this.i,this.u,this.A,this.l,this.R,gt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,at=this.g;if((be=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(be)){var Ie=be;break t}}Ie=null}if(f=Ie)no(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tf(this,f);else{this.o=!1,this.s=3,_t(12),ri(this),Ks(this);break e}}if(this.P){f=!0;let sn;for(;!this.J&&this.C<L.length;)if(sn=Sx(this,L),sn==Jh){gt==4&&(this.s=4,_t(14),f=!1),no(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==lw){this.s=4,_t(15),no(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else no(this.i,this.l,sn,null),tf(this,sn);if(hw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||L.length!=0||this.h.h||(this.s=1,_t(16),f=!1),this.o=this.o&&f,!f)no(this.i,this.l,L,"[Invalid Chunked Response]"),ri(this),Ks(this);else if(0<L.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),cf(pt),pt.M=!0,_t(11))}}else no(this.i,this.l,L,null),tf(this,L);gt==4&&ri(this),this.o&&!this.J&&(gt==4?jw(this.j,this):(this.o=!1,eu(this)))}else qx(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),ri(this),Ks(this)}}}catch{}finally{}};function hw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Sx(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Jh:(f=Number(d.substring(f,g)),isNaN(f)?lw:(g+=1,g+f>d.length?Jh:(d=d.slice(g,g+f),c.C=g+f,d)))}pr.prototype.cancel=function(){this.J=!0,ri(this)};function eu(c){c.S=Date.now()+c.I,fw(c,c.I)}function fw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Gs(m(c.ba,c),d)}function ef(c){c.B&&(a.clearTimeout(c.B),c.B=null)}pr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(Tx(this.i,this.A),this.L!=2&&(zs(),_t(17)),ri(this),this.s=2,Ks(this)):fw(this,this.S-c)};function Ks(c){c.j.G==0||c.J||jw(c.j,c)}function ri(c){ef(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,tw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function tf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||nf(f.h,c))){if(!c.K&&nf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)cu(f),su(f);else break e;af(f),_t(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Gs(m(f.Za,f),6e3));if(1>=mw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else oi(f,11)}else if((c.K||f.g==c)&&cu(f),!q(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let Ie=C[d];if(f.T=Ie[0],Ie=Ie[1],f.G==2)if(Ie[0]=="c"){f.K=Ie[1],f.ia=Ie[2];let pt=Ie[3];pt!=null&&(f.la=pt,f.j.info("VER="+f.la));let gt=Ie[4];gt!=null&&(f.Aa=gt,f.j.info("SVER="+f.Aa));let oo=Ie[5];oo!=null&&typeof oo=="number"&&0<oo&&(g=1.5*oo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let sn=c.g;if(sn){let lu=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lu){var A=g.h;A.g||lu.indexOf("spdy")==-1&&lu.indexOf("quic")==-1&&lu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(rf(A,A.h),A.h=null))}if(g.D){let uf=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;uf&&(g.ya=uf,Re(g.I,g.D,uf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=c;if(g.qa=$w(g,g.J?g.ia:null,g.W),L.K){yw(g.h,L);var be=L,at=g.L;at&&(be.I=at),be.B&&(ef(be),eu(be)),g.g=L}else Lw(g);0<f.i.length&&au(f)}else Ie[0]!="stop"&&Ie[0]!="close"||oi(f,7);else f.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?oi(f,7):sf(f):Ie[0]!="noop"&&f.l&&f.l.ta(Ie),f.v=0)}}zs(4)}catch{}}var Ax=class{constructor(c,d){this.g=c,this.map=d}};function pw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function mw(c){return c.h?1:c.g?c.g.size:0}function nf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function rf(c,d){c.g?c.g.add(d):c.h=d}function yw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}pw.prototype.cancel=function(){if(this.i=vw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function vw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function xx(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function Mx(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function _w(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=Mx(c),g=xx(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var ww=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rx(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ii(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ii){this.h=c.h,tu(this,c.j),this.o=c.o,this.g=c.g,nu(this,c.s),this.l=c.l;var d=c.i,f=new Zs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Iw(this,f),this.m=c.m}else c&&(d=String(c).match(ww))?(this.h=!1,tu(this,d[1]||"",!0),this.o=Qs(d[2]||""),this.g=Qs(d[3]||"",!0),nu(this,d[4]),this.l=Qs(d[5]||"",!0),Iw(this,d[6]||"",!0),this.m=Qs(d[7]||"")):(this.h=!1,this.i=new Zs(null,this.h))}ii.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ys(d,Ew,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ys(d,Ew,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ys(f,f.charAt(0)=="/"?kx:Px,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ys(f,Fx)),c.join("")};function $n(c){return new ii(c)}function tu(c,d,f){c.j=f?Qs(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function nu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Iw(c,d,f){d instanceof Zs?(c.i=d,Lx(c.i,c.h)):(f||(d=Ys(d,Ox)),c.i=new Zs(d,c.h))}function Re(c,d,f){c.i.set(d,f)}function ru(c){return Re(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Qs(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ys(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,Nx),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Nx(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ew=/[#\/\?@]/g,Px=/[#\?:]/g,kx=/[#\?]/g,Ox=/[#\?@]/g,Fx=/#/g;function Zs(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function gr(c){c.g||(c.g=new Map,c.h=0,c.i&&Rx(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Zs.prototype,n.add=function(c,d){gr(this),this.i=null,c=ro(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Dw(c,d){gr(c),d=ro(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Cw(c,d){return gr(c),d=ro(c,d),c.g.has(d)}n.forEach=function(c,d){gr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},n.na=function(){gr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},n.V=function(c){gr(this);let d=[];if(typeof c=="string")Cw(this,c)&&(d=d.concat(this.g.get(ro(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return gr(this),this.i=null,c=ro(this,c),Cw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Tw(c,d,f){Dw(c,d),0<f.length&&(c.i=null,c.g.set(ro(c,d),R(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var C=A;L[g]!==""&&(C+="="+encodeURIComponent(String(L[g]))),c.push(C)}}return this.i=c.join("&")};function ro(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Lx(c,d){d&&!c.j&&(gr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(Dw(this,g),Tw(this,C,f))},c)),c.j=d}function Vx(c,d){let f=new Ws;if(a.Image){let g=new Image;g.onload=v(mr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(mr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(mr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(mr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function jx(c,d){let f=new Ws,g=new AbortController,C=setTimeout(()=>{g.abort(),mr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?mr(f,"TestPingServer: ok",!0,d):mr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),mr(f,"TestPingServer: error",!1,d)})}function mr(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function Bx(){this.g=new Ex}function Ux(c,d,f){let g=f||"";try{_w(c,function(C,A){let L=C;l(C)&&(L=Wh(C)),d.push(g+A+"="+encodeURIComponent(L))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Js(c){this.l=c.Ub||null,this.j=c.eb||!1}b(Js,Kh),Js.prototype.g=function(){return new iu(this.l,this.j)},Js.prototype.i=function(c){return function(){return c}}({});function iu(c,d){ft.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(iu,ft),n=iu.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ea(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xs(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ea(this)),this.g&&(this.readyState=3,ea(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function bw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Xs(this):ea(this),this.readyState==3&&bw(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Xs(this))},n.Qa=function(c){this.g&&(this.response=c,Xs(this))},n.ga=function(){this.g&&Xs(this)};function Xs(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ea(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function ea(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(iu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Sw(c){let d="";return X(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function of(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Sw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Re(c,d,f))}function Be(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Be,ft);var $x=/^https?$/i,Hx=["POST","PUT"];n=Be.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zh.g(),this.v=this.o?nw(this.o):nw(Zh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){Aw(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Hx,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,L]of f)this.g.setRequestHeader(A,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Rw(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){Aw(this,A)}};function Aw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,xw(c),ou(c)}function xw(c){c.A||(c.A=!0,vt(c,"complete"),vt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,vt(this,"complete"),vt(this,"abort"),ou(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ou(this,!0)),Be.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Mw(this):this.bb())},n.bb=function(){Mw(this)};function Mw(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Hn(c)!=4||c.Z()!=2)){if(c.u&&Hn(c)==4)J_(c.Ea,0,c);else if(vt(c,"readystatechange"),Hn(c)==4){c.h=!1;try{let L=c.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var C=String(c.D).match(ww)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!$x.test(C?C.toLowerCase():"")}f=g}if(f)vt(c,"complete"),vt(c,"success");else{c.m=6;try{var A=2<Hn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",xw(c)}}finally{ou(c)}}}}function ou(c,d){if(c.g){Rw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||vt(c,"ready");try{f.onreadystatechange=g}catch{}}}function Rw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Hn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Ix(d)}};function Nw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function qx(c){let d={};c=(c.g&&2<=Hn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(q(c[g]))continue;var f=D(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ta(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Pw(c){this.Aa=0,this.i=[],this.j=new Ws,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ta("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ta("baseRetryDelayMs",5e3,c),this.cb=ta("retryDelaySeedMs",1e4,c),this.Wa=ta("forwardChannelMaxRetries",2,c),this.wa=ta("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new pw(c&&c.concurrentRequestLimit),this.Da=new Bx,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Pw.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){_t(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=$w(this,null,this.W),au(this)};function sf(c){if(kw(c),c.G==3){var d=c.U++,f=$n(c.I);if(Re(f,"SID",c.K),Re(f,"RID",d),Re(f,"TYPE","terminate"),na(c,f),d=new pr(c,c.j,d),d.L=2,d.v=ru($n(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Hw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),eu(d)}Uw(c)}function su(c){c.g&&(cf(c),c.g.cancel(),c.g=null)}function kw(c){su(c),c.u&&(a.clearTimeout(c.u),c.u=null),cu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function au(c){if(!gw(c.h)&&!c.s){c.s=!0;var d=c.Ga;js||G_(),Bs||(js(),Bs=!0),Vh.add(d,c),c.B=0}}function zx(c,d){return mw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Gs(m(c.Ga,c,d),Bw(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new pr(this,this.j,c),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Fw(this,C,d),f=$n(this.I),Re(f,"RID",c),Re(f,"CVER",22),this.D&&Re(f,"X-HTTP-Session-Id",this.D),na(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Sw(A)))+"&"+d:this.m&&of(f,this.m,A)),rf(this.h,C),this.Ua&&Re(f,"TYPE","init"),this.P?(Re(f,"$req",d),Re(f,"SID","null"),C.T=!0,Xh(C,f,null)):Xh(C,f,d),this.G=2}}else this.G==3&&(c?Ow(this,c):this.i.length==0||gw(this.h)||Ow(this))};function Ow(c,d){var f;d?f=d.l:f=c.U++;let g=$n(c.I);Re(g,"SID",c.K),Re(g,"RID",f),Re(g,"AID",c.T),na(c,g),c.m&&c.o&&of(g,c.m,c.o),f=new pr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Fw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),rf(c.h,f),Xh(f,g,d)}function na(c,d){c.H&&X(c.H,function(f,g){Re(d,g,f)}),c.l&&_w({},function(f,g){Re(d,g,f)})}function Fw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let L=["count="+f];A==-1?0<f?(A=C[0].g,L.push("ofs="+A)):A=0:L.push("ofs="+A);let be=!0;for(let at=0;at<f;at++){let Ie=C[at].g,pt=C[at].map;if(Ie-=A,0>Ie)A=Math.max(0,C[at].g-100),be=!1;else try{Ux(pt,L,"req"+Ie+"_")}catch{g&&g(pt)}}if(be){g=L.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Lw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;js||G_(),Bs||(js(),Bs=!0),Vh.add(d,c),c.v=0}}function af(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Gs(m(c.Fa,c),Bw(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Vw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Gs(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),su(this),Vw(this))};function cf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Vw(c){c.g=new pr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=$n(c.qa);Re(d,"RID","rpc"),Re(d,"SID",c.K),Re(d,"AID",c.T),Re(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Re(d,"TO",c.ja),Re(d,"TYPE","xmlhttp"),na(c,d),c.m&&c.o&&of(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=ru($n(d)),f.m=null,f.P=!0,dw(f,c)}n.Za=function(){this.C!=null&&(this.C=null,su(this),af(this),_t(19))};function cu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function jw(c,d){var f=null;if(c.g==d){cu(c),cf(c),c.g=null;var g=2}else if(nf(c.h,d))f=d.D,yw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=Zc(),vt(g,new aw(g,f)),au(c)}else Lw(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&zx(c,d)||g==2&&af(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:oi(c,5);break;case 4:oi(c,10);break;case 3:oi(c,6);break;default:oi(c,2)}}}function Bw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function oi(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new ii(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||tu(g,"https"),ru(g),C?Vx(g.toString(),f):jx(g.toString(),f)}else _t(2);c.G=0,c.l&&c.l.sa(d),Uw(c),kw(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function Uw(c){if(c.G=0,c.ka=[],c.l){let d=vw(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function $w(c,d,f){var g=f instanceof ii?$n(f):new ii(f);if(g.g!="")d&&(g.g=d+"."+g.g),nu(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new ii(null);g&&tu(A,g),d&&(A.g=d),C&&nu(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Re(g,f,d),Re(g,"VER",c.la),na(c,g),g}function Hw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Be(new Js({eb:f})):new Be(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qw(){}n=qw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function uu(){}uu.prototype.g=function(c,d){return new jt(c,d)};function jt(c,d){ft.call(this),this.g=new Pw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!q(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new io(this)}b(jt,ft),jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){sf(this.g)},jt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Wh(c),c=f);d.i.push(new Ax(d.Ya++,c)),d.G==3&&au(d)},jt.prototype.N=function(){this.g.l=null,delete this.j,sf(this.g),delete this.g,jt.aa.N.call(this)};function zw(c){Qh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(zw,Qh);function Gw(){Yh.call(this),this.status=1}b(Gw,Yh);function io(c){this.g=c}b(io,qw),io.prototype.ua=function(){vt(this.g,"a")},io.prototype.ta=function(c){vt(this.g,new zw(c))},io.prototype.sa=function(c){vt(this.g,new Gw)},io.prototype.ra=function(){vt(this.g,"b")},uu.prototype.createWebChannel=uu.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,qm=rr.createWebChannelTransport=function(){return new uu},Hm=rr.getStatEventTarget=function(){return Zc()},$m=rr.Event=ni,gd=rr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Jc.NO_ERROR=0,Jc.TIMEOUT=8,Jc.HTTP_ERROR=6,ac=rr.ErrorCode=Jc,cw.COMPLETE="complete",Um=rr.EventType=cw,rw.EventType=qs,qs.OPEN="a",qs.CLOSE="b",qs.ERROR="c",qs.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Zo=rr.WebChannel=rw,gL=rr.FetchXmlHttpFactory=Js,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,Bm=rr.XhrIo=Be}).apply(typeof pd<"u"?pd:typeof self<"u"?self:typeof window<"u"?window:{});var vT="@firebase/firestore";var et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var As="10.14.0";var Hr=new fu("@firebase/firestore");function ns(){return Hr.logLevel}function Ib(n){Hr.setLogLevel(n)}function k(n,...e){if(Hr.logLevel<=In.DEBUG){let t=e.map(Qv);Hr.debug(`Firestore (${As}): ${n}`,...t)}}function Ge(n,...e){if(Hr.logLevel<=In.ERROR){let t=e.map(Qv);Hr.error(`Firestore (${As}): ${n}`,...t)}}function mn(n,...e){if(Hr.logLevel<=In.WARN){let t=e.map(Qv);Hr.warn(`Firestore (${As}): ${n}`,...t)}}function Qv(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${As}) INTERNAL ASSERTION FAILED: `+n;throw Ge(e),new Error(e)}function K(n,e){n||z()}function Eb(n,e){n||z()}function U(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends Jw{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Td=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ym=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(et.UNAUTHENTICATED))}shutdown(){}},Zm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Jm=class{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){K(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new rt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new rt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>M(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K(typeof r.accessToken=="string"),new Td(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new et(e)}},Xm=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ey=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Xm(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ty=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ny=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){K(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(K(typeof t.token=="string"),this.R=t.token,new ty(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function mL(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var bd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=mL(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function oe(n,e){return n<e?-1:n>e?1:0}function ds(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Db(n){return n+"\0"}var Ve=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Q=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ve(0,0))}static max(){return new n(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Sd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ve=class n extends Sd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},yL=/^[_a-zA-Z][_a-zA-Z0-9]*$/,We=class n extends Sd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return yL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(ve.fromString(e))}static fromName(e){return new n(ve.fromString(e).popFirst(5))}static empty(){return new n(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ve(e.slice()))}};var hs=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function ry(n){return n.fields.find(e=>e.kind===2)}function Mi(n){return n.fields.filter(e=>e.kind!==2)}hs.UNKNOWN_ID=-1;var cs=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var _c=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,rn.min())}};function Cb(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new Ve(t+1,0):new Ve(t,r));return new rn(i,$.empty(),e)}function Tb(n){return new rn(n.readTime,n.key,-1)}var rn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Q.min(),$.empty(),-1)}static max(){return new n(Q.max(),$.empty(),-1)}};function Yv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:oe(n.largestBatchId,e.largestBatchId))}var bb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ad=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Xr(n){return M(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==bb)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var xd=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new rt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Fi(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Zv(r.target.error);this.V.reject(new Fi(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Fi(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new oy(t)}},qr=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(ra())===12.2&&Ge("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),Ri(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!hu())return!1;if(n.v())return!0;let e=ra(),t=n.S(e),r=0<t&&t<10,i=Sb(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return M(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Fi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Fi(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return M(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=xd.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function Sb(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var iy=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ri(this.B.delete())}},Fi=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function ei(n){return n.name==="IndexedDbTransactionError"}var oy=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ri(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),Ri(this.store.add(e))}get(e){return Ri(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),Ri(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),Ri(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Zv(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new iy(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let h=l.catch(p=>(u.done(),S.reject(p)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Ri(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Zv(r.target.error);t(i)}})}var _T=!1;function Zv(n){let e=qr.S(ra());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _T||(_T=!0,setTimeout(()=>{throw r},0)),r}}return n}var sy=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>M(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){ei(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Xr(t)}yield this.X(6e4)}))}},ay=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return M(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=Tb(o);Yv(s,r)>0&&(r=s)}),new rn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var zt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Bc(n){return n==null}function wc(n){return n===0&&1/n==-1/0}function Ab(n){return typeof n=="number"&&Number.isInteger(n)&&!wc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function xt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wT(e)),e=vL(n.get(t),e);return wT(e)}function vL(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function wT(n){return n+""}function Rn(n){let e=n.length;if(K(e>=2),e===2)return K(n.charAt(0)===""&&n.charAt(1)===""),ve.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new ve(r)}var IT=["userId","batchId"];function wd(n,e){return[n,xt(e)]}function xb(n,e,t){return[n,xt(e),t]}var _L={},wL=["prefixPath","collectionGroup","readTime","documentId"],IL=["prefixPath","collectionGroup","documentId"],EL=["collectionGroup","readTime","prefixPath","documentId"],DL=["canonicalId","targetId"],CL=["targetId","path"],TL=["path","targetId"],bL=["collectionId","parent"],SL=["indexId","uid"],AL=["uid","sequenceNumber"],xL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ML=["indexId","uid","orderedDocumentKey"],RL=["userId","collectionPath","documentId"],NL=["userId","collectionPath","largestBatchId"],PL=["userId","collectionGroup","largestBatchId"],Mb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],kL=[...Mb,"documentOverlays"],Rb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Nb=Rb,Jv=[...Nb,"indexConfiguration","indexState","indexEntries"],OL=Jv,FL=[...Jv,"globals"];var Ic=class extends Ad{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function it(n,e){let t=U(n);return qr.F(t._e,e)}function ET(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ki(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Pb(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ne=class n{constructor(e,t){this.comparator=e,this.root=t||Pn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new as(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new as(this.root,e,this.comparator,!1)}getReverseIterator(){return new as(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new as(this.root,e,this.comparator,!0)}},as=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Pn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ae=class n{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Md(this.data.getIterator())}getIteratorFrom(e){return new Md(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Md=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Jo(n){return n.hasNext()?n.getNext():void 0}var Gt=class n{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ae(We.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ds(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Rd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function kb(){return typeof atob<"u"}var Qe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Rd("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qe.EMPTY_BYTE_STRING=new Qe("");var LL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sr(n){if(K(!!n),typeof n=="string"){let e=0,t=LL.exec(n);if(K(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(n.seconds),nanos:ke(n.nanos)}}function ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zr(n){return typeof n=="string"?Qe.fromBase64String(n):Qe.fromUint8Array(n)}function Eh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Xv(n){let e=n.mapValue.fields.__previous_value__;return Eh(e)?Xv(e):e}function Ec(n){let e=sr(n.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}var cy=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Gr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ur={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Id={nullValue:"NULL_VALUE"};function Li(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Eh(n)?4:Ob(n)?9007199254740991:Dh(n)?10:11:z()}function Fn(n,e){if(n===e)return!0;let t=Li(n);if(t!==Li(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ec(n).isEqual(Ec(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=sr(i.timestampValue),a=sr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return zr(i.bytesValue).isEqual(zr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ke(i.geoPointValue.latitude)===ke(o.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ke(i.integerValue)===ke(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ke(i.doubleValue),a=ke(o.doubleValue);return s===a?wc(s)===wc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ds(n.arrayValue.values||[],e.arrayValue.values||[],Fn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(ET(s)!==ET(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Fn(s[u],a[u])))return!1;return!0}(n,e);default:return z()}}function Dc(n,e){return(n.values||[]).find(t=>Fn(t,e))!==void 0}function Wr(n,e){if(n===e)return 0;let t=Li(n),r=Li(e);if(t!==r)return oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return oe(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ke(o.integerValue||o.doubleValue),u=ke(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return DT(n.timestampValue,e.timestampValue);case 4:return DT(Ec(n),Ec(e));case 5:return oe(n.stringValue,e.stringValue);case 6:return function(o,s){let a=zr(o),u=zr(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=oe(a[l],u[l]);if(h!==0)return h}return oe(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=oe(ke(o.latitude),ke(s.latitude));return a!==0?a:oe(ke(o.longitude),ke(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return CT(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(u=m.value)===null||u===void 0?void 0:u.arrayValue,R=oe(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:CT(v,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Ur.mapValue&&s===Ur.mapValue)return 0;if(o===Ur.mapValue)return 1;if(s===Ur.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=oe(u[p],h[p]);if(m!==0)return m;let v=Wr(a[u[p]],l[h[p]]);if(v!==0)return v}return oe(u.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function DT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return oe(n,e);let t=sr(n),r=sr(e),i=oe(t.seconds,r.seconds);return i!==0?i:oe(t.nanos,r.nanos)}function CT(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Wr(t[i],r[i]);if(o)return o}return oe(t.length,r.length)}function fs(n){return uy(n)}function uy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=sr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return zr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=uy(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${uy(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function Vi(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ly(n){return!!n&&"integerValue"in n}function Cc(n){return!!n&&"arrayValue"in n}function TT(n){return!!n&&"nullValue"in n}function bT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ed(n){return!!n&&"mapValue"in n}function Dh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function pc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ki(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=pc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ob(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Fb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function VL(n){return"nullValue"in n?Id:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Vi(Gr.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Dh(n)?Fb:{mapValue:{}}:z()}function jL(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Vi(Gr.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Fb:"mapValue"in n?Dh(n)?{mapValue:{}}:Ur:z()}function ST(n,e){let t=Wr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function AT(n,e){let t=Wr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var yt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ed(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pc(t)}setAll(e){let t=We.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=pc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Ed(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ed(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ki(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(pc(this.value))}};function Lb(n){let e=[];return Ki(n.fields,(t,r)=>{let i=new We([t]);if(Ed(r)){let o=Lb(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Gt(e)}var tt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Q.min(),Q.min(),Q.min(),yt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Q.min(),Q.min(),yt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Q.min(),Q.min(),yt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ln=class{constructor(e,t){this.position=e,this.inclusive=t}};function xT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=Wr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function MT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fn(n.position[t],e.position[t]))return!1;return!0}var ji=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function BL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Nd=class{},fe=class n extends Nd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new fy(e,t,r):t==="array-contains"?new my(e,r):t==="in"?new Pd(e,r):t==="not-in"?new yy(e,r):t==="array-contains-any"?new vy(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new py(e,r):new gy(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Wr(t,this.value)):t!==null&&Li(this.value)===Li(t)&&this.matchesComparison(Wr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Te=class n extends Nd{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return ps(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ps(n){return n.op==="and"}function dy(n){return n.op==="or"}function e_(n){return Vb(n)&&ps(n)}function Vb(n){for(let e of n.filters)if(e instanceof Te)return!1;return!0}function hy(n){if(n instanceof fe)return n.field.canonicalString()+n.op.toString()+fs(n.value);if(e_(n))return n.filters.map(e=>hy(e)).join(",");{let e=n.filters.map(t=>hy(t)).join(",");return`${n.op}(${e})`}}function jb(n,e){return n instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&Fn(r.value,i.value)}(n,e):n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&jb(s,i.filters[a]),!0):!1}(n,e):void z()}function Bb(n,e){let t=n.filters.concat(e);return Te.create(t,n.op)}function Ub(n){return n instanceof fe?function(t){return`${t.field.canonicalString()} ${t.op} ${fs(t.value)}`}(n):n instanceof Te?function(t){return t.op.toString()+" {"+t.getFilters().map(Ub).join(" ,")+"}"}(n):"Filter"}var fy=class extends fe{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},py=class extends fe{constructor(e,t){super(e,"in",t),this.keys=$b("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},gy=class extends fe{constructor(e,t){super(e,"not-in",t),this.keys=$b("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function $b(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var my=class extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Cc(t)&&Dc(t.arrayValue,this.value)}},Pd=class extends fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Dc(this.value.arrayValue,t)}},yy=class extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Dc(this.value.arrayValue,t)}},vy=class extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Cc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Dc(this.value.arrayValue,r))}};var _y=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function wy(n,e=null,t=[],r=[],i=null,o=null,s=null){return new _y(n,e,t,r,i,o,s)}function Bi(n){let e=U(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>hy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Bc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>fs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>fs(r)).join(",")),e.ue=t}return e.ue}function Uc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!BL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!MT(n.startAt,e.startAt)&&MT(n.endAt,e.endAt)}function kd(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Od(n,e){return n.filters.filter(t=>t instanceof fe&&t.field.isEqual(e))}function RT(n,e,t){let r=Id,i=!0;for(let o of Od(n,e)){let s=Id,a=!0;switch(o.op){case"<":case"<=":s=VL(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Id}ST({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];ST({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function NT(n,e,t){let r=Ur,i=!0;for(let o of Od(n,e)){let s=Ur,a=!0;switch(o.op){case">=":case">":s=jL(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Ur}AT({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];AT({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var yn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Hb(n,e,t,r,i,o,s,a){return new yn(n,e,t,r,i,o,s,a)}function xs(n){return new yn(n)}function PT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function t_(n){return n.collectionGroup!==null}function us(n){let e=U(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ae(We.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ji(o,r))}),t.has(We.keyField().canonicalString())||e.ce.push(new ji(We.keyField(),r))}return e.ce}function Mt(n){let e=U(n);return e.le||(e.le=UL(e,us(n))),e.le}function UL(n,e){if(n.limitType==="F")return wy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ji(i.field,o)});let t=n.endAt?new Ln(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ln(n.startAt.position,n.startAt.inclusive):null;return wy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Iy(n,e){let t=n.filters.concat([e]);return new yn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Fd(n,e,t){return new yn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $c(n,e){return Uc(Mt(n),Mt(e))&&n.limitType===e.limitType}function qb(n){return`${Bi(Mt(n))}|lt:${n.limitType}`}function rs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Ub(i)).join(", ")}]`),Bc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>fs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>fs(i)).join(",")),`Target(${r})`}(Mt(n))}; limitType=${n.limitType})`}function Hc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of us(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=xT(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,us(r),i)||r.endAt&&!function(s,a,u){let l=xT(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,us(r),i))}(n,e)}function zb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Gb(n){return(e,t)=>{let r=!1;for(let i of us(n)){let o=$L(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function $L(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Wr(u,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var Vn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ki(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Pb(this.inner)}size(){return this.innerSize}};var HL=new Ne($.comparator);function Lt(){return HL}var Wb=new Ne($.comparator);function hc(...n){let e=Wb;for(let t of n)e=e.insert(t.key,t);return e}function Kb(n){let e=Wb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Nn(){return gc()}function Qb(){return gc()}function gc(){return new Vn(n=>n.toString(),(n,e)=>n.isEqual(e))}var qL=new Ne($.comparator),zL=new Ae($.comparator);function se(...n){let e=zL;for(let t of n)e=e.add(t);return e}var GL=new Ae(oe);function n_(){return GL}function r_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(e)?"-0":e}}function Yb(n){return{integerValue:""+n}}function Zb(n,e){return Ab(e)?Yb(e):r_(n,e)}var gs=class{constructor(){this._=void 0}};function WL(n,e,t){return n instanceof Kr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Eh(o)&&(o=Xv(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof ar?Xb(n,e):n instanceof cr?eS(n,e):function(i,o){let s=Jb(i,o),a=kT(s)+kT(i.Pe);return ly(s)&&ly(i.Pe)?Yb(a):r_(i.serializer,a)}(n,e)}function KL(n,e,t){return n instanceof ar?Xb(n,e):n instanceof cr?eS(n,e):t}function Jb(n,e){return n instanceof Qr?function(r){return ly(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Kr=class extends gs{},ar=class extends gs{constructor(e){super(),this.elements=e}};function Xb(n,e){let t=tS(e);for(let r of n.elements)t.some(i=>Fn(i,r))||t.push(r);return{arrayValue:{values:t}}}var cr=class extends gs{constructor(e){super(),this.elements=e}};function eS(n,e){let t=tS(e);for(let r of n.elements)t=t.filter(i=>!Fn(i,r));return{arrayValue:{values:t}}}var Qr=class extends gs{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function kT(n){return ke(n.integerValue||n.doubleValue)}function tS(n){return Cc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Ui=class{constructor(e,t){this.field=e,this.transform=t}};function QL(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ar&&i instanceof ar||r instanceof cr&&i instanceof cr?ds(r.elements,i.elements,Fn):r instanceof Qr&&i instanceof Qr?Fn(r.Pe,i.Pe):r instanceof Kr&&i instanceof Kr}(n.transform,e.transform)}var Ey=class{constructor(e,t){this.version=e,this.transformResults=t}},qe=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Dd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ms=class{};function nS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zr(n.key,qe.none()):new Yr(n.key,n.data,qe.none());{let t=n.data,r=yt.empty(),i=new Ae(We.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new vn(n.key,r,new Gt(i.toArray()),qe.none())}}function YL(n,e,t){n instanceof Yr?function(i,o,s){let a=i.value.clone(),u=FT(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof vn?function(i,o,s){if(!Dd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=FT(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(rS(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function mc(n,e,t,r){return n instanceof Yr?function(o,s,a,u){if(!Dd(o.precondition,s))return a;let l=o.value.clone(),h=LT(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof vn?function(o,s,a,u){if(!Dd(o.precondition,s))return a;let l=LT(o.fieldTransforms,u,s),h=s.data;return h.setAll(rS(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Dd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function ZL(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Jb(r.transform,i||null);o!=null&&(t===null&&(t=yt.empty()),t.set(r.field,o))}return t||null}function OT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ds(r,i,(o,s)=>QL(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Yr=class extends ms{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},vn=class extends ms{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function rS(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function FT(n,e,t){let r=new Map;K(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,KL(s,a,t[i]))}return r}function LT(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,WL(o,s,e))}return r}var Zr=class extends ms{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Tc=class extends ms{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var bc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&YL(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=mc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=mc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Qb();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=nS(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&ds(this.mutations,e.mutations,(t,r)=>OT(t,r))&&ds(this.baseMutations,e.baseMutations,(t,r)=>OT(t,r))}},Dy=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){K(e.mutations.length===r.length);let i=function(){return qL}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Sc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Cy=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Je,ye;function iS(n){switch(n){default:return z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function oS(n){if(n===void 0)return Ge("GRPC error has no .code"),x.UNKNOWN;switch(n){case Je.OK:return x.OK;case Je.CANCELLED:return x.CANCELLED;case Je.UNKNOWN:return x.UNKNOWN;case Je.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Je.INTERNAL:return x.INTERNAL;case Je.UNAVAILABLE:return x.UNAVAILABLE;case Je.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Je.NOT_FOUND:return x.NOT_FOUND;case Je.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Je.ABORTED:return x.ABORTED;case Je.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Je.DATA_LOSS:return x.DATA_LOSS;default:return z()}}(ye=Je||(Je={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var VT=null;function sS(){return new TextEncoder}var JL=new Fr([4294967295,4294967295],0);function jT(n){let e=sS().encode(n),t=new jm;return t.update(e),new Uint8Array(t.digest())}function BT(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Fr([t,r],0),new Fr([i,o],0)]}var Ty=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Oi(`Invalid padding: ${t}`);if(r<0)throw new Oi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Oi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Fr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Fr.fromNumber(r)));return i.compare(JL)===1&&(i=new Fr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=jT(e),[r,i]=BT(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=jT(e),[r,i]=BT(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Oi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ac=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,xc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Q.min(),i,new Ne(oe),Lt(),se())}},xc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,se(),se(),se())}};var ls=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Ld=class{constructor(e,t){this.targetId=e,this.me=t}},Vd=class{constructor(e,t,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},jd=class{constructor(){this.fe=0,this.ge=$T(),this.pe=Qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),t=se(),r=se();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new xc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=$T()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},by=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Lt(),this.qe=UT(),this.Qe=new Ne(oe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(kd(o))if(r===0){let s=new $(o.path);this.Ue(t,s,tt.newNoDocument(s,Q.min()))}else K(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}VT?.et(function(h,p,m,v,b){var R,N,B,q,F,J;let te={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},X=p.unchangedNames;return X&&(te.bloomFilter={applied:b===0,hashCount:(R=X?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(q=(B=(N=X?.bits)===null||N===void 0?void 0:N.bitmap)===null||B===void 0?void 0:B.length)!==null&&q!==void 0?q:0,padding:(J=(F=X?.bits)===null||F===void 0?void 0:F.padding)!==null&&J!==void 0?J:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),te}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=zr(r).toUint8Array()}catch(u){if(u instanceof Rd)return mn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Ty(s,i,o)}catch(u){return mn(u instanceof Oi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&kd(a.target)){let u=new $(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,tt.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=se();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Ac(e,t,this.Qe,this.ke,r);return this.ke=Lt(),this.qe=UT(),this.Qe=new Ne(oe),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new jd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ae(oe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new jd),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function UT(){return new Ne($.comparator)}function $T(){return new Ne($.comparator)}var XL={asc:"ASCENDING",desc:"DESCENDING"},eV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tV={and:"AND",or:"OR"},Sy=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Ay(n,e){return n.useProto3Json||Bc(e)?e:{value:e}}function ys(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function nV(n,e){return ys(n,e.toTimestamp())}function Ke(n){return K(!!n),Q.fromTimestamp(function(t){let r=sr(t);return new Ve(r.seconds,r.nanos)}(n))}function i_(n,e){return xy(n,e).canonicalString()}function xy(n,e){let t=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function cS(n){let e=ve.fromString(n);return K(vS(e)),e}function Mc(n,e){return i_(n.databaseId,e.path)}function kn(n,e){let t=cS(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(dS(t))}function uS(n,e){return i_(n.databaseId,e)}function lS(n){let e=cS(n);return e.length===4?ve.emptyPath():dS(e)}function My(n){return new ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dS(n){return K(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function HT(n,e,t){return{name:Mc(n,e),fields:t.value.mapValue.fields}}function hS(n,e,t){let r=kn(n,e.name),i=Ke(e.updateTime),o=e.createTime?Ke(e.createTime):Q.min(),s=new yt({mapValue:{fields:e.fields}}),a=tt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function rV(n,e){return"found"in e?function(r,i){K(!!i.found),i.found.name,i.found.updateTime;let o=kn(r,i.found.name),s=Ke(i.found.updateTime),a=i.found.createTime?Ke(i.found.createTime):Q.min(),u=new yt({mapValue:{fields:i.found.fields}});return tt.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){K(!!i.missing),K(!!i.readTime);let o=kn(r,i.missing),s=Ke(i.readTime);return tt.newNoDocument(o,s)}(n,e):z()}function iV(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(K(h===void 0||typeof h=="string"),Qe.fromBase64String(h||"")):(K(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Qe.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:oS(l.code);return new P(h,l.message||"")}(s);t=new Vd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=kn(n,r.document.name),o=Ke(r.document.updateTime),s=r.document.createTime?Ke(r.document.createTime):Q.min(),a=new yt({mapValue:{fields:r.document.fields}}),u=tt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ls(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=kn(n,r.document),o=r.readTime?Ke(r.readTime):Q.min(),s=tt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ls([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=kn(n,r.document),o=r.removedTargetIds||[];t=new ls([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Cy(i,o),a=r.targetId;t=new Ld(a,s)}}return t}function Rc(n,e){let t;if(e instanceof Yr)t={update:HT(n,e.key,e.value)};else if(e instanceof Zr)t={delete:Mc(n,e.key)};else if(e instanceof vn)t={update:HT(n,e.key,e.data),updateMask:lV(e.fieldMask)};else{if(!(e instanceof Tc))return z();t={verify:Mc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Kr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ar)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof cr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:nV(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function Ry(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?qe.updateTime(Ke(o.updateTime)):o.exists!==void 0?qe.exists(o.exists):qe.none()}(e.currentDocument):qe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)K(a.setToServerValue==="REQUEST_TIME"),u=new Kr;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new ar(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new cr(h)}else"increment"in a?u=new Qr(s,a.increment):z();let l=We.fromServerFormat(a.fieldPath);return new Ui(l,u)}(n,i)):[];if(e.update){e.update.name;let i=kn(n,e.update.name),o=new yt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Gt(l.map(h=>We.fromServerFormat(h)))}(e.updateMask);return new vn(i,o,s,t,r)}return new Yr(i,o,t,r)}if(e.delete){let i=kn(n,e.delete);return new Zr(i,t)}if(e.verify){let i=kn(n,e.verify);return new Tc(i,t)}return z()}function oV(n,e){return n&&n.length>0?(K(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ke(i.updateTime):Ke(o);return s.isEqual(Q.min())&&(s=Ke(o)),new Ey(s,i.transformResults||[])}(t,e))):[]}function fS(n,e){return{documents:[uS(n,e.path)]}}function pS(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=uS(n,i);let o=function(l){if(l.length!==0)return yS(Te.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:is(m.field),direction:aV(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Ay(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function gS(n){let e=lS(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){K(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=mS(p);return m instanceof Te&&e_(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new ji(os(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Bc(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,v=p.values||[];return new Ln(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new Ln(v,m)}(t.endAt)),Hb(e,i,s,o,a,"F",u,l)}function sV(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=os(t.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=os(t.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=os(t.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=os(t.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return fe.create(os(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Te.create(t.compositeFilter.filters.map(r=>mS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function aV(n){return XL[n]}function cV(n){return eV[n]}function uV(n){return tV[n]}function is(n){return{fieldPath:n.canonicalString()}}function os(n){return We.fromServerFormat(n.fieldPath)}function yS(n){return n instanceof fe?function(t){if(t.op==="=="){if(bT(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NAN"}};if(TT(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(bT(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NOT_NAN"}};if(TT(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:is(t.field),op:cV(t.op),value:t.value}}}(n):n instanceof Te?function(t){let r=t.getFilters().map(i=>yS(i));return r.length===1?r[0]:{compositeFilter:{op:uV(t.op),filters:r}}}(n):z()}function lV(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var vs=class n{constructor(e,t,r,i,o=Q.min(),s=Q.min(),a=Qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Bd=class{constructor(e){this.ct=e}};function dV(n,e){let t;if(e.document)t=hS(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=Hi(e.noDocument.readTime);t=tt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=$.fromSegments(e.unknownDocument.path),i=Hi(e.unknownDocument.version);t=tt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ve(i[0],i[1]);return Q.fromTimestamp(o)}(e.readTime)),t}function qT(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ud(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Mc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ys(o,s.version.toTimestamp()),createTime:ys(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:$i(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:$i(e.version)}}return r}function Ud(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function $i(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hi(n){let e=new Ve(n.seconds,n.nanoseconds);return Q.fromTimestamp(e)}function Ni(n,e){let t=(e.baseMutations||[]).map(o=>Ry(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Ry(n.ct,o)),i=Ve.fromMillis(e.localWriteTimeMs);return new bc(e.batchId,i,t,r)}function fc(n){let e=Hi(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Hi(n.lastLimboFreeSnapshotVersion):Q.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return K(o.documents.length===1),Mt(xs(lS(o.documents[0])))}(n.query):function(o){return Mt(gS(o))}(n.query),new vs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Qe.fromBase64String(n.resumeToken))}function _S(n,e){let t=$i(e.snapshotVersion),r=$i(e.lastLimboFreeSnapshotVersion),i;i=kd(e.target)?fS(n.ct,e.target):pS(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bi(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function o_(n){let e=gS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Fd(e,e.limit,"L"):e}function zm(n,e){return new Sc(e.largestBatchId,Ry(n.ct,e.overlayMutation))}function zT(n,e){let t=e.path.lastSegment();return[n,xt(e.path.popLast()),t]}function GT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:$i(r.readTime),documentKey:xt(r.documentKey.path),largestBatchId:r.largestBatchId}}var Ny=class{getBundleMetadata(e,t){return WT(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Hi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return WT(e).put(function(i){return{bundleId:i.id,createTime:$i(Ke(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return KT(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:o_(o.bundledQuery),readTime:Hi(o.readTime)}}(r)})}saveNamedQuery(e,t){return KT(e).put(function(i){return{name:i.name,readTime:$i(Ke(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function WT(n){return it(n,"bundles")}function KT(n){return it(n,"namedQueries")}var $d=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return cc(e).get(zT(this.userId,t)).next(r=>r?zm(this.serializer,r):null)}getOverlays(e,t){let r=Nn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Sc(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(xt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(cc(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Nn(),o=xt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return cc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=zm(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Nn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cc(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let p=zm(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return cc(e).put(function(i,o,s){let[a,u,l]=zT(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Rc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function cc(n){return it(n,"documentOverlays")}var Py=class{Pt(e){return it(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Qe.fromUint8Array(r):Qe.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var ir=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ke(e.integerValue));else if("doubleValue"in e){let r=ke(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),wc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=sr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(zr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Ob(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Dh(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ke(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};ir.vt=new ir;function hV(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function QT(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=hV(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var ky=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=QT(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=QT(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Oy=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Fy=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Pi=class{constructor(){this.jt=new ky,this.Ht=new Oy(this.jt),this.Jt=new Fy(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var ki=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Lr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=YT(n.arrayValue,e.arrayValue),t!==0?t:(t=YT(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function YT(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Hd=class{constructor(e){this.Xt=new Ae((t,r)=>We.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(K(e.collectionGroup===this.collectionId),this.nn)return!1;let t=ry(e);if(t!==void 0&&!this.sn(t))return!1;let r=Mi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ae(We.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new cs(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new cs(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new cs(r.field,r.dir==="asc"?0:1)));return new hs(hs.UNKNOWN_ID,this.collectionId,t,_c.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function wS(n){var e,t;if(K(n instanceof fe||n instanceof Te),n instanceof fe){if(n instanceof Pd){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>fe.create(n.field,"==",o)))||[];return Te.create(i,"or")}return n}let r=n.filters.map(i=>wS(i));return Te.create(r,n.op)}function fV(n){if(n.getFilters().length===0)return[];let e=jy(wS(n));return K(IS(e)),Ly(e)||Vy(e)?[e]:e.getFilters()}function Ly(n){return n instanceof fe}function Vy(n){return n instanceof Te&&e_(n)}function IS(n){return Ly(n)||Vy(n)||function(t){if(t instanceof Te&&dy(t)){for(let r of t.getFilters())if(!Ly(r)&&!Vy(r))return!1;return!0}return!1}(n)}function jy(n){if(K(n instanceof fe||n instanceof Te),n instanceof fe)return n;if(n.filters.length===1)return jy(n.filters[0]);let e=n.filters.map(r=>jy(r)),t=Te.create(e,n.op);return t=qd(t),IS(t)?t:(K(t instanceof Te),K(ps(t)),K(t.filters.length>1),t.filters.reduce((r,i)=>s_(r,i)))}function s_(n,e){let t;return K(n instanceof fe||n instanceof Te),K(e instanceof fe||e instanceof Te),t=n instanceof fe?e instanceof fe?function(i,o){return Te.create([i,o],"and")}(n,e):ZT(n,e):e instanceof fe?ZT(e,n):function(i,o){if(K(i.filters.length>0&&o.filters.length>0),ps(i)&&ps(o))return Bb(i,o.getFilters());let s=dy(i)?i:o,a=dy(i)?o:i,u=s.filters.map(l=>s_(l,a));return Te.create(u,"or")}(n,e),qd(t)}function ZT(n,e){if(ps(e))return Bb(e,n.getFilters());{let t=e.filters.map(r=>s_(n,r));return Te.create(t,"or")}}function qd(n){if(K(n instanceof fe||n instanceof Te),n instanceof fe)return n;let e=n.getFilters();if(e.length===1)return qd(e[0]);if(Vb(n))return n;let t=e.map(i=>qd(i)),r=[];return t.forEach(i=>{i instanceof fe?r.push(i):i instanceof Te&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Te.create(r,n.op)}var By=class{constructor(){this.un=new Nc}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(rn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(rn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Nc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ae(ve.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(ve.comparator)).toArray()}};var md=new Uint8Array(0),Uy=class{constructor(e,t){this.databaseId=t,this.cn=new Nc,this.ln=new Vn(r=>Bi(r),(r,i)=>Uc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:xt(i)};return JT(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[Db(t),""],!1,!0);return JT(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Rn(s.parent))}return r})}addFieldIndex(e,t){let r=uc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=es(e);return o.next(a=>{s.put(GT(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=uc(e),i=es(e),o=Xo(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=uc(e),r=Xo(e),i=es(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Hd(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Xo(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=se(),a=[];return S.forEach(o,(u,l)=>{k("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(J=>`${J.fieldPath}:${J.kind}`).join(",")}`}(u)} to execute ${Bi(t)}`);let h=function(F,J){let te=ry(J);if(te===void 0)return null;for(let X of Od(F,te.fieldPath))switch(X.op){case"array-contains-any":return X.value.arrayValue.values||[];case"array-contains":return[X.value]}return null}(l,u),p=function(F,J){let te=new Map;for(let X of Mi(J))for(let I of Od(F,X.fieldPath))switch(I.op){case"==":case"in":te.set(X.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return te.set(X.fieldPath.canonicalString(),I.value),Array.from(te.values())}return null}(l,u),m=function(F,J){let te=[],X=!0;for(let I of Mi(J)){let y=I.kind===0?RT(F,I.fieldPath,F.startAt):NT(F,I.fieldPath,F.startAt);te.push(y.value),X&&(X=y.inclusive)}return new Ln(te,X)}(l,u),v=function(F,J){let te=[],X=!0;for(let I of Mi(J)){let y=I.kind===0?NT(F,I.fieldPath,F.endAt):RT(F,I.fieldPath,F.endAt);te.push(y.value),X&&(X=y.inclusive)}return new Ln(te,X)}(l,u),b=this.In(u,l,m),R=this.In(u,l,v),N=this.Tn(u,l,p),B=this.En(u.indexId,h,b,m.inclusive,R,v.inclusive,N);return S.forEach(B,q=>r.G(q,t.limit).next(F=>{F.forEach(J=>{let te=$.fromSegments(J.documentKey);s.has(te)||(s=s.add(te),a.push(te))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=fV(Te.create(e.filters,"and")).map(r=>wy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let p=0;p<u;++p){let m=t?this.dn(t[p/l]):md,v=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),R=a.map(N=>this.An(e,m,N,!0));h.push(...this.createRange(v,b,R))}return h}An(e,t,r,i){let o=new ki(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new ki(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Hd(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Ae(We.comparator),h=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Pi;for(let i of Mi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);ir.vt.It(o,s)}return r.zt()}dn(e){let t=new Pi;return ir.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Pi;return ir.vt.It(Vi(this.databaseId,t),r.Yt(function(o){let s=Mi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Pi);let o=0;for(let s of Mi(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&Cc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);ir.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Pi;u.seed(a.zt()),ir.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=uc(e),i=es(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,p){let m=p?new _c(p.sequenceNumber,new rn(Hi(p.readTime),new $(Rn(p.documentKey)),p.largestBatchId)):_c.empty(),v=h.fields.map(([b,R])=>new cs(We.fromServerFormat(b),R));return new hs(h.indexId,h.collectionGroup,v,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:oe(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=uc(e),o=es(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(GT(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?S.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return Xo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Xo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Xo(e),o=new Ae(Lr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new ki(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Ae(Lr),i=this.Vn(t,e);if(i==null)return r;let o=ry(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Cc(s))for(let a of s.arrayValue.values||[])r=r.add(new ki(t.indexId,e.key,this.dn(a),i))}else r=r.add(new ki(t.indexId,e.key,md,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,p,m){let v=u.getIterator(),b=l.getIterator(),R=Jo(v),N=Jo(b);for(;R||N;){let B=!1,q=!1;if(R&&N){let F=h(R,N);F<0?q=!0:F>0&&(B=!0)}else R!=null?q=!0:B=!0;B?(p(N),N=Jo(b)):q?(m(R),R=Jo(v)):(R=Jo(v),N=Jo(b))}}(i,o,Lr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return es(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Lr(s,a)).filter((s,a,u)=>!a||Lr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Lr(s,e),u=Lr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,md,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,md,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return Lr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(XT)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(XT)}};function JT(n){return it(n,"collectionParents")}function Xo(n){return it(n,"indexEntries")}function uc(n){return it(n,"indexConfiguration")}function es(n){return it(n,"indexState")}function XT(n){K(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Yv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new rn(e.readTime,e.documentKey,t)}var eb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function ES(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(u.next(()=>{K(a===1)}));let l=[];for(let h of t.mutations){let p=xb(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function zd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(41943040,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);var Gd=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){K(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=ss(e),s=Vr(e);return s.add({}).next(a=>{K(typeof a=="number");let u=new bc(a,t,r,i),l=function(v,b,R){let N=R.baseMutations.map(q=>Rc(v.ct,q)),B=R.mutations.map(q=>Rc(v.ct,q));return{userId:b,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:N,mutations:B}}(this.serializer,this.userId,u),h=[],p=new Ae((m,v)=>oe(m.canonicalString(),v.canonicalString()));for(let m of i){let v=xb(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,_L))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),S.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return Vr(e).get(t).next(r=>r?(K(r.userId===this.userId),Ni(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Vr(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(K(a.batchId>=r),o=Ni(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Vr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).U("userMutationsIndex",t).next(r=>r.map(i=>Ni(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=wd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return ss(e).J({range:i},(s,a,u)=>{let[l,h,p]=s,m=Rn(h);if(l===this.userId&&t.path.isEqual(m))return Vr(e).get(p).next(v=>{if(!v)throw z();K(v.userId===this.userId),o.push(Ni(this.serializer,v))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(oe),i=[];return t.forEach(o=>{let s=wd(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=ss(e).J({range:a},(l,h,p)=>{let[m,v,b]=l,R=Rn(v);m===this.userId&&o.path.isEqual(R)?r=r.add(b):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=wd(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ae(oe);return ss(e).J({range:s},(u,l,h)=>{let[p,m,v]=u,b=Rn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Vr(e).get(o).next(s=>{if(s===null)throw z();K(s.userId===this.userId),r.push(Ni(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return ES(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return ss(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Rn(o[1]);i.push(u)}else a.done()}).next(()=>{K(i.length===0)})})}containsKey(e,t){return DS(e,this.userId,t)}Nn(e){return CS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function DS(n,e,t){let r=wd(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ss(n).J({range:o,H:!0},(a,u,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function Vr(n){return it(n,"mutations")}function ss(n){return it(n,"documentMutations")}function CS(n){return it(n,"mutationQueues")}var _s=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var $y=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new _s(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Q.fromTimestamp(new Ve(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ts(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(K(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return ts(e).J((s,a)=>{let u=fc(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return ts(e).J((r,i)=>{let o=fc(i);t(o)})}qn(e){return tb(e).get("targetGlobalKey").next(t=>(K(t!==null),t))}Qn(e,t){return tb(e).put("targetGlobalKey",t)}Kn(e,t){return ts(e).put(_S(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Bi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ts(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=fc(a);Uc(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=jr(e);return t.forEach(s=>{let a=xt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=jr(e);return S.forEach(t,o=>{let s=xt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=jr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=jr(e),o=se();return i.J({range:r,H:!0},(s,a,u)=>{let l=Rn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=xt(t.path),i=IDBKeyRange.bound([r],[Db(r)],!1,!0),o=0;return jr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return ts(e).get(t).next(r=>r?fc(r):null)}};function ts(n){return it(n,"targets")}function tb(n){return it(n,"targetGlobal")}function jr(n){return it(n,"targetDocuments")}function nb([n,e],[t,r]){let i=oe(n,t);return i===0?oe(e,r):i}var Hy=class{constructor(e){this.Un=e,this.buffer=new Ae(nb),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();nb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},qy=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>M(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ei(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Xr(t)}yield this.Hn(3e5)}))}},zy=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(zt.oe);let r=new Hy(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(eb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eb):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ns()<=In.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function pV(n,e){return new zy(n,e)}var Gy=class{constructor(e,t){this.db=e,this.garbageCollector=pV(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return yd(e,r)}removeReference(e,t,r){return yd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return yd(e,t)}nr(e,t){return function(i,o){let s=!1;return CS(i).Y(a=>DS(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Q.min()),jr(e).delete(function(p){return[0,xt(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return yd(e,t)}tr(e,t){let r=jr(e),i,o=zt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==zt.oe&&t(new $(Rn(i)),o),o=l,i=u):o=zt.oe}).next(()=>{o!==zt.oe&&t(new $(Rn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function yd(n,e){return jr(n).put(function(r,i){return{targetId:0,path:xt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Wd=class{constructor(){this.changes=new Vn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Wy=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return xi(e).put(r)}removeEntry(e,t,r){return xi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ud(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=tt.newInvalidDocument(t);return xi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(lc(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:tt.newInvalidDocument(t)};return xi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(lc(t))},(i,o)=>{r={document:this.ir(t,o),size:zd(o)}}).next(()=>r)}getEntries(e,t){let r=Lt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Lt(),i=new Ne($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,zd(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Ae(ob);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(lc(i.first()),lc(i.last())),s=i.getIterator(),a=s.getNext();return xi(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&ob(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(lc(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Ud(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xi(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Lt();for(let p of l){let m=this.ir($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Hc(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Lt(),s=ib(t,r),a=ib(t,rn.max());return xi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let p=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new Ky(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return rb(e).get("remoteDocumentGlobalKey").next(t=>(K(!!t),t))}rr(e,t){return rb(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=dV(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Q.min())))return r}return tt.newInvalidDocument(e)}};function TS(n){return new Wy(n)}var Ky=class extends Wd{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Vn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ae((o,s)=>oe(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=qT(this.cr.serializer,s);i=i.add(o.path.popLast());let l=zd(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=qT(this.cr.serializer,s.convertToNoDocument(Q.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function rb(n){return it(n,"remoteDocumentGlobal")}function xi(n){return it(n,"remoteDocumentsV14")}function lc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ib(n,e){let t=e.documentKey.path.toArray();return[n,Ud(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ob(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=oe(t[o],r[o]),i)return i;return i=oe(t.length,r.length),i||(i=oe(t[t.length-2],r[r.length-2]),i||oe(t[t.length-1],r[r.length-1]))}var Qy=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Kd=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&mc(r.mutation,i,Gt.empty(),Ve.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=se()){let i=Nn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=hc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Nn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Lt(),s=gc(),a=function(){return gc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof vn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),mc(h.mutation,l,h.mutation.getFieldMask(),Ve.now())):s.set(l.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new Qy(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=gc(),i=new Ne((s,a)=>s-a),o=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Gt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||se()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=Qb();h.forEach(m=>{if(!o.has(m)){let v=nS(t.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):t_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Nn()),a=-1,u=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,se())).next(h=>({batchId:a,changes:Kb(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=hc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=hc();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,m){return new yn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,tt.newInvalidDocument(h)))});let a=hc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&mc(h.mutation,l,Gt.empty(),Ve.now()),Hc(t,l)&&(a=a.insert(u,l))}),a})}};var Yy=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ke(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:o_(i.bundledQuery),readTime:Ke(i.readTime)}}(t)),S.resolve()}};var Zy=class{constructor(){this.overlays=new Ne($.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Nn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Nn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ne((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Nn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Nn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Sc(t,r));let o=this.Ir.get(t);o===void 0&&(o=se(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Jy=class{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Pc=class{constructor(){this.Tr=new Ae(Xe.Er),this.dr=new Ae(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Xe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Xe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new ve([])),r=new Xe(t,e),i=new Xe(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new ve([])),r=new Xe(t,e),i=new Xe(t,e+1),o=se();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Xe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Xe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||oe(e.wr,t.wr)}static Ar(e,t){return oe(e.wr,t.wr)||$.comparator(e.key,t.key)}};var Xy=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ae(Xe.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new bc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Xe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Xe(t,0),i=new Xe(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(oe);return t.forEach(i=>{let o=new Xe(i,0),s=new Xe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Xe(new $(o),0),a=new Ae(oe);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){K(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new Xe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Xe(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ev=class{constructor(e){this.Mr=e,this.docs=function(){return new Ne($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(t))}getEntries(e,t){let r=Lt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():tt.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Lt(),s=t.path,a=new $(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Yv(Tb(h),r)<=0||(i.has(h.key)||Hc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new tv(this)}getSize(e){return S.resolve(this.size)}},tv=class extends Wd{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var nv=class{constructor(e){this.persistence=e,this.Nr=new Vn(t=>Bi(t),Uc),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pc,this.targetCount=0,this.kr=_s.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new _s(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var Qd=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new zt(0),this.Kr=!1,this.Kr=!0,this.$r=new Jy,this.referenceDelegate=e(this),this.Ur=new nv(this),this.indexManager=new By,this.remoteDocumentCache=function(i){return new ev(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Bd(t),this.Gr=new Yy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Zy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Xy(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new rv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},rv=class extends Ad{constructor(e){super(),this.currentSequenceNumber=e}},Yd=class n{constructor(e){this.persistence=e,this.Jr=new Pc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Q.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var iv=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new xd("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IT,{unique:!0}),u.createObjectStore("documentMutations")}(e),sb(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),sb(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Q.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IT,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:RL});l.createIndex("collectionPathOverlayIndex",NL,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",PL,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:wL});l.createIndex("documentKeyIndex",IL),l.createIndex("collectionGroupIndex",EL)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:SL}).createIndex("sequenceNumberIndex",AL,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:xL}).createIndex("documentKeyIndex",ML,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=zd(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,u=>{K(u.userId===o.userId);let l=Ni(this.serializer,u);return ES(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new ve(s),l=function(p){return[0,xt(p)]}(u);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:xt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:bL});let r=t.store("collectionParents"),i=new Nc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:xt(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new ve(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=Rn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=fc(i),s=_S(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(p){return p.document?new $(ve.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=TS(this.serializer),o=new Qd(Yd.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:se();Ni(this.serializer,u).keys().forEach(p=>h=h.add(p)),a.set(u.userId,h)}),S.forEach(a,(u,l)=>{let h=new et(l),p=$d.lt(this.serializer,h),m=o.getIndexManager(h),v=Gd.lt(h,this.serializer,m,o.referenceDelegate);return new Kd(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Ic(t,zt.oe),u).next()})})}};function sb(n){n.createObjectStore("targetDocuments",{keyPath:CL}).createIndex("documentTargetsIndex",TL,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",DL,{unique:!0}),n.createObjectStore("targetGlobal")}var Gm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ov=class n{constructor(e,t,r,i,o,s,a,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Gy(this,i),this.Ai=t+"main",this.serializer=new Bd(u),this.Ri=new qr(this.Ai,this.hi,new iv(this.serializer)),this.$r=new Py,this.Ur=new $y(this.referenceDelegate,this.serializer),this.remoteDocumentCache=TS(this.serializer),this.Gr=new Ny,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Ge("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Gm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new zt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>M(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>M(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>M(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(ei(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return dc(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return vd(e).delete(this.clientId)}Fi(){return M(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=it(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):dc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Gm);return!1}}return!(!this.networkEnabled||!this.inForeground)||vd(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return M(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Ic(e,zt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>vd(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Gd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Uy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return $d.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?FL:u===16?OL:u===15?Jv:u===14?Nb:u===13?Rb:u===12?kL:u===11?Mb:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Ic(a,this.Qr?this.Qr.next():zt.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Ge(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,bb);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return dc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,Gm)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dc(e).put("owner",t)}static D(){return qr.D()}bi(e){let t=dc(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ge(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;hf()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ge("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ge("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function dc(n){return it(n,"owner")}function vd(n){return it(n,"clientMetadata")}function a_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var sv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=se(),i=se();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var av=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Zd=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hf()?8:Sb(ra())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new av;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ns()<=In.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",rs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(ns()<=In.DEBUG&&k("QueryEngine","Query:",rs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ns()<=In.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",rs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mt(t))):S.resolve())}Yi(e,t){if(PT(t))return S.resolve(null);let r=Mt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Fd(t,null,"F"),r=Mt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=se(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,Fd(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return PT(t)||i.isEqual(Q.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(ns()<=In.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rs(t)),this.rs(e,s,t,Cb(i,-1)).next(a=>a))})}ts(e,t){let r=new Ae(Gb(e));return t.forEach((i,o)=>{Hc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return ns()<=In.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",rs(t)),this.Ji.getDocumentsMatchingQuery(e,t,rn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var cv=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ne(oe),this._s=new Vn(o=>Bi(o),Uc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Kd(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function bS(n,e,t,r){return new cv(n,e,t,r)}function SS(n,e){return M(this,null,function*(){let t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=se();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function gV(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),v=S.resolve();return m.forEach(b=>{v=v.next(()=>h.getEntry(u,b)).next(R=>{let N=l.docVersions.get(b);K(N!==null),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=se();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function AS(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function mV(n,e){let t=U(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Qe.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(R,N,B){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(o,v))});let u=Lt(),l=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(xS(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(Q.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function xS(n,e,t){let r=se(),i=se();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Lt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Q.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function yV(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ws(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new vs(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Is(n,e,t){return M(this,null,function*(){let r=U(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ei(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Jd(n,e,t){let r=U(n),i=Q.min(),o=se();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=U(u),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,Mt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:Q.min(),t?o:se())).next(a=>(NS(r,zb(e),a),{documents:a,Ts:o})))}function MS(n,e){let t=U(n),r=U(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function RS(n,e){let t=U(n),r=t.us.get(e)||Q.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,Cb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(NS(t,e,i),i))}function NS(n,e,t){let r=n.us.get(e)||Q.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function vV(n,e,t,r){return M(this,null,function*(){let i=U(n),o=se(),s=Lt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield ws(i,function(h){return Mt(xs(ve.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>xS(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function _V(r,i){return M(this,arguments,function*(n,e,t=se()){let o=yield ws(n,Mt(o_(e.bundledQuery))),s=U(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Ke(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Qe.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function ab(n,e){return`firestore_clients_${n}_${e}`}function cb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Wm(n,e){return`firestore_targets_${n}_${e}`}var Xd=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Ge("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},yc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(Ge("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},eh=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=n_();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=Ab(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Ge("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},uv=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Ge("SharedClientState",`Failed to parse online state: ${e}`),null)}},kc=class{constructor(){this.activeTargetIds=n_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},vc=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ne(oe),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=ab(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new kc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return M(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(ab(this.persistenceKey,r));if(i){let o=eh.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Wm(this.persistenceKey,e));if(i){let o=yc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Wm(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ge("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>M(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=zt.oe;if(o!=null)try{let a=JSON.parse(o);K(typeof a=="number"),s=a}catch(a){Ge("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==zt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Xd(this.currentUser,e,t,r),o=cb(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=cb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Wm(this.persistenceKey,e),o=new yc(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return eh.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Xd.Rs(new et(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return yc.Rs(i,t)}Ls(e){return uv.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return M(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=n_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},th=class{constructor(){this.so=new kc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new kc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var lv=class{_o(e){}shutdown(){}};var nh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var _d=null;function Km(){return _d===null?_d=function(){return 268435456+Math.round(2147483648*Math.random())}():_d++,"0x"+_d.toString(16)}var wV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var dv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var mt="WebChannelConnection",hv=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Km(),u=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw mn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+As}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=wV[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Km();return new Promise((s,a)=>{let u=new Bm;u.setWithCredentials(!0),u.listenOnce(Um.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ac.NO_ERROR:let h=u.getResponseJson();k(mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case ac.TIMEOUT:k(mt,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case ac.HTTP_ERROR:let p=u.getStatus();if(k(mt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let b=function(N){let B=N.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(B)>=0?B:x.UNKNOWN}(v.status);a(new P(b,v.message))}else a(new P(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{k(mt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(mt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Km(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=qm(),a=Hm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");k(mt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,v=!1,b=new dv({Io:N=>{v?k(mt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(k(mt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(mt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),R=(N,B,q)=>{N.listen(B,F=>{try{q(F)}catch(J){setTimeout(()=>{throw J},0)}})};return R(p,Zo.EventType.OPEN,()=>{v||(k(mt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),R(p,Zo.EventType.CLOSE,()=>{v||(v=!0,k(mt,`RPC '${e}' stream ${i} transport closed`),b.So())}),R(p,Zo.EventType.ERROR,N=>{v||(v=!0,mn(mt,`RPC '${e}' stream ${i} transport errored:`,N),b.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),R(p,Zo.EventType.MESSAGE,N=>{var B;if(!v){let q=N.data[0];K(!!q);let F=q,J=F.error||((B=F[0])===null||B===void 0?void 0:B.error);if(J){k(mt,`RPC '${e}' stream ${i} received error:`,J);let te=J.status,X=function(w){let E=Je[w];if(E!==void 0)return oS(E)}(te),I=J.message;X===void 0&&(X=x.INTERNAL,I="Unknown error status: "+te+" with message "+J.message),v=!0,b.So(new P(X,I)),p.close()}else k(mt,`RPC '${e}' stream ${i} received:`,q),b.bo(q)}}),R(a,$m.STAT_EVENT,N=>{N.stat===gd.PROXY?k(mt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===gd.NOPROXY&&k(mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function PS(){return typeof window<"u"?window:null}function Cd(){return typeof document<"u"?document:null}function qc(n){return new Sy(n,!0)}var Oc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var rh=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Oc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return M(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return M(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return M(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(Ge(t.toString()),Ge("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>M(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},fv=class extends rh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=iV(this.serializer,e),r=function(o){if(!("targetChange"in o))return Q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Q.min():s.readTime?Ke(s.readTime):Q.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=My(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=kd(u)?{documents:fS(o,u)}:{query:pS(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=aS(o,s.resumeToken);let l=Ay(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Q.min())>0){a.readTime=ys(o,s.snapshotVersion.toTimestamp());let l=Ay(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=sV(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=My(this.serializer),t.removeTarget=e,this.a_(t)}},pv=class extends rh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return K(!!e.streamToken),this.lastStreamToken=e.streamToken,K(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=oV(e.writeResults,e.commitTime),r=Ke(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=My(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Rc(this.serializer,r))};this.a_(t)}};var gv=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,xy(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,xy(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},mv=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ge(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var yv=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>M(this,null,function*(){ti(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return M(this,null,function*(){let l=U(u);l.L_.add(4),yield Ms(l),l.q_.set("Unknown"),l.L_.delete(4),yield zc(l)})}(this))}))}),this.q_=new mv(r,i)}};function zc(n){return M(this,null,function*(){if(ti(n))for(let e of n.B_)yield e(!0)})}function Ms(n){return M(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Ch(n,e){let t=U(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),l_(t)?u_(t):Ns(t).r_()&&c_(t,e))}function Es(n,e){let t=U(n),r=Ns(t);t.N_.delete(e),r.r_()&&kS(t,e),t.N_.size===0&&(r.r_()?r.o_():ti(t)&&t.q_.set("Unknown"))}function c_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ns(n).A_(e)}function kS(n,e){n.Q_.xe(e),Ns(n).R_(e)}function u_(n){n.Q_=new by({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ns(n).start(),n.q_.v_()}function l_(n){return ti(n)&&!Ns(n).n_()&&n.N_.size>0}function ti(n){return U(n).L_.size===0}function OS(n){n.Q_=void 0}function IV(n){return M(this,null,function*(){n.q_.set("Online")})}function EV(n){return M(this,null,function*(){n.N_.forEach((e,t)=>{c_(n,e)})})}function DV(n,e){return M(this,null,function*(){OS(n),l_(n)?(n.q_.M_(e),u_(n)):n.q_.set("Unknown")})}function CV(n,e,t){return M(this,null,function*(){if(n.q_.set("Online"),e instanceof Vd&&e.state===2&&e.cause)try{yield function(i,o){return M(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ih(n,r)}else if(e instanceof ls?n.Q_.Ke(e):e instanceof Ld?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Q.min()))try{let r=yield AS(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(Qe.EMPTY_BYTE_STRING,h.snapshotVersion)),kS(o,u);let p=new vs(h.target,u,l,h.sequenceNumber);c_(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield ih(n,r)}})}function ih(n,e,t){return M(this,null,function*(){if(!ei(e))throw e;n.L_.add(1),yield Ms(n),n.q_.set("Offline"),t||(t=()=>AS(n.localStore)),n.asyncQueue.enqueueRetryable(()=>M(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield zc(n)}))})}function FS(n,e){return e().catch(t=>ih(n,t,e))}function Rs(n){return M(this,null,function*(){let e=U(n),t=Jr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;TV(e);)try{let i=yield yV(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,bV(e,i)}catch(i){yield ih(e,i)}LS(e)&&VS(e)})}function TV(n){return ti(n)&&n.O_.length<10}function bV(n,e){n.O_.push(e);let t=Jr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function LS(n){return ti(n)&&!Jr(n).n_()&&n.O_.length>0}function VS(n){Jr(n).start()}function SV(n){return M(this,null,function*(){Jr(n).p_()})}function AV(n){return M(this,null,function*(){let e=Jr(n);for(let t of n.O_)e.m_(t.mutations)})}function xV(n,e,t){return M(this,null,function*(){let r=n.O_.shift(),i=Dy.from(r,e,t);yield FS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Rs(n)})}function MV(n,e){return M(this,null,function*(){e&&Jr(n).V_&&(yield function(r,i){return M(this,null,function*(){if(function(s){return iS(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();Jr(r).s_(),yield FS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Rs(r)}})}(n,e)),LS(n)&&VS(n)})}function ub(n,e){return M(this,null,function*(){let t=U(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=ti(t);t.L_.add(3),yield Ms(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield zc(t)})}function vv(n,e){return M(this,null,function*(){let t=U(n);e?(t.L_.delete(2),yield zc(t)):e||(t.L_.add(2),yield Ms(t),t.q_.set("Unknown"))})}function Ns(n){return n.K_||(n.K_=function(t,r,i){let o=U(t);return o.w_(),new fv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:IV.bind(null,n),Ro:EV.bind(null,n),mo:DV.bind(null,n),d_:CV.bind(null,n)}),n.B_.push(e=>M(this,null,function*(){e?(n.K_.s_(),l_(n)?u_(n):n.q_.set("Unknown")):(yield n.K_.stop(),OS(n))}))),n.K_}function Jr(n){return n.U_||(n.U_=function(t,r,i){let o=U(t);return o.w_(),new pv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:SV.bind(null,n),mo:MV.bind(null,n),f_:AV.bind(null,n),g_:xV.bind(null,n)}),n.B_.push(e=>M(this,null,function*(){e?(n.U_.s_(),yield Rs(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var _v=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ps(n,e){if(Ge("AsyncQueue",`${e}: ${n}`),ei(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var oh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=hc(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var sh=class{constructor(){this.W_=new Ne($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ds=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,oh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var wv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Iv=class{constructor(){this.queries=lb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=U(t),o=i.queries;i.queries=lb(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function lb(){return new Vn(n=>qb(n),$c)}function d_(n,e){return M(this,null,function*(){let t=U(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new wv,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Ps(s,`Initialization of query '${rs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&f_(t)})}function h_(n,e){return M(this,null,function*(){let t=U(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function RV(n,e){let t=U(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&f_(t)}function NV(n,e,t){let r=U(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function f_(n){n.Y_.forEach(e=>{e.next()})}var Ev,db;(db=Ev||(Ev={})).ea="default",db.Cache="cache";var Fc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ds(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ds.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ev.Cache}};var Dv=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var ah=class{constructor(e){this.serializer=e}Es(e){return kn(this.serializer,e)}ds(e){return e.metadata.exists?hS(this.serializer,e.document,!1):tt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ke(e)}},Cv=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jS(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ve.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new ah(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||se()).add(o);t.set(s,a)}}return t}complete(){return M(this,null,function*(){let e=yield vV(this.localStore,new ah(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield _V(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function jS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var ch=class{constructor(e){this.key=e}},uh=class{constructor(e){this.key=e}},lh=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=Gb(e),this.Ra=new oh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new sh,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=Hc(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),R=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),N=!1;m&&v?m.data.isEqual(v.data)?b!==R&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(u&&this.Aa(v,u)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(a=!0)),N&&(v?(s=s.add(v),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(v,b){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return R(v)-R(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Ds(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new sh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new uh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new ch(r))}),t}ba(e){this.Ta=e.Ts,this.da=se();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ds.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Tv=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},bv=class{constructor(e){this.key=e,this.va=!1}},Sv=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Vn(a=>qb(a),$c),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne($.comparator),this.Na=new Map,this.La=new Pc,this.Ba={},this.ka=new Map,this.qa=_s.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function PV(n,e,t=!0){return M(this,null,function*(){let r=Th(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield BS(r,e,t,!0),i})}function kV(n,e){return M(this,null,function*(){let t=Th(n);yield BS(t,e,!0,!1)})}function BS(n,e,t,r){return M(this,null,function*(){let i=yield ws(n.localStore,Mt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield p_(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Ch(n.remoteStore,i),a})}function p_(n,e,t,r,i){return M(this,null,function*(){n.Ka=(p,m,v)=>function(R,N,B,q){return M(this,null,function*(){let F=N.view.ma(B);F.ns&&(F=yield Jd(R.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,F)));let J=q&&q.targetChanges.get(N.targetId),te=q&&q.targetMismatches.get(N.targetId)!=null,X=N.view.applyChanges(F,R.isPrimaryClient,J,te);return Av(R,N.targetId,X.wa),X.snapshot})}(n,p,m,v);let o=yield Jd(n.localStore,e,!0),s=new lh(e,o.Ts),a=s.ma(o.documents),u=xc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);Av(n,t,l.wa);let h=new Tv(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function OV(n,e,t){return M(this,null,function*(){let r=U(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!$c(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Is(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Es(r.remoteStore,i.targetId),Cs(r,i.targetId)}).catch(Xr))):(Cs(r,i.targetId),yield Is(r.localStore,i.targetId,!0))})}function FV(n,e){return M(this,null,function*(){let t=U(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Es(t.remoteStore,r.targetId))})}function LV(n,e,t){return M(this,null,function*(){let r=v_(n);try{let i=yield function(s,a){let u=U(s),l=Ve.now(),h=a.reduce((v,b)=>v.add(b.key),se()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=Lt(),R=se();return u.cs.getEntries(v,h).next(N=>{b=N,b.forEach((B,q)=>{q.isValidDocument()||(R=R.add(B))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,b)).next(N=>{p=N;let B=[];for(let q of a){let F=ZL(q,p.get(q.key).overlayedDocument);F!=null&&B.push(new vn(q.key,F,Lb(F.value.mapValue),qe.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,B,a)}).next(N=>{m=N;let B=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(v,N.batchId,B)})}).then(()=>({batchId:m.batchId,changes:Kb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Ne(oe)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield dr(r,i.changes),yield Rs(r.remoteStore)}catch(i){let o=Ps(i,"Failed to persist write");t.reject(o)}})}function US(n,e){return M(this,null,function*(){let t=U(n);try{let r=yield mV(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?K(s.va):i.removedDocuments.size>0&&(K(s.va),s.va=!1))}),yield dr(t,r,e)}catch(r){yield Xr(r)}})}function hb(n,e,t){let r=U(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=U(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&f_(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function VV(n,e,t){return M(this,null,function*(){let r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ne($.comparator);s=s.insert(o,tt.newNoDocument(o,Q.min()));let a=se().add(o),u=new Ac(Q.min(),new Map,new Ne(oe),s,a);yield US(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),y_(r)}else yield Is(r.localStore,e,!1).then(()=>Cs(r,e,t)).catch(Xr)})}function jV(n,e){return M(this,null,function*(){let t=U(n),r=e.batch.batchId;try{let i=yield gV(t.localStore,e);m_(t,r,null),g_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield dr(t,i)}catch(i){yield Xr(i)}})}function BV(n,e,t){return M(this,null,function*(){let r=U(n);try{let i=yield function(s,a){let u=U(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(K(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);m_(r,e,t),g_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield dr(r,i)}catch(i){yield Xr(i)}})}function UV(n,e){return M(this,null,function*(){let t=U(n);ti(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=U(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Ps(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function g_(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function m_(n,e,t){let r=U(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Cs(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||$S(n,r)})}function $S(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Es(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),y_(n))}function Av(n,e,t){for(let r of t)r instanceof ch?(n.La.addReference(r.key,e),$V(n,r)):r instanceof uh?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||$S(n,r.key)):z()}function $V(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),y_(n))}function y_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(ve.fromString(e)),r=n.qa.next();n.Na.set(r,new bv(t)),n.Oa=n.Oa.insert(t,r),Ch(n.remoteStore,new vs(Mt(xs(t.path)),r,"TargetPurposeLimboResolution",zt.oe))}}function dr(n,e,t){return M(this,null,function*(){let r=U(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=sv.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return M(this,null,function*(){let h=U(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>S.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!ei(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),b=v.snapshotVersion,R=v.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,R)}}})}(r.localStore,o))})}function HV(n,e){return M(this,null,function*(){let t=U(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield SS(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield dr(t,r.hs)}})}function qV(n,e){let t=U(n),r=t.Na.get(e);if(r&&r.va)return se().add(r.key);{let i=se(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function zV(n,e){return M(this,null,function*(){let t=U(n),r=yield Jd(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Av(t,e.targetId,i.wa),i})}function GV(n,e){return M(this,null,function*(){let t=U(n);return RS(t.localStore,e).then(r=>dr(t,r))})}function WV(n,e,t,r){return M(this,null,function*(){let i=U(n),o=yield function(a,u){let l=U(a),h=U(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,u).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Rs(i.remoteStore):t==="acknowledged"||t==="rejected"?(m_(i,e,r||null),g_(i,e),function(a,u){U(U(a).mutationQueue).On(u)}(i.localStore,e)):z(),yield dr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function KV(n,e){return M(this,null,function*(){let t=U(n);if(Th(t),v_(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield fb(t,r.toArray());t.Qa=!0,yield vv(t.remoteStore,!0);for(let o of i)Ch(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Cs(t,s),Is(t.localStore,s,!0))),Es(t.remoteStore,s)}),yield i,yield fb(t,r),function(s){let a=U(s);a.Na.forEach((u,l)=>{Es(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Ne($.comparator)}(t),t.Qa=!1,yield vv(t.remoteStore,!1)}})}function fb(n,e,t){return M(this,null,function*(){let r=U(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield ws(r.localStore,Mt(u[0]));for(let l of u){let h=r.Fa.get(l),p=yield zV(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield MS(r.localStore,s);a=yield ws(r.localStore,l),yield p_(r,HS(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function HS(n){return Hb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function QV(n){return function(t){return U(U(t).persistence).Qi()}(U(n).localStore)}function YV(n,e,t,r){return M(this,null,function*(){let i=U(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield RS(i.localStore,zb(o[0])),a=Ac.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Qe.EMPTY_BYTE_STRING);yield dr(i,s,a);break}case"rejected":yield Is(i.localStore,e,!0),Cs(i,e,r);break;default:z()}})}function ZV(n,e,t){return M(this,null,function*(){let r=Th(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield MS(r.localStore,i),s=yield ws(r.localStore,o);yield p_(r,HS(o),s.targetId,!1,s.resumeToken),Ch(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Is(r.localStore,i,!1).then(()=>{Es(r.remoteStore,i),Cs(r,i)}).catch(Xr))}})}function Th(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=US.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VV.bind(null,e),e.Ca.d_=RV.bind(null,e.eventManager),e.Ca.$a=NV.bind(null,e.eventManager),e}function v_(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BV.bind(null,e),e}function JV(n,e,t){let r=U(n);(function(o,s,a){return M(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(v,b){let R=U(v),N=Ke(b.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",B=>R.Gr.getBundleMetadata(B,b.id)).then(B=>!!B&&B.createTime.compareTo(N)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(jS(u));let l=new Cv(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield dr(o,p.Ia,void 0),yield function(v,b){let R=U(v);return R.persistence.runTransaction("Save bundle","readwrite",N=>R.Gr.saveBundleMetadata(N,b))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(u){return mn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var xv=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return M(this,null,function*(){this.serializer=qc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return bS(this.persistence,new Zd,t.initialUser,this.serializer)}Ga(t){return new Qd(Yd.Zr,this.serializer)}Wa(t){return new th}terminate(){return M(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var dh=class n extends xv{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return M(this,null,function*(){yield lf(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield v_(this.Ja.syncEngine),yield Rs(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return bS(this.persistence,new Zd,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new qy(r,e.asyncQueue,t)}Ha(e,t){let r=new ay(t,this.persistence);return new sy(e.asyncQueue,r)}Ga(e){let t=a_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new ov(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,PS(),Cd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new th}},Mv=class n extends dh{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return M(this,null,function*(){yield lf(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof vc&&(this.sharedClientState.syncEngine={no:WV.bind(null,t),ro:YV.bind(null,t),io:ZV.bind(null,t),Qi:QV.bind(null,t),eo:GV.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>M(this,null,function*(){yield KV(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=PS();if(!vc.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=a_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},__=(()=>{class n{initialize(t,r){return M(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>hb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=HV.bind(null,this.syncEngine),yield vv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Iv}()}createDatastore(t){let r=qc(t.databaseInfo.databaseId),i=function(s){return new hv(s)}(t.databaseInfo);return function(s,a,u,l){return new gv(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new yv(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>hb(this.syncEngine,r,0),function(){return nh.D()?new nh:new lv}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new Sv(o,s,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return M(this,null,function*(){var t,r;yield function(o){return M(this,null,function*(){let s=U(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Ms(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function pb(n,e=10240){let t=0;return{read(){return M(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return M(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ts=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ge("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Rv=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new rt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return M(this,null,function*(){return this.metadata.promise})}Ua(){return M(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return M(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new Dv(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return M(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return M(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return M(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Nv=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return M(this,null,function*(){let s=U(i),a={documents:o.map(p=>Mc(s.serializer,p))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ve.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let m=rV(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());K(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new Tc(i,this.precondition(i)))}),yield function(r,i){return M(this,null,function*(){let o=U(r),s={writes:i.map(a=>Rc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ve.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=Q.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Q.min())?qe.exists(!1):qe.updateTime(t):qe.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Q.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qe.updateTime(t)}return qe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Pv=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Oc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>M(this,null,function*(){let e=new Nv(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Bc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!iS(t)}return!1}};var kv=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=bd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>M(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ps(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Qm(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>M(this,null,function*(){r.isEqual(i)||(yield SS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function gb(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield w_(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ub(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>ub(e.remoteStore,i)),n._onlineComponents=e})}function w_(n){return M(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Qm(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;mn("Error using user provided cache. Falling back to memory cache: "+t),yield Qm(n,new xv)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield Qm(n,new xv);return n._offlineComponents})}function bh(n){return M(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield gb(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield gb(n,new __))),n._onlineComponents})}function qS(n){return w_(n).then(e=>e.persistence)}function I_(n){return w_(n).then(e=>e.localStore)}function zS(n){return bh(n).then(e=>e.remoteStore)}function E_(n){return bh(n).then(e=>e.syncEngine)}function XV(n){return bh(n).then(e=>e.datastore)}function bs(n){return M(this,null,function*(){let e=yield bh(n),t=e.eventManager;return t.onListen=PV.bind(null,e.syncEngine),t.onUnlisten=OV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=FV.bind(null,e.syncEngine),t})}function e2(n){return n.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield qS(n),t=yield zS(n);return e.setNetworkEnabled(!0),function(i){let o=U(i);return o.L_.delete(0),zc(o)}(t)}))}function t2(n){return n.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield qS(n),t=yield zS(n);return e.setNetworkEnabled(!1),function(i){return M(this,null,function*(){let o=U(i);o.L_.add(0),yield Ms(o),o.q_.set("Offline")})}(t)}))}function n2(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield function(l,h){let p=U(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Ps(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield I_(n),e,t)})),t.promise}function GS(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,u,l){let h=new Ts({next:m=>{h.Za(),s.enqueueAndForget(()=>h_(o,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Fc(xs(a.path),h,{includeMetadataChanges:!0,_a:!0});return d_(o,p)}(yield bs(n),n.asyncQueue,e,t,r)})),r.promise}function r2(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield Jd(i,o,!0),u=new lh(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=Ps(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield I_(n),e,t)})),t.promise}function WS(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,u,l){let h=new Ts({next:m=>{h.Za(),s.enqueueAndForget(()=>h_(o,p)),m.fromCache&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Fc(a,h,{includeMetadataChanges:!0,_a:!0});return d_(o,p)}(yield bs(n),n.asyncQueue,e,t,r)})),r.promise}function i2(n,e){let t=new Ts(e);return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){U(i).Y_.add(o),o.next()}(yield bs(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){U(i).Y_.delete(o)}(yield bs(n),t)}))}}function o2(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?sS().encode(s):s,function(h,p){return new Rv(h,p)}(function(h,p){if(h instanceof Uint8Array)return pb(h,p);if(h instanceof ArrayBuffer)return pb(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,qc(e));n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){JV(yield E_(n),i,r)}))}function s2(n,e){return n.asyncQueue.enqueue(()=>M(this,null,function*(){return function(r,i){let o=U(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield I_(n),e)}))}function KS(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var mb=new Map;function D_(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function C_(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yb(n){if(!$.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vb(n){if($.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Sh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function we(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Sh(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function QS(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var hh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}C_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ym;switch(r.type){case"firstParty":return new ey(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return M(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=mb.get(t);r&&(k("ComponentProvider","Removing Datastore"),mb.delete(t),r.terminate())}(this),Promise.resolve()}};function YS(n,e,t,r={}){var i;let o=(n=we(n,qi))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&mn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=et.MOCK_USER;else{a=Zw(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new et(l)}n._authCredentials=new Zm(new Td(a,u))}}var lt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Me=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new On(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},On=class n extends lt{constructor(e,t,r){super(e,t,xs(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Me(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function T_(n,e,...t){if(n=Oe(n),D_("collection","path",e),n instanceof qi){let r=ve.fromString(e,...t);return vb(r),new On(n,null,r)}{if(!(n instanceof Me||n instanceof On))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return vb(r),new On(n.firestore,null,r)}}function ZS(n,e){if(n=we(n,qi),D_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new lt(n,null,function(r){return new yn(ve.emptyPath(),r)}(e))}function Gc(n,e,...t){if(n=Oe(n),arguments.length===1&&(e=bd.newId()),D_("doc","path",e),n instanceof qi){let r=ve.fromString(e,...t);return yb(r),new Me(n,null,new $(r))}{if(!(n instanceof Me||n instanceof On))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return yb(r),new Me(n.firestore,n instanceof On?n.converter:null,new $(r))}}function b_(n,e){return n=Oe(n),e=Oe(e),(n instanceof Me||n instanceof On)&&(e instanceof Me||e instanceof On)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function S_(n,e){return n=Oe(n),e=Oe(e),n instanceof lt&&e instanceof lt&&n.firestore===e.firestore&&$c(n._query,e._query)&&n.converter===e.converter}var fh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Oc(this,"async_queue_retry"),this.Vu=()=>{let r=Cd();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Cd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Cd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new rt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return M(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ei(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ge("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=_v.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return M(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Ov(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Fv=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new rt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var JS=-1,je=class extends qi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new fh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return M(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new fh(e),this._firestoreClient=void 0,yield e}})}};function dt(n){if(n._terminated)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||XS(n),n._firestoreClient}function XS(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new cy(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,KS(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new kv(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function eA(n,e){mn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return nA(n,__.provider,{build:r=>new dh(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function tA(n){return M(this,null,function*(){mn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();nA(n,__.provider,{build:t=>new Mv(t,e.cacheSizeBytes)})})}function nA(n,e,t){if((n=we(n,je))._firestoreClient||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},XS(n)}function rA(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new rt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{yield function(r){return M(this,null,function*(){if(!qr.D())return Promise.resolve();let i=r+"main";yield qr.delete(i)})}(a_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function iA(n){return function(t){let r=new rt;return t.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return UV(yield E_(t),r)})),r.promise}(dt(n=we(n,je)))}function oA(n){return e2(dt(n=we(n,je)))}function sA(n){return t2(dt(n=we(n,je)))}function aA(n,e){let t=dt(n=we(n,je)),r=new Fv;return o2(t,n._databaseId,e,r),r}function cA(n,e){return s2(dt(n=we(n,je)),e).then(t=>t?new lt(n,null,t.query):null)}var jn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Qe.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var _n=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ur=class{constructor(e){this._methodName=e}};var zi=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}};var Lc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var a2=/^__.*__$/,Lv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new vn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yr(e,this.data,t,this.fieldTransforms)}},ph=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function uA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var gh=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return mh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(uA(this.Cu)&&a2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Vv=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||qc(e)}Qu(e,t,r,i=!1){return new gh({Cu:e,methodName:t,qu:r,path:We.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Qi(n){let e=n._freezeSettings(),t=qc(n._databaseId);return new Vv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ah(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);M_("Data must be an object, but it was:",s,r);let a=hA(r,s),u,l;if(o.merge)u=new Gt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Hv(e,p,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);pA(h,m)||h.push(m)}u=new Gt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Lv(new yt(a),u,l)}var Vc=class n extends ur{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function lA(n,e,t){return new gh({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var jv=class n extends ur{_toFieldTransform(e){return new Ui(e.path,new Kr)}isEqual(e){return e instanceof n}},Bv=class n extends ur{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=lA(this,e,!0),r=this.Ku.map(o=>Yi(o,t)),i=new ar(r);return new Ui(e.path,i)}isEqual(e){return e instanceof n&&ff(this.Ku,e.Ku)}},Uv=class n extends ur{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=lA(this,e,!0),r=this.Ku.map(o=>Yi(o,t)),i=new cr(r);return new Ui(e.path,i)}isEqual(e){return e instanceof n&&ff(this.Ku,e.Ku)}},$v=class n extends ur{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Qr(e.serializer,Zb(e.serializer,this.$u));return new Ui(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function A_(n,e,t,r){let i=n.Qu(1,e,t);M_("Data must be an object, but it was:",i,r);let o=[],s=yt.empty();Ki(r,(u,l)=>{let h=R_(e,u,t);l=Oe(l);let p=i.Nu(h);if(l instanceof Vc)o.push(h);else{let m=Yi(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Gt(o);return new ph(s,a,i.fieldTransforms)}function x_(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Hv(e,r,t)],u=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Hv(e,o[m])),u.push(o[m+1]);let l=[],h=yt.empty();for(let m=a.length-1;m>=0;--m)if(!pA(l,a[m])){let v=a[m],b=u[m];b=Oe(b);let R=s.Nu(v);if(b instanceof Vc)l.push(v);else{let N=Yi(b,R);N!=null&&(l.push(v),h.set(v,N))}}let p=new Gt(l);return new ph(h,p,s.fieldTransforms)}function dA(n,e,t,r=!1){return Yi(t,n.Qu(r?4:3,e))}function Yi(n,e){if(fA(n=Oe(n)))return M_("Unsupported field value:",e,n),hA(n,e);if(n instanceof ur)return function(r,i){if(!uA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Yi(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Oe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Zb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ve.fromDate(r);return{timestampValue:ys(i.serializer,o)}}if(r instanceof Ve){let o=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ys(i.serializer,o)}}if(r instanceof zi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jn)return{bytesValue:aS(i.serializer,r._byteString)};if(r instanceof Me){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:i_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Lc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return r_(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Sh(r)}`)}(n,e)}function hA(n,e){let t={};return Pb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ki(n,(r,i)=>{let o=Yi(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function fA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ve||n instanceof zi||n instanceof jn||n instanceof Me||n instanceof ur||n instanceof Lc)}function M_(n,e,t){if(!fA(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Sh(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Hv(n,e,t){if((e=Oe(e))instanceof _n)return e._internalPath;if(typeof e=="string")return R_(n,e);throw mh("Field path arguments must be of type string or ",n,!1,void 0,t)}var c2=new RegExp("[~\\*/\\[\\]]");function R_(n,e,t){if(e.search(c2)>=0)throw mh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _n(...e.split("."))._internalPath}catch{throw mh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new P(x.INVALID_ARGUMENT,a+n+u)}function pA(n,e){return n.some(t=>t.isEqual(e))}var Gi=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(xh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},qv=class extends Gi{data(){return super.data()}};function xh(n,e){return typeof e=="string"?R_(n,e):e instanceof _n?e._internalPath:e._delegate._internalPath}function gA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var jc=class{},Wi=class extends jc{};function hr(n,e,...t){let r=[];e instanceof jc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof zv).length,a=o.filter(u=>u instanceof yh).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var yh=class n extends Wi{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return TA(e._query,t),new lt(e.firestore,e.converter,Iy(e._query,t))}_parse(e){let t=Qi(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){wb(p,h);let v=[];for(let b of p)v.push(_b(u,o,b));m={arrayValue:{values:v}}}else m=_b(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||wb(p,h),m=dA(a,s,p,h==="in"||h==="not-in");return fe.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function mA(n,e,t){let r=e,i=xh("where",n);return yh._create(i,r,t)}var zv=class n extends jc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Te.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)TA(s,u),s=Iy(s,u)}(e._query,t),new lt(e.firestore,e.converter,Iy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Gv=class n extends Wi{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ji(o,s)}(e._query,this._field,this._direction);return new lt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new yn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function yA(n,e="asc"){let t=e,r=xh("orderBy",n);return Gv._create(r,t)}var vh=class n extends Wi{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new lt(e.firestore,e.converter,Fd(e._query,this._limit,this._limitType))}};function vA(n){return QS("limit",n),vh._create("limit",n,"F")}function _A(n){return QS("limitToLast",n),vh._create("limitToLast",n,"L")}var _h=class n extends Wi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=CA(e,this.type,this._docOrFields,this._inclusive);return new lt(e.firestore,e.converter,function(i,o){return new yn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function wA(...n){return _h._create("startAt",n,!0)}function IA(...n){return _h._create("startAfter",n,!1)}var wh=class n extends Wi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=CA(e,this.type,this._docOrFields,this._inclusive);return new lt(e.firestore,e.converter,function(i,o){return new yn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function EA(...n){return wh._create("endBefore",n,!1)}function DA(...n){return wh._create("endAt",n,!0)}function CA(n,e,t,r){if(t[0]=Oe(t[0]),t[0]instanceof Gi)return function(o,s,a,u,l){if(!u)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of us(o))if(p.field.isKeyField())h.push(Vi(s,u.key));else{let m=u.data.field(p.field);if(Eh(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new Ln(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Qi(n.firestore);return function(s,a,u,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let b=0;b<h.length;b++){let R=h[b];if(m[b].field.isKeyField()){if(typeof R!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof R}`);if(!t_(s)&&R.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${R}' contains a slash.`);let N=s.path.child(ve.fromString(R));if(!$.isDocumentKey(N))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let B=new $(N);v.push(Vi(a,B))}else{let N=dA(u,l,R);v.push(N)}}return new Ln(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function _b(n,e,t){if(typeof(t=Oe(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!t_(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ve.fromString(t));if(!$.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vi(n,new $(r))}if(t instanceof Me)return Vi(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sh(t)}.`)}function wb(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TA(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Ss=class{convertValue(e,t="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ki(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ke(s.doubleValue));return new Lc(o)}convertGeoPoint(e){return new zi(ke(e.latitude),ke(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Xv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ec(e));default:return null}}convertTimestamp(e){let t=sr(e);return new Ve(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ve.fromString(e);K(vS(r));let i=new Gr(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||Ge(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Mh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Wv=class extends Ss{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};var or=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},on=class extends Gi{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new $r(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(xh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},$r=class extends on{data(e={}){return super.data(e)}},wn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new or(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $r(this._firestore,this._userDataWriter,r.key,r,new or(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new $r(i._firestore,i._userDataWriter,a.doc.key,a.doc,new or(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new $r(i._firestore,i._userDataWriter,a.doc.key,a.doc,new or(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:u2(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function u2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function N_(n,e){return n instanceof on&&e instanceof on?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof wn&&e instanceof wn&&n._firestore===e._firestore&&S_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function bA(n){n=we(n,Me);let e=we(n.firestore,je);return GS(dt(e),n._key).then(t=>F_(e,n,t))}var lr=class extends Ss{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};function SA(n){n=we(n,Me);let e=we(n.firestore,je),t=dt(e),r=new lr(e);return n2(t,n._key).then(i=>new on(e,r,n._key,i,new or(i!==null&&i.hasLocalMutations,!0),n.converter))}function AA(n){n=we(n,Me);let e=we(n.firestore,je);return GS(dt(e),n._key,{source:"server"}).then(t=>F_(e,n,t))}function xA(n){n=we(n,lt);let e=we(n.firestore,je),t=dt(e),r=new lr(e);return gA(n._query),WS(t,n._query).then(i=>new wn(e,r,n,i))}function MA(n){n=we(n,lt);let e=we(n.firestore,je),t=dt(e),r=new lr(e);return r2(t,n._query).then(i=>new wn(e,r,n,i))}function RA(n){n=we(n,lt);let e=we(n.firestore,je),t=dt(e),r=new lr(e);return WS(t,n._query,{source:"server"}).then(i=>new wn(e,r,n,i))}function P_(n,e,t){n=we(n,Me);let r=we(n.firestore,je),i=Mh(n.converter,e,t);return ks(r,[Ah(Qi(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,qe.none())])}function k_(n,e,t,...r){n=we(n,Me);let i=we(n.firestore,je),o=Qi(i),s;return s=typeof(e=Oe(e))=="string"||e instanceof _n?x_(o,"updateDoc",n._key,e,t,r):A_(o,"updateDoc",n._key,e),ks(i,[s.toMutation(n._key,qe.exists(!0))])}function NA(n){return ks(we(n.firestore,je),[new Zr(n._key,qe.none())])}function PA(n,e){let t=we(n.firestore,je),r=Gc(n),i=Mh(n.converter,e);return ks(t,[Ah(Qi(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,qe.exists(!1))]).then(()=>r)}function O_(n,...e){var t,r,i;n=Oe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Ov(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Ov(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Me)l=we(n.firestore,je),h=xs(n._key.path),u={next:p=>{e[s]&&e[s](F_(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=we(n,lt);l=we(p.firestore,je),h=p._query;let m=new lr(l);u={next:v=>{e[s]&&e[s](new wn(l,m,p,v))},error:e[s+1],complete:e[s+2]},gA(n._query)}return function(m,v,b,R){let N=new Ts(R),B=new Fc(v,N,b);return m.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return d_(yield bs(m),B)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return h_(yield bs(m),B)}))}}(dt(l),h,a,u)}function kA(n,e){return i2(dt(n=we(n,je)),Ov(e)?e:{next:e})}function ks(n,e){return function(r,i){let o=new rt;return r.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return LV(yield E_(r),i,o)})),o.promise}(dt(n),e)}function F_(n,e,t){let r=t.docs.get(e._key),i=new lr(n);return new on(n,i,e._key,r,new or(t.hasPendingWrites,t.fromCache),e.converter)}var l2={maxAttempts:5};var Ih=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qi(e)}set(e,t,r){this._verifyNotCommitted();let i=Br(e,this._firestore),o=Mh(i.converter,t,r),s=Ah(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,qe.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Br(e,this._firestore),s;return s=typeof(t=Oe(t))=="string"||t instanceof _n?x_(this._dataReader,"WriteBatch.update",o._key,t,r,i):A_(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,qe.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Br(e,this._firestore);return this._mutations=this._mutations.concat(new Zr(t._key,qe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Br(n,e){if((n=Oe(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Kv=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Qi(t)}get(t){let r=Br(t,this._firestore),i=new Wv(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new Gi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Gi(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=Br(t,this._firestore),s=Mh(o.converter,r,i),a=Ah(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Br(t,this._firestore),a;return a=typeof(r=Oe(r))=="string"||r instanceof _n?x_(this._dataReader,"Transaction.update",s._key,r,i,o):A_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Br(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Br(e,this._firestore),r=new lr(this._firestore);return super.get(e).then(i=>new on(this._firestore,r,t._key,i._document,new or(!1,!1),t.converter))}};function OA(n,e,t){n=we(n,je);let r=Object.assign(Object.assign({},l2),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new rt;return o.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){let l=yield XV(o);new Pv(o.asyncQueue,l,a,s,u).au()})),u.promise}(dt(n),i=>e(new Kv(n,i)),r)}function FA(){return new Vc("deleteField")}function LA(){return new jv("serverTimestamp")}function VA(...n){return new Bv("arrayUnion",n)}function jA(...n){return new Uv("arrayRemove",n)}function BA(n){return new $v("increment",n)}(function(e,t=!0){(function(i){As=i})(eI),ia(new si("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new je(new Jm(r.getProvider("auth-internal")),new ny(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gr(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),yr(vT,"4.7.3",e),yr(vT,"4.7.3","esm2017")})();var d2="@firebase/firestore-compat",h2="0.3.38";function $_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function UA(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function $A(){if(!kb())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Rh=class n{constructor(e){this._delegate=e}static fromBase64String(e){return $A(),new n(jn.fromBase64String(e))}static fromUint8Array(e){return UA(),new n(jn.fromUint8Array(e))}toBase64(){return $A(),this._delegate.toBase64()}toUint8Array(){return UA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function L_(n){return f2(n,["next","error","complete"])}function f2(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var V_=class{enableIndexedDbPersistence(e,t){return eA(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return tA(e._delegate)}clearIndexedDbPersistence(e){return rA(e._delegate)}},Nh=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Gr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){YS(this._delegate,e,t,r)}enableNetwork(){return oA(this._delegate)}disableNetwork(){return sA(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,C_("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return iA(this._delegate)}onSnapshotsInSync(e){return kA(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ls(this,T_(this._delegate,e))}catch(t){throw Rt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bn(this,Gc(this._delegate,e))}catch(t){throw Rt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new eo(this,ZS(this._delegate,e))}catch(t){throw Rt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return OA(this._delegate,t=>e(new Ph(this,t)))}batch(){return dt(this._delegate),new kh(new Ih(this._delegate,e=>ks(this._delegate,e)))}loadBundle(e){return aA(this._delegate,e)}namedQuery(e){return cA(this._delegate,e).then(t=>t?new eo(this,t):null)}},Os=class extends Ss{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rh(new jn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Bn.forKey(t,this.firestore,null)}};function p2(n){Ib(n)}var Ph=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Os(e)}get(e){let t=Zi(e);return this._delegate.get(t).then(r=>new Ji(this._firestore,new on(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Zi(e);return r?($_("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Zi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Zi(e);return this._delegate.delete(t),this}},kh=class{constructor(e){this._delegate=e}set(e,t,r){let i=Zi(e);return r?($_("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Zi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Zi(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Fs=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new $r(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xi(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Os(e),t),i.set(t,o)),o}};Fs.INSTANCES=new WeakMap;var Bn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Os(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Me(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Me(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ls(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ls(this.firestore,T_(this._delegate,e))}catch(t){throw Rt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Oe(e),e instanceof Me?b_(this._delegate,e):!1}set(e,t){t=$_("DocumentReference.set",t);try{return t?P_(this._delegate,e,t):P_(this._delegate,e)}catch(r){throw Rt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?k_(this._delegate,e):k_(this._delegate,e,t,...r)}catch(i){throw Rt(i,"updateDoc()","DocumentReference.update()")}}delete(){return NA(this._delegate)}onSnapshot(...e){let t=HA(e),r=qA(e,i=>new Ji(this.firestore,new on(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return O_(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=SA(this._delegate):e?.source==="server"?t=AA(this._delegate):t=bA(this._delegate),t.then(r=>new Ji(this.firestore,new on(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Fs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Rt(n,e,t){return n.message=n.message.replace(e,t),n}function HA(n){for(let e of n)if(typeof e=="object"&&!L_(e))return e;return{}}function qA(n,e){var t,r;let i;return L_(n[0])?i=n[0]:L_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ji=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return N_(this._delegate,e._delegate)}},Xi=class extends Ji{data(e){let t=this._delegate.data(e);return this._delegate._converter||Eb(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},eo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Os(e)}where(e,t,r){try{return new n(this.firestore,hr(this._delegate,mA(e,t,r)))}catch(i){throw Rt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,hr(this._delegate,yA(e,t)))}catch(r){throw Rt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,hr(this._delegate,vA(e)))}catch(t){throw Rt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,hr(this._delegate,_A(e)))}catch(t){throw Rt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,hr(this._delegate,wA(...e)))}catch(t){throw Rt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,hr(this._delegate,IA(...e)))}catch(t){throw Rt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,hr(this._delegate,EA(...e)))}catch(t){throw Rt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,hr(this._delegate,DA(...e)))}catch(t){throw Rt(t,"endAt()","Query.endAt()")}}isEqual(e){return S_(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=MA(this._delegate):e?.source==="server"?t=RA(this._delegate):t=xA(this._delegate),t.then(r=>new Wc(this.firestore,new wn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=HA(e),r=qA(e,i=>new Wc(this.firestore,new wn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return O_(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Fs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},j_=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Xi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Wc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new eo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Xi(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new j_(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Xi(this._firestore,r))})}isEqual(e){return N_(this._delegate,e._delegate)}},Ls=class n extends eo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Bn(this.firestore,e):null}doc(e){try{return e===void 0?new Bn(this.firestore,Gc(this._delegate)):new Bn(this.firestore,Gc(this._delegate,e))}catch(t){throw Rt(t,"doc()","CollectionReference.doc()")}}add(e){return PA(this._delegate,e).then(t=>new Bn(this.firestore,t))}isEqual(e){return b_(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Fs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Zi(n){return we(n,Me)}var B_=class n{constructor(...e){this._delegate=new _n(...e)}static documentId(){return new n(We.keyField().canonicalString())}isEqual(e){return e=Oe(e),e instanceof _n?this._delegate._internalPath.isEqual(e._internalPath):!1}};var U_=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=LA();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=FA();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=VA(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=jA(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=BA(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var g2={Firestore:Nh,GeoPoint:zi,Timestamp:Ve,Blob:Rh,Transaction:Ph,WriteBatch:kh,DocumentReference:Bn,DocumentSnapshot:Ji,Query:eo,QueryDocumentSnapshot:Xi,QuerySnapshot:Wc,CollectionReference:Ls,FieldPath:B_,FieldValue:U_,setLogLevel:p2,CACHE_SIZE_UNLIMITED:JS};function m2(n,e){n.INTERNAL.registerComponent(new si("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},g2)))}function y2(n){m2(n,(e,t)=>new Nh(e,t,new V_)),n.registerVersion(d2,h2)}y2(Bt);function v2(n,e=ca){return new pe(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function zA(n,e){return v2(n,e)}function _2(n,e){return zA(n,e).pipe(hi(void 0),da(),G(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function z_(n,e){return zA(n,e).pipe(G(t=>({payload:t,type:"query"})))}var Oh=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=KA(r,t);return new Lh(i,o,this.afs)}snapshotChanges(){return _2(this.ref,this.afs.schedulers.outsideAngular).pipe(Ft)}valueChanges(e={}){return this.snapshotChanges().pipe(G(({payload:t})=>e.idField?xe(V({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ee(this.ref.get(e)).pipe(Ft)}};function Fh(n,e){return z_(n,e).pipe(hi(void 0),da(),G(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function GA(n,e,t){return Fh(n,t).pipe(di((r,i)=>w2(r,i.map(o=>o.payload),e),[]),Lf(),G(r=>r.map(i=>({type:i.type,payload:i}))))}function w2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=I2(n,r))}),n}function H_(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function I2(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return H_(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return H_(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return H_(n,e.oldIndex,1);break}return n}function WA(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Lh=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Fh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(G(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(hi(void 0),da(),ut(([r,i])=>i.length>0||!r),G(([,r])=>r),Ft)}auditTrail(e){return this.stateChanges(e).pipe(di((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=WA(e);return GA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ft)}valueChanges(e={}){return z_(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.payload.docs.map(r=>e.idField?xe(V({},r.data()),{[e.idField]:r.id}):r.data())),Ft)}get(e){return Ee(this.query.get(e)).pipe(Ft)}add(e){return this.ref.add(e)}doc(e){return new Oh(this.ref.doc(e),this.afs)}},q_=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Fh(this.query,this.afs.schedulers.outsideAngular).pipe(Ft):Fh(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.filter(r=>e.indexOf(r.type)>-1)),ut(t=>t.length>0),Ft)}auditTrail(e){return this.stateChanges(e).pipe(di((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=WA(e);return GA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ft)}valueChanges(e={}){return z_(this.query,this.afs.schedulers.outsideAngular).pipe(G(r=>r.payload.docs.map(i=>e.idField?V({[e.idField]:i.id},i.data()):i.data())),Ft)}get(e){return Ee(this.query.get(e)).pipe(Ft)}},E2=new W("angularfire2.enableFirestorePersistence"),D2=new W("angularfire2.firestore.persistenceSettings"),C2=new W("angularfire2.firestore.settings"),T2=new W("angularfire2.firestore.use-emulator");function KA(n,e=t=>t){return{query:e(n),ref:n}}var Vt=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,p,m,v,b,R,N,B,q){this.schedulers=u;let F=sc(t,a,r),J=h;p&&Vm(F,a,m,b,R,N,v,B),[this.firestore,this.persistenceEnabled$]=fd(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let te=a.runOutsideAngular(()=>F.firestore());if(o&&te.settings(o),J&&te.useEmulator(...J),i&&!Ci(s)){let X=()=>{try{return Ee(te.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),ee(!1)}};return[te,a.runOutsideAngular(X)]}else return[te,ee(!1)]},[o,J,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=KA(i,r),a=this.schedulers.ngZone.run(()=>o);return new Lh(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new q_(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Oh(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(O(Qo),O(Yo,8),O(E2,8),O(C2,8),O(Pt),O(me),O(ld),O(D2,8),O(T2,8),O(gT,8),O(Nm,8),O(Pm,8),O(km,8),O(Om,8),O(Fm,8),O(Lm,8),O(Ai,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var QA=(()=>{class n{constructor(t){this.db=t,this.accesoHeader="header service running...",this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}static{this.\u0275fac=function(r){return new(r||n)(O(Vt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var YA=(()=>{class n{constructor(t){this.headerService=t,this.header=new cd,console.log(this.headerService),this.headerService.getHeader().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0],console.log(this.header)})}static{this.\u0275fac=function(r){return new(r||n)(Le(QA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-header"]],decls:25,vars:7,consts:[[1,"cv-header"],[1,"cv-header-left"],[1,"cv-name"],[1,"cv-goal"],[1,"cv-photo"],["alt","Foto de perfil",3,"src"],[1,"cv-header-right"]],template:function(r,i){r&1&&(ne(0,"header",0)(1,"div",1)(2,"h1",2),de(3),Z(),ne(4,"p",3),de(5),Z()(),ne(6,"div",4),At(7,"img",5),Z(),ne(8,"div",6)(9,"p")(10,"strong"),de(11,"Email:"),Z(),de(12),Z(),ne(13,"p")(14,"strong"),de(15,"Tel:"),Z(),de(16),Z(),ne(17,"p")(18,"strong"),de(19,"Ubicaci\xF3n:"),Z(),de(20),Z(),ne(21,"p")(22,"strong"),de(23,"Redes:"),Z(),de(24),Z()()()),r&2&&(he(3),Ze(i.header.name),he(2),Ze(i.header.goalLife),he(2),mg("src",i.header.photoUrl,LD),he(5),fn(" ",i.header.email,""),he(4),fn(" ",i.header.phoneNumber,""),he(4),fn(" ",i.header.location,""),he(4),fn(" ",i.header.socialNetwork,""))},styles:[".cv-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#faa622;padding:30px;border-radius:12px 12px 0 0;color:#fff;flex-wrap:wrap;gap:20px}.cv-header-left[_ngcontent-%COMP%]{flex:1;min-width:200px}.cv-name[_ngcontent-%COMP%]{margin:0;font-size:2rem;color:#fff}.cv-goal[_ngcontent-%COMP%]{margin-top:10px;font-size:1rem;color:#2a2540;font-weight:500}.cv-photo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:160px;height:160px;object-fit:cover;border-radius:12px;border:4px solid #fff;background-color:#fefefe;box-shadow:0 4px 10px #0003}.cv-header-right[_ngcontent-%COMP%]{flex:1;min-width:200px;color:#2a2540;font-size:.95rem}.cv-header-right[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}"]})}}return n})();var ZA=(()=>{class n{constructor(t){this.db=t,this.accesoWorkExperience="work experience running...",this.dbPath="/work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}static{this.\u0275fac=function(r){return new(r||n)(O(Vt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function x2(n,e){if(n&1&&(ne(0,"div",3)(1,"div",4)(2,"h3",5),de(3),Z(),ne(4,"span",6),de(5),Z()(),ne(6,"p",7)(7,"b"),de(8),Z()(),ne(9,"p",8),de(10),Z(),ne(11,"p",9),de(12),Z()()),n&2){let t=e.$implicit;he(3),Ze(t.company),he(2),yg("",t.startDate," - ",t.endDate,""),he(3),Ze(t.position),he(2),Ze(t.location),he(2),Ze(t.accomplishments)}}var JA=(()=>{class n{constructor(t){this.workExperienceService=t,this.workExperience=[],console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r,console.log(this.workExperience)})}static{this.\u0275fac=function(r){return new(r||n)(Le(ZA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-work-experience"]],decls:4,vars:1,consts:[[1,"cv-section","experience-section"],[1,"section-title"],["class","job-entry",4,"ngFor","ngForOf"],[1,"job-entry"],[1,"job-header"],[1,"company"],[1,"date"],[1,"position"],[1,"location"],[1,"accomplishments"]],template:function(r,i){r&1&&(ne(0,"section",0)(1,"h2",1),de(2,"Experiencia Laboral"),Z(),kt(3,x2,13,6,"div",2),Z()),r&2&&(he(3),St("ngForOf",i.workExperience))},dependencies:[en],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.5rem;color:#faa622;border-bottom:2px solid #C4D70C;padding-bottom:8px;margin-bottom:25px}.job-entry[_ngcontent-%COMP%]{padding:12px 0;border-bottom:1px dashed #ccc}.job-entry[_ngcontent-%COMP%]:last-child{border-bottom:none}.job-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.company[_ngcontent-%COMP%]{font-size:1.1rem;color:#2a2540;margin:0}.date[_ngcontent-%COMP%]{font-size:.9rem;color:#c22303;font-weight:500}.position[_ngcontent-%COMP%]{font-size:1rem;color:#2a2540;margin:4px 0}.location[_ngcontent-%COMP%]{font-size:.95rem;color:#444;margin-bottom:4px}.accomplishments[_ngcontent-%COMP%]{font-size:.95rem;color:#444;line-height:1.5}"]})}}return n})();var XA=(()=>{class n{constructor(t){this.db=t,this.accesoEducation="Education Server is Running...",this.dbPath="/education",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef}static{this.\u0275fac=function(r){return new(r||n)(O(Vt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function N2(n,e){if(n&1&&(ne(0,"div",3)(1,"div",4)(2,"h3",5),de(3),Z(),ne(4,"span",6),de(5),Z()(),ne(6,"p",7),de(7),Z()()),n&2){let t=e.$implicit;he(3),Ze(t.school),he(2),Ze(t.date),he(2),Ze(t.location)}}var ex=(()=>{class n{constructor(t){this.educationService=t,this.education=[],console.log(this.educationService),this.educationService.getEducation().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.education=r,console.log(this.education)})}static{this.\u0275fac=function(r){return new(r||n)(Le(XA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-education"]],decls:4,vars:1,consts:[[1,"cv-section","education-section"],[1,"section-title"],["class","edu-entry",4,"ngFor","ngForOf"],[1,"edu-entry"],[1,"edu-header"],[1,"school-name"],[1,"date"],[1,"location"]],template:function(r,i){r&1&&(ne(0,"section",0)(1,"h2",1),de(2,"Educaci\xF3n"),Z(),kt(3,N2,8,3,"div",2),Z()),r&2&&(he(3),St("ngForOf",i.education))},dependencies:[en],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.5rem;color:#faa622;border-bottom:2px solid #C4D70C;padding-bottom:8px;margin-bottom:25px}.edu-entry[_ngcontent-%COMP%]{padding:12px 0;border-bottom:1px dashed #ccc}.edu-entry[_ngcontent-%COMP%]:last-child{border-bottom:none}.edu-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.school-name[_ngcontent-%COMP%]{font-size:1.1rem;color:#2a2540;margin:0}.date[_ngcontent-%COMP%]{font-size:.9rem;color:#c22303;font-weight:500}.location[_ngcontent-%COMP%]{margin-top:6px;font-size:.95rem;color:#444;line-height:1.5}"]})}}return n})();var tx=(()=>{class n{constructor(t){this.db=t,this.accesoSkills="Skills Services are Runnig",this.dbPath="/skill",this.skillRef=t.collection(this.dbPath)}getSkill(){return this.skillRef}static{this.\u0275fac=function(r){return new(r||n)(O(Vt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var O2=n=>({width:n}),F2=()=>[];function L2(n,e){n&1&&At(0,"div",10)}function V2(n,e){if(n&1&&(ne(0,"div",3)(1,"div",4)(2,"h3",5),de(3),Z(),ne(4,"span",6),de(5),Z()(),ne(6,"div",7)(7,"div",8),kt(8,L2,1,0,"div",9),Z()()()),n&2){let t=e.$implicit;he(3),Ze(t.name),he(2),Ze(t.level),he(2),St("ngStyle",S0(4,O2,t.level)),he(),St("ngForOf",b0(6,F2).constructor(10))}}var nx=(()=>{class n{constructor(t){this.skillsService=t,this.skills=[],console.log(this.skillsService),this.skillsService.getSkill().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r,console.log(this.skills)})}static{this.\u0275fac=function(r){return new(r||n)(Le(tx))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-skills"]],decls:4,vars:1,consts:[[1,"cv-section","skills-section"],[1,"section-title"],["class","skill-entry",4,"ngFor","ngForOf"],[1,"skill-entry"],[1,"skill-header"],[1,"skill-name"],[1,"skill-level-text"],[1,"battery-bar"],[1,"battery-fill",3,"ngStyle"],["class","battery-cell",4,"ngFor","ngForOf"],[1,"battery-cell"]],template:function(r,i){r&1&&(ne(0,"section",0)(1,"h2",1),de(2,"Habilidades"),Z(),kt(3,V2,9,7,"div",2),Z()),r&2&&(he(3),St("ngForOf",i.skills))},dependencies:[en,K0],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.5rem;color:#faa622;border-bottom:2px solid #C4D70C;padding-bottom:8px;margin-bottom:25px}.skill-entry[_ngcontent-%COMP%]{margin-bottom:20px}.skill-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.skill-name[_ngcontent-%COMP%]{font-size:1.1rem;color:#2a2540;margin:0}.skill-level-text[_ngcontent-%COMP%]{font-size:.9rem;color:#c22303;font-weight:500}.battery-bar[_ngcontent-%COMP%]{height:16px;background-color:#eee;border-radius:5px;overflow:hidden;margin-top:6px;display:flex;position:relative}.battery-fill[_ngcontent-%COMP%]{display:flex;height:100%;background-color:transparent;transition:width .3s ease-in-out;overflow:hidden}.battery-cell[_ngcontent-%COMP%]{flex:1;margin-right:2px;background-color:#7fe6ef;border-radius:2px}.battery-cell[_ngcontent-%COMP%]:last-child{margin-right:0}"]})}}return n})();var rx=(()=>{class n{constructor(t){this.db=t,this.accesoCertificates="certificates running...",this.dbPath="/certificate",this.certificateRef=t.collection(this.dbPath)}getCertificates(){return this.certificateRef}static{this.\u0275fac=function(r){return new(r||n)(O(Vt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function U2(n,e){if(n&1&&(ne(0,"div",3)(1,"div",4)(2,"h3",5),de(3),Z(),ne(4,"span",6),de(5),Z()(),ne(6,"p",7),de(7),Z()()),n&2){let t=e.$implicit;he(3),Ze(t.title),he(2),Ze(t.date),he(2),Ze(t.context)}}var ix=(()=>{class n{constructor(t){this.certificatesService=t,this.certificates=[],console.log(this.certificatesService),this.certificatesService.getCertificates().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r,console.log(this.certificates)})}static{this.\u0275fac=function(r){return new(r||n)(Le(rx))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-certificates"]],decls:4,vars:1,consts:[[1,"cv-section","certificates-section"],[1,"section-title"],["class","certificate-entry",4,"ngFor","ngForOf"],[1,"certificate-entry"],[1,"certificate-header"],[1,"certificate-title"],[1,"date"],[1,"certificate-context"]],template:function(r,i){r&1&&(ne(0,"section",0)(1,"h2",1),de(2,"Certificados"),Z(),kt(3,U2,8,3,"div",2),Z()),r&2&&(he(3),St("ngForOf",i.certificates))},dependencies:[en],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.5rem;color:#faa622;border-bottom:2px solid #C4D70C;padding-bottom:8px;margin-bottom:25px}.certificate-entry[_ngcontent-%COMP%]{padding:12px 0;border-bottom:1px dashed #ccc}.certificate-entry[_ngcontent-%COMP%]:last-child{border-bottom:none}.certificate-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.certificate-title[_ngcontent-%COMP%]{font-size:1.1rem;color:#2a2540;margin:0}.date[_ngcontent-%COMP%]{font-size:.9rem;color:#c22303;font-weight:500}.certificate-context[_ngcontent-%COMP%]{margin-top:6px;font-size:.95rem;color:#444;line-height:1.5}"]})}}return n})();var ox=(()=>{class n{constructor(t){this.db=t,this.accesoLanguages="Languagues Service is Running...",this.dbPath="/languages",this.languageRef=t.collection(this.dbPath)}getLanguage(){return this.languageRef}static{this.\u0275fac=function(r){return new(r||n)(O(Vt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function q2(n,e){if(n&1&&(ne(0,"li",4),de(1),Z()),n&2){let t=e.$implicit;he(),fn(" ",t.language," ")}}var sx=(()=>{class n{constructor(t){this.languagesService=t,this.languages=[],console.log(this.languagesService),this.languagesService.getLanguage().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r,console.log(this.languages)})}static{this.\u0275fac=function(r){return new(r||n)(Le(ox))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-languages"]],decls:5,vars:1,consts:[[1,"cv-section","languages-section"],[1,"section-title"],[1,"language-list"],["class","language-item",4,"ngFor","ngForOf"],[1,"language-item"]],template:function(r,i){r&1&&(ne(0,"section",0)(1,"h2",1),de(2,"Idiomas"),Z(),ne(3,"ul",2),kt(4,q2,2,1,"li",3),Z()()),r&2&&(he(4),St("ngForOf",i.languages))},dependencies:[en],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.5rem;color:#faa622;border-bottom:2px solid #C4D70C;padding-bottom:8px;margin-bottom:25px}.language-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.language-item[_ngcontent-%COMP%]{padding:10px 0;border-bottom:1px dashed #ccc;color:#2a2540;font-size:1rem}.language-item[_ngcontent-%COMP%]:last-child{border-bottom:none}"]})}}return n})();var ax=(()=>{class n{constructor(t){this.db=t,this.accessoInterests="Interests Service is Running",this.dbPath="/interests",this.interestsRef=t.collection(this.dbPath)}getInterests(){return this.interestsRef}static{this.\u0275fac=function(r){return new(r||n)(O(Vt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function W2(n,e){if(n&1&&(ne(0,"li",4),de(1),Z()),n&2){let t=e.$implicit;he(),fn(" ",t.interest," ")}}var cx=(()=>{class n{constructor(t){this.interestsService=t,this.interests=[],console.log(this.interestsService),this.interestsService.getInterests().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interests=r,console.log(this.interests)})}static{this.\u0275fac=function(r){return new(r||n)(Le(ax))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-interests"]],decls:5,vars:1,consts:[[1,"cv-section","interests-section"],[1,"section-title"],[1,"interest-list"],["class","interest-item",4,"ngFor","ngForOf"],[1,"interest-item"]],template:function(r,i){r&1&&(ne(0,"section",0)(1,"h2",1),de(2,"Intereses"),Z(),ne(3,"ul",2),kt(4,W2,2,1,"li",3),Z()()),r&2&&(he(4),St("ngForOf",i.interests))},dependencies:[en],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.5rem;color:#faa622;border-bottom:2px solid #C4D70C;padding-bottom:8px;margin-bottom:25px}.interest-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.interest-item[_ngcontent-%COMP%]{padding:10px 0;border-bottom:1px dashed #ccc;color:#2a2540;font-size:1rem}.interest-item[_ngcontent-%COMP%]:last-child{border-bottom:none}"]})}}return n})();var ux=(()=>{class n{constructor(){this.title="mycv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ot({type:n,selectors:[["app-root"]],decls:17,vars:0,consts:[[1,"cv-container"],[1,"cv-body"],[1,"cv-sidebar"],[1,"cv-section"],[1,"cv-main"]],template:function(r,i){r&1&&(ne(0,"div",0),At(1,"app-header"),ne(2,"div",1)(3,"aside",2)(4,"section",3),At(5,"app-work-experience"),Z(),ne(6,"section",3),At(7,"app-education"),Z(),ne(8,"section",3),At(9,"app-languages"),Z()(),ne(10,"main",4)(11,"section",3),At(12,"app-skills"),Z(),ne(13,"section",3),At(14,"app-certificates"),Z(),ne(15,"section",3),At(16,"app-interests"),Z()()()())},dependencies:[YA,JA,ex,nx,ix,sx,cx],styles:['body[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:#f4f4f4;color:#333;margin:0;padding:0}.cv-container[_ngcontent-%COMP%]{max-width:1200px;margin:40px auto;background:#fff;padding:40px;border-radius:12px;box-shadow:0 4px 25px #0000001a}.cv-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px;background-color:#faa622;padding:20px;border-radius:10px}.cv-title[_ngcontent-%COMP%]{color:#fff;font-size:2rem;margin:0}.cv-body[_ngcontent-%COMP%]{display:flex;gap:30px}.cv-sidebar[_ngcontent-%COMP%], .cv-main[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:25px}.cv-section[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 2px 8px #0000000d}a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}b[_ngcontent-%COMP%]{color:#222}.cv-section[_ngcontent-%COMP%]{position:relative;overflow:hidden}.cv-section[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:150%;height:150%;background:#faa622;transform:translate(-50%,-50%) rotate(45deg);z-index:-1}']})}}return n})();var lx={production:!1,firebase:{apiKey:"AIzaSyBktPaVHAbX0bpzDyYZrfTQ7D8GiD-wI6k",authDomain:"pedrogar-mycv.firebaseapp.com",projectId:"pedrogar-mycv",storageBucket:"pedrogar-mycv.firebasestorage.app",messagingSenderId:"424821319071",appId:"1:424821319071:web:4e5cd1ef6abec3775049aa"}};var dx=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=bt({type:n,bootstrap:[ux]})}static{this.\u0275inj=Tt({imports:[oC,JC,pT.initializeApp(lx.firebase)]})}}return n})();iC().bootstrapModule(dx,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
